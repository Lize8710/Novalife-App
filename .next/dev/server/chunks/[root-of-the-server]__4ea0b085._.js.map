{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/elise/Documents/novalife-app/lib/mongodb.ts"],"sourcesContent":["import { MongoClient } from 'mongodb';\r\n\r\nconst uri = process.env.MONGODB_URI!;\r\nlet client: MongoClient;\r\nlet clientPromise: Promise<MongoClient>;\r\n\r\nif (!process.env.MONGODB_URI) {\r\n  throw new Error('Please add your Mongo URI to .env.local');\r\n}\r\n\r\nif (process.env.NODE_ENV === \"development\") {\r\n  // In development mode, use a global variable so that the value\r\n  // is preserved across module reloads caused by HMR (Hot Module Replacement).\r\n  if (!(global as any)._mongoClientPromise) {\r\n    client = new MongoClient(uri);\r\n    (global as any)._mongoClientPromise = client.connect();\r\n  }\r\n  clientPromise = (global as any)._mongoClientPromise;\r\n} else {\r\n  // In production mode, it's best to not use a global variable.\r\n  client = new MongoClient(uri);\r\n  clientPromise = client.connect();\r\n}\r\n\r\nexport default clientPromise;\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,MAAM,QAAQ,GAAG,CAAC,WAAW;AACnC,IAAI;AACJ,IAAI;AAEJ,IAAI,CAAC,QAAQ,GAAG,CAAC,WAAW,EAAE;IAC5B,MAAM,IAAI,MAAM;AAClB;AAEA,wCAA4C;IAC1C,+DAA+D;IAC/D,6EAA6E;IAC7E,IAAI,CAAC,yDAAgB,mBAAmB,EAAE;QACxC,SAAS,IAAI,oKAAW,CAAC;QACzB,yDAAgB,mBAAmB,GAAG,OAAO,OAAO;IACtD;IACA,gBAAgB,yDAAgB,mBAAmB;AACrD;;uCAMe"}},
    {"offset": {"line": 43, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/elise/Documents/novalife-app/pages/api/characters/index.ts"],"sourcesContent":["import { NextApiRequest, NextApiResponse } from 'next';\r\nimport clientPromise from '../../../lib/mongodb';\r\n\r\nconsole.log('API /api/characters appel√©e - test redeploiement');\r\n\r\nexport default async function handler(req: NextApiRequest, res: NextApiResponse) {\r\n  if (req.method === 'GET') {\r\n    try {\r\n      const client = await clientPromise;\r\n      const db = client.db('Novalife');\r\n      const characters = await db.collection('characters').find({}).toArray();\r\n      return res.status(200).json(characters);\r\n    } catch (err) {\r\n      return res.status(500).json({ error: 'Erreur serveur', details: err });\r\n    }\r\n  } else if (req.method === 'POST') {\r\n    try {\r\n      const client = await clientPromise;\r\n      const db = client.db('Novalife');\r\n      const data = typeof req.body === 'string' ? JSON.parse(req.body) : req.body;\r\n      const now = new Date().toISOString();\r\n      const result = await db.collection('characters').insertOne({ ...data, created_at: now });\r\n      return res.status(201).json({ _id: result.insertedId, ...data, created_at: now });\r\n    } catch (err) {\r\n      return res.status(500).json({ error: 'Erreur serveur', details: err });\r\n    }\r\n  } else {\r\n    res.setHeader('Allow', ['GET', 'POST']);\r\n    return res.status(405).end('Method Not Allowed');\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AACA;;AAEA,QAAQ,GAAG,CAAC;AAEG,eAAe,QAAQ,GAAmB,EAAE,GAAoB;IAC7E,IAAI,IAAI,MAAM,KAAK,OAAO;QACxB,IAAI;YACF,MAAM,SAAS,MAAM,kHAAa;YAClC,MAAM,KAAK,OAAO,EAAE,CAAC;YACrB,MAAM,aAAa,MAAM,GAAG,UAAU,CAAC,cAAc,IAAI,CAAC,CAAC,GAAG,OAAO;YACrE,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;QAC9B,EAAE,OAAO,KAAK;YACZ,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;gBAAE,OAAO;gBAAkB,SAAS;YAAI;QACtE;IACF,OAAO,IAAI,IAAI,MAAM,KAAK,QAAQ;QAChC,IAAI;YACF,MAAM,SAAS,MAAM,kHAAa;YAClC,MAAM,KAAK,OAAO,EAAE,CAAC;YACrB,MAAM,OAAO,OAAO,IAAI,IAAI,KAAK,WAAW,KAAK,KAAK,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI;YAC3E,MAAM,MAAM,IAAI,OAAO,WAAW;YAClC,MAAM,SAAS,MAAM,GAAG,UAAU,CAAC,cAAc,SAAS,CAAC;gBAAE,GAAG,IAAI;gBAAE,YAAY;YAAI;YACtF,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;gBAAE,KAAK,OAAO,UAAU;gBAAE,GAAG,IAAI;gBAAE,YAAY;YAAI;QACjF,EAAE,OAAO,KAAK;YACZ,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;gBAAE,OAAO;gBAAkB,SAAS;YAAI;QACtE;IACF,OAAO;QACL,IAAI,SAAS,CAAC,SAAS;YAAC;YAAO;SAAO;QACtC,OAAO,IAAI,MAAM,CAAC,KAAK,GAAG,CAAC;IAC7B;AACF"}}]
}