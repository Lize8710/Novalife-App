{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/elise/Documents/novalife-app/api/base44Client.ts"],"sourcesContent":["// Base44 Client Configuration\r\n// This is the client for interacting with Base44 API\r\n\r\ninterface Base44Config {\r\n  apiUrl: string;\r\n  apiKey: string;\r\n}\r\n\r\n// Initialize Base44 client\r\nconst getConfig = (): Base44Config => {\r\n  return {\r\n    apiUrl: process.env.NEXT_PUBLIC_BASE44_URL || 'https://api.base44.com',\r\n    apiKey: process.env.NEXT_PUBLIC_BASE44_KEY || '',\r\n  };\r\n};\r\n\r\n// Character entity methods\r\nconst characterMethods = {\r\n  list: async (sortBy: string = '-created_date') => {\r\n    const config = getConfig();\r\n    // Placeholder implementation\r\n    return [];\r\n  },\r\n  \r\n  get: async (id: string) => {\r\n    const config = getConfig();\r\n    // Placeholder implementation\r\n    return null;\r\n  },\r\n  \r\n  create: async (data: any) => {\r\n    const config = getConfig();\r\n    // Placeholder implementation\r\n    return { id: Date.now().toString() };\r\n  },\r\n  \r\n  update: async (id: string, data: any) => {\r\n    const config = getConfig();\r\n    // Placeholder implementation\r\n    return { id, ...data };\r\n  },\r\n  \r\n  delete: async (id: string) => {\r\n    const config = getConfig();\r\n    // Placeholder implementation\r\n    return { success: true };\r\n  },\r\n};\r\n\r\n// Integration methods\r\nconst integrationMethods = {\r\n  Core: {\r\n    UploadFile: async (data: { file: File }) => {\r\n      // Placeholder for file upload\r\n      return {\r\n        file_url: URL.createObjectURL(data.file),\r\n      };\r\n    },\r\n  },\r\n};\r\n\r\n// Export base44 client\r\nexport const base44 = {\r\n  entities: {\r\n    Character: characterMethods,\r\n  },\r\n  integrations: integrationMethods,\r\n};\r\n"],"names":[],"mappings":"AAAA,8BAA8B;AAC9B,qDAAqD;;;;;AAOrD,2BAA2B;AAC3B,MAAM,YAAY;IAChB,OAAO;QACL,QAAQ,QAAQ,GAAG,CAAC,sBAAsB,IAAI;QAC9C,QAAQ,QAAQ,GAAG,CAAC,sBAAsB,IAAI;IAChD;AACF;AAEA,2BAA2B;AAC3B,MAAM,mBAAmB;IACvB,MAAM,OAAO,SAAiB,eAAe;QAC3C,MAAM,SAAS;QACf,6BAA6B;QAC7B,OAAO,EAAE;IACX;IAEA,KAAK,OAAO;QACV,MAAM,SAAS;QACf,6BAA6B;QAC7B,OAAO;IACT;IAEA,QAAQ,OAAO;QACb,MAAM,SAAS;QACf,6BAA6B;QAC7B,OAAO;YAAE,IAAI,KAAK,GAAG,GAAG,QAAQ;QAAG;IACrC;IAEA,QAAQ,OAAO,IAAY;QACzB,MAAM,SAAS;QACf,6BAA6B;QAC7B,OAAO;YAAE;YAAI,GAAG,IAAI;QAAC;IACvB;IAEA,QAAQ,OAAO;QACb,MAAM,SAAS;QACf,6BAA6B;QAC7B,OAAO;YAAE,SAAS;QAAK;IACzB;AACF;AAEA,sBAAsB;AACtB,MAAM,qBAAqB;IACzB,MAAM;QACJ,YAAY,OAAO;YACjB,8BAA8B;YAC9B,OAAO;gBACL,UAAU,IAAI,eAAe,CAAC,KAAK,IAAI;YACzC;QACF;IACF;AACF;AAGO,MAAM,SAAS;IACpB,UAAU;QACR,WAAW;IACb;IACA,cAAc;AAChB"}},
    {"offset": {"line": 79, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/elise/Documents/novalife-app/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\"\r\nimport { twMerge } from \"tailwind-merge\"\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs))\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,sKAAO,EAAC,IAAA,6IAAI,EAAC;AACtB"}},
    {"offset": {"line": 94, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/elise/Documents/novalife-app/components/ui/button.jsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { Slot } from \"@radix-ui/react-slot\"\r\nimport { cva } from \"class-variance-authority\";\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default:\r\n          \"bg-primary text-primary-foreground shadow hover:bg-primary/90\",\r\n        destructive:\r\n          \"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90\",\r\n        outline:\r\n          \"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground\",\r\n        secondary:\r\n          \"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80\",\r\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\r\n        link: \"text-primary underline-offset-4 hover:underline\",\r\n      },\r\n      size: {\r\n        default: \"h-9 px-4 py-2\",\r\n        sm: \"h-8 rounded-md px-3 text-xs\",\r\n        lg: \"h-10 rounded-md px-8\",\r\n        icon: \"h-9 w-9\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nconst Button = React.forwardRef(({ className, variant, size, asChild = false, ...props }, ref) => {\r\n  const Comp = asChild ? Slot : \"button\"\r\n  return (\r\n    (<Comp\r\n      className={cn(buttonVariants({ variant, size, className }))}\r\n      ref={ref}\r\n      {...props} />)\r\n  );\r\n})\r\nButton.displayName = \"Button\"\r\n\r\nexport { Button, buttonVariants }\r\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,iBAAiB,IAAA,uKAAG,EACxB,ySACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,aACE;YACF,SACE;YACF,WACE;YACF,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,MAAM,uBAAS,mNAAgB,CAAC,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxF,MAAM,OAAO,UAAU,wKAAI,GAAG;IAC9B,qBACG,8OAAC;QACA,WAAW,IAAA,kHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAEf;AACA,OAAO,WAAW,GAAG"}},
    {"offset": {"line": 154, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/elise/Documents/novalife-app/components/ui/input.jsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Input = React.forwardRef(({ className, type, ...props }, ref) => {\r\n  return (\r\n    (<input\r\n      type={type}\r\n      className={cn(\r\n        \"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\r\n        className\r\n      )}\r\n      ref={ref}\r\n      {...props} />)\r\n  );\r\n})\r\nInput.displayName = \"Input\"\r\n\r\nexport { Input }\r\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,mNAAgB,CAAC,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IAC7D,qBACG,8OAAC;QACA,MAAM;QACN,WAAW,IAAA,kHAAE,EACX,2WACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAEf;AACA,MAAM,WAAW,GAAG"}},
    {"offset": {"line": 182, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/elise/Documents/novalife-app/components/ui/dialog.jsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\r\nimport { X } from \"lucide-react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Dialog = DialogPrimitive.Root\r\n\r\nconst DialogTrigger = DialogPrimitive.Trigger\r\n\r\nconst DialogPortal = DialogPrimitive.Portal\r\n\r\nconst DialogClose = DialogPrimitive.Close\r\n\r\nconst DialogOverlay = React.forwardRef(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Overlay\r\n    ref={ref}\r\n    className={cn(\r\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\r\n      className\r\n    )}\r\n    {...props} />\r\n))\r\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\r\n\r\nconst DialogContent = React.forwardRef(({ className, children, ...props }, ref) => (\r\n  <DialogPortal>\r\n    <DialogOverlay />\r\n    <DialogPrimitive.Content\r\n      ref={ref}\r\n      className={cn(\r\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\r\n        className\r\n      )}\r\n      {...props}>\r\n      {children}\r\n      <DialogPrimitive.Close\r\n        className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\r\n        <X className=\"h-4 w-4\" />\r\n        <span className=\"sr-only\">Close</span>\r\n      </DialogPrimitive.Close>\r\n    </DialogPrimitive.Content>\r\n  </DialogPortal>\r\n))\r\nDialogContent.displayName = DialogPrimitive.Content.displayName\r\n\r\nconst DialogHeader = ({\r\n  className,\r\n  ...props\r\n}) => (\r\n  <div\r\n    className={cn(\"flex flex-col space-y-1.5 text-center sm:text-left\", className)}\r\n    {...props} />\r\n)\r\nDialogHeader.displayName = \"DialogHeader\"\r\n\r\nconst DialogFooter = ({\r\n  className,\r\n  ...props\r\n}) => (\r\n  <div\r\n    className={cn(\"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\", className)}\r\n    {...props} />\r\n)\r\nDialogFooter.displayName = \"DialogFooter\"\r\n\r\nconst DialogTitle = React.forwardRef(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Title\r\n    ref={ref}\r\n    className={cn(\"text-lg font-semibold leading-none tracking-tight\", className)}\r\n    {...props} />\r\n))\r\nDialogTitle.displayName = DialogPrimitive.Title.displayName\r\n\r\nconst DialogDescription = React.forwardRef(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Description\r\n    ref={ref}\r\n    className={cn(\"text-sm text-muted-foreground\", className)}\r\n    {...props} />\r\n))\r\nDialogDescription.displayName = DialogPrimitive.Description.displayName\r\n\r\nexport {\r\n  Dialog,\r\n  DialogPortal,\r\n  DialogOverlay,\r\n  DialogTrigger,\r\n  DialogClose,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogFooter,\r\n  DialogTitle,\r\n  DialogDescription,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,SAAS,0KAAoB;AAEnC,MAAM,gBAAgB,6KAAuB;AAE7C,MAAM,eAAe,4KAAsB;AAE3C,MAAM,cAAc,2KAAqB;AAEzC,MAAM,8BAAgB,mNAAgB,CAAC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC/D,8OAAC,6KAAuB;QACtB,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,2JACA;QAED,GAAG,KAAK;;;;;;AAEb,cAAc,WAAW,GAAG,6KAAuB,CAAC,WAAW;AAE/D,MAAM,8BAAgB,mNAAgB,CAAC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACzE,8OAAC;;0BACC,8OAAC;;;;;0BACD,8OAAC,6KAAuB;gBACtB,KAAK;gBACL,WAAW,IAAA,kHAAE,EACX,+fACA;gBAED,GAAG,KAAK;;oBACR;kCACD,8OAAC,2KAAqB;wBACpB,WAAU;;0CACV,8OAAC,iMAAC;gCAAC,WAAU;;;;;;0CACb,8OAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;AAKlC,cAAc,WAAW,GAAG,6KAAuB,CAAC,WAAW;AAE/D,MAAM,eAAe,CAAC,EACpB,SAAS,EACT,GAAG,OACJ,iBACC,8OAAC;QACC,WAAW,IAAA,kHAAE,EAAC,sDAAsD;QACnE,GAAG,KAAK;;;;;;AAEb,aAAa,WAAW,GAAG;AAE3B,MAAM,eAAe,CAAC,EACpB,SAAS,EACT,GAAG,OACJ,iBACC,8OAAC;QACC,WAAW,IAAA,kHAAE,EAAC,iEAAiE;QAC9E,GAAG,KAAK;;;;;;AAEb,aAAa,WAAW,GAAG;AAE3B,MAAM,4BAAc,mNAAgB,CAAC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC7D,8OAAC,2KAAqB;QACpB,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,qDAAqD;QAClE,GAAG,KAAK;;;;;;AAEb,YAAY,WAAW,GAAG,2KAAqB,CAAC,WAAW;AAE3D,MAAM,kCAAoB,mNAAgB,CAAC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACnE,8OAAC,iLAA2B;QAC1B,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAEb,kBAAkB,WAAW,GAAG,iLAA2B,CAAC,WAAW"}},
    {"offset": {"line": 322, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/elise/Documents/novalife-app/components/ui/alert-dialog.jsx"],"sourcesContent":["import * as React from \"react\"\r\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\nimport { buttonVariants } from \"@/components/ui/button\"\r\n\r\nconst AlertDialog = AlertDialogPrimitive.Root\r\n\r\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\r\n\r\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\r\n\r\nconst AlertDialogOverlay = React.forwardRef(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Overlay\r\n    className={cn(\r\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n    ref={ref} />\r\n))\r\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\r\n\r\nconst AlertDialogContent = React.forwardRef(({ className, ...props }, ref) => (\r\n  <AlertDialogPortal>\r\n    <AlertDialogOverlay />\r\n    <AlertDialogPrimitive.Content\r\n      ref={ref}\r\n      className={cn(\r\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\r\n        className\r\n      )}\r\n      {...props} />\r\n  </AlertDialogPortal>\r\n))\r\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\r\n\r\nconst AlertDialogHeader = ({\r\n  className,\r\n  ...props\r\n}) => (\r\n  <div\r\n    className={cn(\"flex flex-col space-y-2 text-center sm:text-left\", className)}\r\n    {...props} />\r\n)\r\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\r\n\r\nconst AlertDialogFooter = ({\r\n  className,\r\n  ...props\r\n}) => (\r\n  <div\r\n    className={cn(\"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\", className)}\r\n    {...props} />\r\n)\r\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\r\n\r\nconst AlertDialogTitle = React.forwardRef(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Title ref={ref} className={cn(\"text-lg font-semibold\", className)} {...props} />\r\n))\r\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\r\n\r\nconst AlertDialogDescription = React.forwardRef(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Description\r\n    ref={ref}\r\n    className={cn(\"text-sm text-muted-foreground\", className)}\r\n    {...props} />\r\n))\r\nAlertDialogDescription.displayName =\r\n  AlertDialogPrimitive.Description.displayName\r\n\r\nconst AlertDialogAction = React.forwardRef(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Action ref={ref} className={cn(buttonVariants(), className)} {...props} />\r\n))\r\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\r\n\r\nconst AlertDialogCancel = React.forwardRef(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Cancel\r\n    ref={ref}\r\n    className={cn(buttonVariants({ variant: \"outline\" }), \"mt-2 sm:mt-0\", className)}\r\n    {...props} />\r\n))\r\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\r\n\r\nexport {\r\n  AlertDialog,\r\n  AlertDialogPortal,\r\n  AlertDialogOverlay,\r\n  AlertDialogTrigger,\r\n  AlertDialogContent,\r\n  AlertDialogHeader,\r\n  AlertDialogFooter,\r\n  AlertDialogTitle,\r\n  AlertDialogDescription,\r\n  AlertDialogAction,\r\n  AlertDialogCancel,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AAEA;AACA;;;;;;AAEA,MAAM,cAAc,mLAAyB;AAE7C,MAAM,qBAAqB,sLAA4B;AAEvD,MAAM,oBAAoB,qLAA2B;AAErD,MAAM,mCAAqB,mNAAgB,CAAC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACpE,8OAAC,sLAA4B;QAC3B,WAAW,IAAA,kHAAE,EACX,0JACA;QAED,GAAG,KAAK;QACT,KAAK;;;;;;AAET,mBAAmB,WAAW,GAAG,sLAA4B,CAAC,WAAW;AAEzE,MAAM,mCAAqB,mNAAgB,CAAC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACpE,8OAAC;;0BACC,8OAAC;;;;;0BACD,8OAAC,sLAA4B;gBAC3B,KAAK;gBACL,WAAW,IAAA,kHAAE,EACX,+fACA;gBAED,GAAG,KAAK;;;;;;;;;;;;AAGf,mBAAmB,WAAW,GAAG,sLAA4B,CAAC,WAAW;AAEzE,MAAM,oBAAoB,CAAC,EACzB,SAAS,EACT,GAAG,OACJ,iBACC,8OAAC;QACC,WAAW,IAAA,kHAAE,EAAC,oDAAoD;QACjE,GAAG,KAAK;;;;;;AAEb,kBAAkB,WAAW,GAAG;AAEhC,MAAM,oBAAoB,CAAC,EACzB,SAAS,EACT,GAAG,OACJ,iBACC,8OAAC;QACC,WAAW,IAAA,kHAAE,EAAC,iEAAiE;QAC9E,GAAG,KAAK;;;;;;AAEb,kBAAkB,WAAW,GAAG;AAEhC,MAAM,iCAAmB,mNAAgB,CAAC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAClE,8OAAC,oLAA0B;QAAC,KAAK;QAAK,WAAW,IAAA,kHAAE,EAAC,yBAAyB;QAAa,GAAG,KAAK;;;;;;AAEpG,iBAAiB,WAAW,GAAG,oLAA0B,CAAC,WAAW;AAErE,MAAM,uCAAyB,mNAAgB,CAAC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxE,8OAAC,0LAAgC;QAC/B,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAEb,uBAAuB,WAAW,GAChC,0LAAgC,CAAC,WAAW;AAE9C,MAAM,kCAAoB,mNAAgB,CAAC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACnE,8OAAC,qLAA2B;QAAC,KAAK;QAAK,WAAW,IAAA,kHAAE,EAAC,IAAA,6IAAc,KAAI;QAAa,GAAG,KAAK;;;;;;AAE9F,kBAAkB,WAAW,GAAG,qLAA2B,CAAC,WAAW;AAEvE,MAAM,kCAAoB,mNAAgB,CAAC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACnE,8OAAC,qLAA2B;QAC1B,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,IAAA,6IAAc,EAAC;YAAE,SAAS;QAAU,IAAI,gBAAgB;QACrE,GAAG,KAAK;;;;;;AAEb,kBAAkB,WAAW,GAAG,qLAA2B,CAAC,WAAW"}},
    {"offset": {"line": 457, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/elise/Documents/novalife-app/components/ui/card.jsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Card = React.forwardRef(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"rounded-xl border bg-card text-card-foreground shadow\", className)}\r\n    {...props} />\r\n))\r\nCard.displayName = \"Card\"\r\n\r\nconst CardHeader = React.forwardRef(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\r\n    {...props} />\r\n))\r\nCardHeader.displayName = \"CardHeader\"\r\n\r\nconst CardTitle = React.forwardRef(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"font-semibold leading-none tracking-tight\", className)}\r\n    {...props} />\r\n))\r\nCardTitle.displayName = \"CardTitle\"\r\n\r\nconst CardDescription = React.forwardRef(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"text-sm text-muted-foreground\", className)}\r\n    {...props} />\r\n))\r\nCardDescription.displayName = \"CardDescription\"\r\n\r\nconst CardContent = React.forwardRef(({ className, ...props }, ref) => (\r\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\r\n))\r\nCardContent.displayName = \"CardContent\"\r\n\r\nconst CardFooter = React.forwardRef(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"flex items-center p-6 pt-0\", className)}\r\n    {...props} />\r\n))\r\nCardFooter.displayName = \"CardFooter\"\r\n\r\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,mNAAgB,CAAC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACtD,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,yDAAyD;QACtE,GAAG,KAAK;;;;;;AAEb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,mNAAgB,CAAC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC5D,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAEb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,mNAAgB,CAAC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC3D,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,6CAA6C;QAC1D,GAAG,KAAK;;;;;;AAEb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,mNAAgB,CAAC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACjE,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAEb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,mNAAgB,CAAC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC7D,8OAAC;QAAI,KAAK;QAAK,WAAW,IAAA,kHAAE,EAAC,YAAY;QAAa,GAAG,KAAK;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,mNAAgB,CAAC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC5D,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAEb,WAAW,WAAW,GAAG"}},
    {"offset": {"line": 542, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/elise/Documents/novalife-app/components/ui/badge.jsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { cva } from \"class-variance-authority\";\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst badgeVariants = cva(\r\n  \"inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default:\r\n          \"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80\",\r\n        secondary:\r\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\r\n        destructive:\r\n          \"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80\",\r\n        outline: \"text-foreground\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nfunction Badge({\r\n  className,\r\n  variant,\r\n  ...props\r\n}) {\r\n  return (<div className={cn(badgeVariants({ variant }), className)} {...props} />);\r\n}\r\n\r\nexport { Badge, badgeVariants }\r\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AAEA;;;;;AAEA,MAAM,gBAAgB,IAAA,uKAAG,EACvB,wKACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SAAS;QACX;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,SAAS,MAAM,EACb,SAAS,EACT,OAAO,EACP,GAAG,OACJ;IACC,qBAAQ,8OAAC;QAAI,WAAW,IAAA,kHAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QAAa,GAAG,KAAK;;;;;;AAC9E"}},
    {"offset": {"line": 586, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/elise/Documents/novalife-app/components/Characters/CharactersCard.jsx"],"sourcesContent":["import React from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { Card } from \"@/components/ui/card\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { User, MapPin, Briefcase, Heart, Eye, Pencil, Trash2, Phone, Calendar, UserCheck, Paperclip } from 'lucide-react';\r\nimport { format } from 'date-fns';\r\nimport { fr } from 'date-fns/locale';\r\n\r\nconst bloodTypeColors = {\r\n  'A+': 'bg-rose-500/20 text-rose-400 border-rose-500/50 shadow-rose-500/50',\r\n  'A-': 'bg-rose-500/20 text-rose-300 border-rose-500/50 shadow-rose-500/50',\r\n  'B+': 'bg-cyan-500/20 text-cyan-400 border-cyan-500/50 shadow-cyan-500/50',\r\n  'B-': 'bg-cyan-500/20 text-cyan-300 border-cyan-500/50 shadow-cyan-500/50',\r\n  'AB+': 'bg-purple-500/20 text-purple-400 border-purple-500/50 shadow-purple-500/50',\r\n  'AB-': 'bg-purple-500/20 text-purple-300 border-purple-500/50 shadow-purple-500/50',\r\n  'O+': 'bg-amber-500/20 text-amber-400 border-amber-500/50 shadow-amber-500/50',\r\n  'O-': 'bg-amber-500/20 text-amber-300 border-amber-500/50 shadow-amber-500/50',\r\n};\r\n\r\nexport default function CharacterCard({ character, onView, onEdit, onDelete, trustedPersons = [], allCharacters = [] }) {\r\n  const initials = `${character.first_name?.[0] || ''}${character.last_name?.[0] || ''}`.toUpperCase();\r\n  \r\n  return (\r\n    <motion.div\r\n      initial={{ opacity: 0, y: 20 }}\r\n      animate={{ opacity: 1, y: 0 }}\r\n      exit={{ opacity: 0, y: -20 }}\r\n      whileHover={{ y: -4 }}\r\n      transition={{ duration: 0.2 }}\r\n    >\r\n      <Card className=\"group relative overflow-hidden bg-slate-900/40 backdrop-blur-sm border border-cyan-500/20 shadow-lg shadow-cyan-500/10 hover:shadow-2xl hover:shadow-cyan-500/30 transition-all duration-500\">\r\n        <div className=\"absolute inset-0 bg-gradient-to-br from-cyan-500/5 via-transparent to-purple-500/5\" />\r\n        <img \r\n          src=\"https://qtrypzzcjebvfcihiynt.supabase.co/storage/v1/object/public/base44-prod/public/6966dea0eae2ef138766d9ef/d73b7558b_Atelis.png\"\r\n          alt=\"\"\r\n          className=\"absolute right-2 bottom-2 w-20 h-auto opacity-5 group-hover:opacity-10 transition-opacity duration-300\"\r\n        />\r\n        <div className=\"absolute top-0 left-0 w-full h-[2px] bg-gradient-to-r from-cyan-500 via-purple-500 to-pink-500 opacity-0 group-hover:opacity-100 transition-opacity duration-300 shadow-lg shadow-cyan-500/50\" />\r\n        <div className=\"absolute -inset-1 bg-gradient-to-r from-cyan-500/20 via-purple-500/20 to-pink-500/20 rounded-xl blur-lg opacity-0 group-hover:opacity-100 transition-opacity duration-500\" />\r\n        \r\n        <div className=\"p-6 relative z-10\">\r\n          <div className=\"flex items-start gap-4\">\r\n            {character.avatar_url ? (\r\n              <img \r\n                src={character.avatar_url} \r\n                alt={`${character.first_name} ${character.last_name}`}\r\n                className=\"w-16 h-16 rounded-2xl object-cover ring-2 ring-cyan-500/50 shadow-lg shadow-cyan-500/50\"\r\n              />\r\n            ) : (\r\n              <div className=\"w-16 h-16 rounded-2xl bg-gradient-to-br from-cyan-500/20 to-purple-500/20 flex items-center justify-center ring-2 ring-cyan-500/50 shadow-lg shadow-cyan-500/50 backdrop-blur-sm\">\r\n                <span className=\"text-lg font-semibold text-cyan-400\">{initials}</span>\r\n              </div>\r\n            )}\r\n            \r\n            <div className=\"flex-1 min-w-0\">\r\n              <h3 className=\"text-lg font-semibold text-cyan-100 truncate group-hover:text-cyan-300 transition-colors\">\r\n                {character.first_name} {character.last_name}\r\n              </h3>\r\n              \r\n              <div className=\"flex items-center gap-2 mt-1 flex-wrap\">\r\n                {character.birth_date && (\r\n                  <span className=\"text-sm text-slate-400\">\r\n                    {format(new Date(character.birth_date), 'dd/MM/yyyy', { locale: fr })}\r\n                  </span>\r\n                )}\r\n                {character.nationality && (\r\n                  <>\r\n                    {character.birth_date && <span className=\"text-cyan-700\">•</span>}\r\n                    <span className=\"text-sm text-slate-400\">{character.nationality}</span>\r\n                  </>\r\n                )}\r\n                {character.social_score && (\r\n                  <>\r\n                    {(character.birth_date || character.nationality) && <span className=\"text-cyan-700\">•</span>}\r\n                    <span className=\"text-sm text-cyan-400\">Score: {character.social_score}</span>\r\n                  </>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            {character.blood_type && (\r\n              <Badge \r\n                variant=\"outline\" \r\n                className={`${bloodTypeColors[character.blood_type]} font-medium px-2.5 py-1 shadow-lg`}\r\n              >\r\n                {character.blood_type}\r\n              </Badge>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"mt-5 space-y-2.5\">\r\n            {character.profession && (\r\n              <div className=\"flex items-center gap-3 text-sm\">\r\n                <div className=\"w-8 h-8 rounded-lg bg-cyan-500/10 flex items-center justify-center border border-cyan-500/20\">\r\n                  <Briefcase className=\"w-4 h-4 text-cyan-400\" />\r\n                </div>\r\n                <span className=\"text-slate-300\">{character.profession}</span>\r\n              </div>\r\n            )}\r\n\r\n            {character.phone && (\r\n              <div className=\"flex items-center gap-3 text-sm\">\r\n                <div className=\"w-8 h-8 rounded-lg bg-cyan-500/10 flex items-center justify-center border border-cyan-500/20\">\r\n                  <Phone className=\"w-4 h-4 text-cyan-400\" />\r\n                </div>\r\n                <span className=\"text-slate-300\">{character.phone}</span>\r\n              </div>\r\n            )}\r\n\r\n            {character.address && (\r\n              <div className=\"flex items-center gap-3 text-sm\">\r\n                <div className=\"w-8 h-8 rounded-lg bg-purple-500/10 flex items-center justify-center border border-purple-500/20\">\r\n                  <MapPin className=\"w-4 h-4 text-purple-400\" />\r\n                </div>\r\n                <span className=\"text-slate-300 truncate\">{character.address}</span>\r\n              </div>\r\n            )}\r\n            \r\n            {character.doctor && (\r\n              <div className=\"flex items-center gap-3 text-sm\">\r\n                <div className=\"w-8 h-8 rounded-lg bg-pink-500/10 flex items-center justify-center border border-pink-500/20\">\r\n                  <Heart className=\"w-4 h-4 text-pink-400\" />\r\n                </div>\r\n                <span className=\"text-slate-300\">Dr. {character.doctor}</span>\r\n              </div>\r\n            )}\r\n\r\n            {trustedPersons.length > 0 && (\r\n              <div className=\"space-y-1.5\">\r\n                <div className=\"flex items-center gap-2 text-xs text-indigo-400 font-medium\">\r\n                  <UserCheck className=\"w-3.5 h-3.5\" />\r\n                  Personne{trustedPersons.length > 1 ? 's' : ''} de confiance\r\n                </div>\r\n                {trustedPersons.map((person, index) => {\r\n                  let displayName = '';\r\n                  if (person.patient_id) {\r\n                    const patient = allCharacters.find(c => c.id === person.patient_id);\r\n                    if (patient) {\r\n                      displayName = `${patient.first_name} ${patient.last_name}`;\r\n                    }\r\n                  } else {\r\n                    displayName = person.name;\r\n                  }\r\n\r\n                  return displayName ? (\r\n                    <div key={index} className=\"flex items-center gap-2 text-sm ml-5\">\r\n                      <div className=\"w-1.5 h-1.5 rounded-full bg-indigo-400/50\" />\r\n                      <span className=\"text-slate-300\">{displayName}</span>\r\n                    </div>\r\n                  ) : null;\r\n                })}\r\n              </div>\r\n            )}\r\n\r\n            {character.attachments && character.attachments.length > 0 && (\r\n              <div className=\"flex items-center gap-3 text-sm\">\r\n                <div className=\"w-8 h-8 rounded-lg bg-amber-500/10 flex items-center justify-center border border-amber-500/20\">\r\n                  <Paperclip className=\"w-4 h-4 text-amber-400\" />\r\n                </div>\r\n                <span className=\"text-slate-300\">{character.attachments.length} document{character.attachments.length > 1 ? 's' : ''}</span>\r\n              </div>\r\n            )}\r\n            </div>\r\n\r\n          <div className=\"flex items-center gap-2 mt-5 pt-5 border-t border-cyan-500/20\">\r\n            <Button \r\n              variant=\"ghost\" \r\n              size=\"sm\" \r\n              className=\"flex-1 text-cyan-400 hover:text-cyan-300 hover:bg-cyan-500/10 border border-transparent hover:border-cyan-500/30\"\r\n              onClick={() => onView(character)}\r\n            >\r\n              <Eye className=\"w-4 h-4 mr-2\" />\r\n              Voir\r\n            </Button>\r\n            <Button \r\n              variant=\"ghost\" \r\n              size=\"sm\" \r\n              className=\"flex-1 text-purple-400 hover:text-purple-300 hover:bg-purple-500/10 border border-transparent hover:border-purple-500/30\"\r\n              onClick={() => onEdit(character)}\r\n            >\r\n              <Pencil className=\"w-4 h-4 mr-2\" />\r\n              Modifier\r\n            </Button>\r\n            <Button \r\n              variant=\"ghost\" \r\n              size=\"sm\" \r\n              className=\"text-pink-400 hover:text-pink-300 hover:bg-pink-500/10 border border-transparent hover:border-pink-500/30\"\r\n              onClick={() => onDelete(character)}\r\n            >\r\n              <Trash2 className=\"w-4 h-4\" />\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </Card>\r\n    </motion.div>\r\n  );\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1129, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/elise/Documents/novalife-app/components/ui/label.jsx"],"sourcesContent":["import * as React from \"react\"\r\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\r\nimport { cva } from \"class-variance-authority\";\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst labelVariants = cva(\r\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\r\n)\r\n\r\nconst Label = React.forwardRef(({ className, ...props }, ref) => (\r\n  <LabelPrimitive.Root ref={ref} className={cn(labelVariants(), className)} {...props} />\r\n))\r\nLabel.displayName = LabelPrimitive.Root.displayName\r\n\r\nexport { Label }\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,gBAAgB,IAAA,uKAAG,EACvB;AAGF,MAAM,sBAAQ,mNAAgB,CAAC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACvD,8OAAC,yKAAmB;QAAC,KAAK;QAAK,WAAW,IAAA,kHAAE,EAAC,iBAAiB;QAAa,GAAG,KAAK;;;;;;AAErF,MAAM,WAAW,GAAG,yKAAmB,CAAC,WAAW"}},
    {"offset": {"line": 1159, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/elise/Documents/novalife-app/components/ui/textarea.jsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Textarea = React.forwardRef(({ className, ...props }, ref) => {\r\n  return (\r\n    (<textarea\r\n      className={cn(\r\n        \"flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\r\n        className\r\n      )}\r\n      ref={ref}\r\n      {...props} />)\r\n  );\r\n})\r\nTextarea.displayName = \"Textarea\"\r\n\r\nexport { Textarea }\r\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAEA,MAAM,yBAAW,mNAAgB,CAAC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IAC1D,qBACG,8OAAC;QACA,WAAW,IAAA,kHAAE,EACX,6QACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAEf;AACA,SAAS,WAAW,GAAG"}},
    {"offset": {"line": 1186, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/elise/Documents/novalife-app/components/ui/select.jsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\r\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Select = SelectPrimitive.Root\r\n\r\nconst SelectGroup = SelectPrimitive.Group\r\n\r\nconst SelectValue = SelectPrimitive.Value\r\n\r\nconst SelectTrigger = React.forwardRef(({ className, children, ...props }, ref) => (\r\n  <SelectPrimitive.Trigger\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\r\n      className\r\n    )}\r\n    {...props}>\r\n    {children}\r\n    <SelectPrimitive.Icon asChild>\r\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\r\n    </SelectPrimitive.Icon>\r\n  </SelectPrimitive.Trigger>\r\n))\r\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\r\n\r\nconst SelectScrollUpButton = React.forwardRef(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.ScrollUpButton\r\n    ref={ref}\r\n    className={cn(\"flex cursor-default items-center justify-center py-1\", className)}\r\n    {...props}>\r\n    <ChevronUp className=\"h-4 w-4\" />\r\n  </SelectPrimitive.ScrollUpButton>\r\n))\r\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\r\n\r\nconst SelectScrollDownButton = React.forwardRef(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.ScrollDownButton\r\n    ref={ref}\r\n    className={cn(\"flex cursor-default items-center justify-center py-1\", className)}\r\n    {...props}>\r\n    <ChevronDown className=\"h-4 w-4\" />\r\n  </SelectPrimitive.ScrollDownButton>\r\n))\r\nSelectScrollDownButton.displayName =\r\n  SelectPrimitive.ScrollDownButton.displayName\r\n\r\nconst SelectContent = React.forwardRef(({ className, children, position = \"popper\", ...props }, ref) => (\r\n  <SelectPrimitive.Portal>\r\n    <SelectPrimitive.Content\r\n      ref={ref}\r\n      className={cn(\r\n        \"relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\r\n        position === \"popper\" &&\r\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\r\n        className\r\n      )}\r\n      position={position}\r\n      {...props}>\r\n      <SelectScrollUpButton />\r\n      <SelectPrimitive.Viewport\r\n        className={cn(\"p-1\", position === \"popper\" &&\r\n          \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\")}>\r\n        {children}\r\n      </SelectPrimitive.Viewport>\r\n      <SelectScrollDownButton />\r\n    </SelectPrimitive.Content>\r\n  </SelectPrimitive.Portal>\r\n))\r\nSelectContent.displayName = SelectPrimitive.Content.displayName\r\n\r\nconst SelectLabel = React.forwardRef(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.Label\r\n    ref={ref}\r\n    className={cn(\"px-2 py-1.5 text-sm font-semibold\", className)}\r\n    {...props} />\r\n))\r\nSelectLabel.displayName = SelectPrimitive.Label.displayName\r\n\r\nconst SelectItem = React.forwardRef(({ className, children, ...props }, ref) => (\r\n  <SelectPrimitive.Item\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\r\n      className\r\n    )}\r\n    {...props}>\r\n    <span className=\"absolute right-2 flex h-3.5 w-3.5 items-center justify-center\">\r\n      <SelectPrimitive.ItemIndicator>\r\n        <Check className=\"h-4 w-4\" />\r\n      </SelectPrimitive.ItemIndicator>\r\n    </span>\r\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\r\n  </SelectPrimitive.Item>\r\n))\r\nSelectItem.displayName = SelectPrimitive.Item.displayName\r\n\r\nconst SelectSeparator = React.forwardRef(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.Separator\r\n    ref={ref}\r\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\r\n    {...props} />\r\n))\r\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\r\n\r\nexport {\r\n  Select,\r\n  SelectGroup,\r\n  SelectValue,\r\n  SelectTrigger,\r\n  SelectContent,\r\n  SelectLabel,\r\n  SelectItem,\r\n  SelectSeparator,\r\n  SelectScrollUpButton,\r\n  SelectScrollDownButton,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AAAA;AAAA;AAEA;AANA;;;;;;AAQA,MAAM,SAAS,0KAAoB;AAEnC,MAAM,cAAc,2KAAqB;AAEzC,MAAM,cAAc,2KAAqB;AAEzC,MAAM,8BAAgB,mNAAgB,CAAC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACzE,8OAAC,6KAAuB;QACtB,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,kUACA;QAED,GAAG,KAAK;;YACR;0BACD,8OAAC,0KAAoB;gBAAC,OAAO;0BAC3B,cAAA,8OAAC,mOAAW;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAI7B,cAAc,WAAW,GAAG,6KAAuB,CAAC,WAAW;AAE/D,MAAM,qCAAuB,mNAAgB,CAAC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACtE,8OAAC,oLAA8B;QAC7B,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,wDAAwD;QACrE,GAAG,KAAK;kBACT,cAAA,8OAAC,6NAAS;YAAC,WAAU;;;;;;;;;;;AAGzB,qBAAqB,WAAW,GAAG,oLAA8B,CAAC,WAAW;AAE7E,MAAM,uCAAyB,mNAAgB,CAAC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxE,8OAAC,sLAAgC;QAC/B,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,wDAAwD;QACrE,GAAG,KAAK;kBACT,cAAA,8OAAC,mOAAW;YAAC,WAAU;;;;;;;;;;;AAG3B,uBAAuB,WAAW,GAChC,sLAAgC,CAAC,WAAW;AAE9C,MAAM,8BAAgB,mNAAgB,CAAC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,WAAW,QAAQ,EAAE,GAAG,OAAO,EAAE,oBAC9F,8OAAC,4KAAsB;kBACrB,cAAA,8OAAC,6KAAuB;YACtB,KAAK;YACL,WAAW,IAAA,kHAAE,EACX,ucACA,aAAa,YACX,mIACF;YAEF,UAAU;YACT,GAAG,KAAK;;8BACT,8OAAC;;;;;8BACD,8OAAC,8KAAwB;oBACvB,WAAW,IAAA,kHAAE,EAAC,OAAO,aAAa,YAChC;8BACD;;;;;;8BAEH,8OAAC;;;;;;;;;;;;;;;;AAIP,cAAc,WAAW,GAAG,6KAAuB,CAAC,WAAW;AAE/D,MAAM,4BAAc,mNAAgB,CAAC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC7D,8OAAC,2KAAqB;QACpB,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,qCAAqC;QAClD,GAAG,KAAK;;;;;;AAEb,YAAY,WAAW,GAAG,2KAAqB,CAAC,WAAW;AAE3D,MAAM,2BAAa,mNAAgB,CAAC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACtE,8OAAC,0KAAoB;QACnB,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,6NACA;QAED,GAAG,KAAK;;0BACT,8OAAC;gBAAK,WAAU;0BACd,cAAA,8OAAC,mLAA6B;8BAC5B,cAAA,8OAAC,6MAAK;wBAAC,WAAU;;;;;;;;;;;;;;;;0BAGrB,8OAAC,8KAAwB;0BAAE;;;;;;;;;;;;AAG/B,WAAW,WAAW,GAAG,0KAAoB,CAAC,WAAW;AAEzD,MAAM,gCAAkB,mNAAgB,CAAC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACjE,8OAAC,+KAAyB;QACxB,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,4BAA4B;QACzC,GAAG,KAAK;;;;;;AAEb,gBAAgB,WAAW,GAAG,+KAAyB,CAAC,WAAW"}},
    {"offset": {"line": 1386, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/elise/Documents/novalife-app/components/Characters/AttachmentsManager.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { base44 } from '@/api/base44Client';\r\nimport { FileText, Image as ImageIcon, Link as LinkIcon, Upload, X, Loader2, ExternalLink } from 'lucide-react';\r\n\r\nexport default function AttachmentsManager({ attachments = [], onChange }) {\r\n  const [isAdding, setIsAdding] = useState(false);\r\n  const [addType, setAddType] = useState('document');\r\n  const [linkName, setLinkName] = useState('');\r\n  const [linkUrl, setLinkUrl] = useState('');\r\n  const [uploading, setUploading] = useState(false);\r\n\r\n  const handleFileUpload = async (e, type) => {\r\n    const file = e.target.files?.[0];\r\n    if (!file) return;\r\n\r\n    setUploading(true);\r\n    try {\r\n      const { file_url } = await base44.integrations.Core.UploadFile({ file });\r\n      \r\n      const newAttachment = {\r\n        type,\r\n        name: file.name,\r\n        url: file_url,\r\n        added_date: new Date().toISOString()\r\n      };\r\n\r\n      onChange([...attachments, newAttachment]);\r\n      setIsAdding(false);\r\n    } catch (error) {\r\n      console.error('Upload error:', error);\r\n    } finally {\r\n      setUploading(false);\r\n    }\r\n  };\r\n\r\n  const handleAddLink = () => {\r\n    if (!linkName || !linkUrl) return;\r\n\r\n    const newAttachment = {\r\n      type: 'link',\r\n      name: linkName,\r\n      url: linkUrl,\r\n      added_date: new Date().toISOString()\r\n    };\r\n\r\n    onChange([...attachments, newAttachment]);\r\n    setLinkName('');\r\n    setLinkUrl('');\r\n    setIsAdding(false);\r\n  };\r\n\r\n  const handleRemove = (index) => {\r\n    onChange(attachments.filter((_, i) => i !== index));\r\n  };\r\n\r\n  const getIcon = (type) => {\r\n    switch (type) {\r\n      case 'image': return <ImageIcon className=\"w-4 h-4\" />;\r\n      case 'link': return <LinkIcon className=\"w-4 h-4\" />;\r\n      default: return <FileText className=\"w-4 h-4\" />;\r\n    }\r\n  };\r\n\r\n  const getColor = (type) => {\r\n    switch (type) {\r\n      case 'image': return 'bg-purple-500/10 border-purple-500/30 text-purple-400';\r\n      case 'link': return 'bg-blue-500/10 border-blue-500/30 text-blue-400';\r\n      default: return 'bg-cyan-500/10 border-cyan-500/30 text-cyan-400';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-3\">\r\n      {/* Liste des pièces jointes */}\r\n      {attachments.length > 0 && (\r\n        <div className=\"space-y-2\">\r\n          {attachments.map((attachment, index) => (\r\n            <div\r\n              key={index}\r\n              className={`flex items-center gap-3 p-3 rounded-lg border ${getColor(attachment.type)}`}\r\n            >\r\n              <div className=\"flex-shrink-0\">\r\n                {getIcon(attachment.type)}\r\n              </div>\r\n              <div className=\"flex-1 min-w-0\">\r\n                <p className=\"text-sm font-medium text-slate-200 truncate\">{attachment.name}</p>\r\n              </div>\r\n              <a\r\n                href={attachment.url}\r\n                target=\"_blank\"\r\n                rel=\"noopener noreferrer\"\r\n                className=\"flex-shrink-0 text-slate-400 hover:text-slate-200\"\r\n              >\r\n                <ExternalLink className=\"w-4 h-4\" />\r\n              </a>\r\n              <button\r\n                onClick={() => handleRemove(index)}\r\n                className=\"flex-shrink-0 text-slate-400 hover:text-red-400\"\r\n              >\r\n                <X className=\"w-4 h-4\" />\r\n              </button>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      {/* Formulaire d'ajout */}\r\n      {isAdding ? (\r\n        <div className=\"p-4 bg-slate-800/50 rounded-lg border border-cyan-500/30 space-y-3\">\r\n          <div className=\"flex gap-2\">\r\n            <Button\r\n              type=\"button\"\r\n              size=\"sm\"\r\n              variant={addType === 'document' ? 'default' : 'outline'}\r\n              onClick={() => setAddType('document')}\r\n              className=\"flex-1\"\r\n            >\r\n              <FileText className=\"w-4 h-4 mr-2\" />\r\n              Document\r\n            </Button>\r\n            <Button\r\n              type=\"button\"\r\n              size=\"sm\"\r\n              variant={addType === 'image' ? 'default' : 'outline'}\r\n              onClick={() => setAddType('image')}\r\n              className=\"flex-1\"\r\n            >\r\n              <ImageIcon className=\"w-4 h-4 mr-2\" />\r\n              Image\r\n            </Button>\r\n            <Button\r\n              type=\"button\"\r\n              size=\"sm\"\r\n              variant={addType === 'link' ? 'default' : 'outline'}\r\n              onClick={() => setAddType('link')}\r\n              className=\"flex-1\"\r\n            >\r\n              <LinkIcon className=\"w-4 h-4 mr-2\" />\r\n              Lien\r\n            </Button>\r\n          </div>\r\n\r\n          {addType === 'link' ? (\r\n            <div className=\"space-y-2\">\r\n              <div>\r\n                <Label htmlFor=\"link_name\" className=\"text-slate-300\">Nom du lien</Label>\r\n                <Input\r\n                  id=\"link_name\"\r\n                  value={linkName}\r\n                  onChange={(e) => setLinkName(e.target.value)}\r\n                  placeholder=\"Mon document\"\r\n                  className=\"bg-slate-800/50 border-cyan-500/30 text-cyan-100\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label htmlFor=\"link_url\" className=\"text-slate-300\">URL</Label>\r\n                <Input\r\n                  id=\"link_url\"\r\n                  value={linkUrl}\r\n                  onChange={(e) => setLinkUrl(e.target.value)}\r\n                  placeholder=\"https://...\"\r\n                  className=\"bg-slate-800/50 border-cyan-500/30 text-cyan-100\"\r\n                />\r\n              </div>\r\n              <div className=\"flex gap-2\">\r\n                <Button\r\n                  type=\"button\"\r\n                  size=\"sm\"\r\n                  onClick={handleAddLink}\r\n                  disabled={!linkName || !linkUrl}\r\n                  className=\"flex-1\"\r\n                >\r\n                  Ajouter\r\n                </Button>\r\n                <Button\r\n                  type=\"button\"\r\n                  size=\"sm\"\r\n                  variant=\"outline\"\r\n                  onClick={() => {\r\n                    setIsAdding(false);\r\n                    setLinkName('');\r\n                    setLinkUrl('');\r\n                  }}\r\n                  className=\"flex-1\"\r\n                >\r\n                  Annuler\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"space-y-2\">\r\n              <Label className=\"text-slate-300\">\r\n                {uploading ? 'Upload en cours...' : `Sélectionner ${addType === 'image' ? 'une image' : 'un document'}`}\r\n              </Label>\r\n              <div className=\"flex gap-2\">\r\n                <Input\r\n                  type=\"file\"\r\n                  accept={addType === 'image' ? 'image/*' : '*'}\r\n                  onChange={(e) => handleFileUpload(e, addType)}\r\n                  disabled={uploading}\r\n                  className=\"bg-slate-800/50 border-cyan-500/30 text-cyan-100\"\r\n                />\r\n                <Button\r\n                  type=\"button\"\r\n                  size=\"sm\"\r\n                  variant=\"outline\"\r\n                  onClick={() => setIsAdding(false)}\r\n                  disabled={uploading}\r\n                >\r\n                  Annuler\r\n                </Button>\r\n              </div>\r\n              {uploading && (\r\n                <div className=\"flex items-center gap-2 text-sm text-cyan-400\">\r\n                  <Loader2 className=\"w-4 h-4 animate-spin\" />\r\n                  Upload en cours...\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n      ) : (\r\n        <Button\r\n          type=\"button\"\r\n          variant=\"outline\"\r\n          onClick={() => setIsAdding(true)}\r\n          className=\"w-full border-cyan-500/30 text-cyan-400 hover:bg-cyan-500/10\"\r\n        >\r\n          <Upload className=\"w-4 h-4 mr-2\" />\r\n          Ajouter un fichier ou un lien\r\n        </Button>\r\n      )}\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1850, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/elise/Documents/novalife-app/components/Characters/TrustedPersonsManager.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { UserCheck, X, Plus } from 'lucide-react';\r\n\r\nexport default function TrustedPersonsManager({ trustedPersons = [], onChange, allCharacters = [], currentCharacterId }) {\r\n  const [isAdding, setIsAdding] = useState(false);\r\n  const [patientId, setPatientId] = useState('');\r\n  const [manualName, setManualName] = useState('');\r\n  const [manualPhone, setManualPhone] = useState('');\r\n\r\n  const handleAdd = () => {\r\n    if (patientId) {\r\n      onChange([...trustedPersons, { patient_id: patientId }]);\r\n    } else if (manualName) {\r\n      onChange([...trustedPersons, { name: manualName, phone: manualPhone }]);\r\n    }\r\n    resetForm();\r\n  };\r\n\r\n  const resetForm = () => {\r\n    setIsAdding(false);\r\n    setPatientId('');\r\n    setManualName('');\r\n    setManualPhone('');\r\n  };\r\n\r\n  const handleRemove = (index) => {\r\n    onChange(trustedPersons.filter((_, i) => i !== index));\r\n  };\r\n\r\n  const getPersonDisplay = (person) => {\r\n    if (person.patient_id) {\r\n      const patient = allCharacters.find(c => c.id === person.patient_id);\r\n      if (patient) {\r\n        return `${patient.first_name} ${patient.last_name}${patient.phone ? ` - ${patient.phone}` : ''}`;\r\n      }\r\n      return 'Patient non trouvé';\r\n    }\r\n    return `${person.name}${person.phone ? ` - ${person.phone}` : ''}`;\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-3\">\r\n      {trustedPersons.length > 0 && (\r\n        <div className=\"space-y-2\">\r\n          {trustedPersons.map((person, index) => (\r\n            <div\r\n              key={index}\r\n              className=\"flex items-center gap-3 p-3 rounded-lg bg-indigo-500/10 border border-indigo-500/30\"\r\n            >\r\n              <UserCheck className=\"w-4 h-4 text-indigo-400 flex-shrink-0\" />\r\n              <span className=\"flex-1 text-sm text-slate-300\">{getPersonDisplay(person)}</span>\r\n              <button\r\n                onClick={() => handleRemove(index)}\r\n                className=\"text-slate-400 hover:text-red-400 flex-shrink-0\"\r\n              >\r\n                <X className=\"w-4 h-4\" />\r\n              </button>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      {isAdding ? (\r\n        <div className=\"p-4 bg-slate-800/50 rounded-lg border border-indigo-500/30 space-y-3\">\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"trusted_patient_id\" className=\"text-slate-300\">Patient existant</Label>\r\n            <select \r\n              id=\"trusted_patient_id\"\r\n              value={patientId}\r\n              onChange={(e) => {\r\n                setPatientId(e.target.value);\r\n                if (e.target.value) {\r\n                  setManualName('');\r\n                  setManualPhone('');\r\n                }\r\n              }}\r\n              className=\"h-11 w-full rounded-md bg-slate-800/50 border border-indigo-500/30 text-cyan-100 px-3 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500/50\"\r\n            >\r\n              <option value=\"\">Aucun</option>\r\n              {allCharacters\r\n                .filter(c => c.id !== currentCharacterId)\r\n                .map(c => (\r\n                  <option key={c.id} value={c.id}>\r\n                    {c.first_name} {c.last_name} {c.phone ? `- ${c.phone}` : ''}\r\n                  </option>\r\n                ))}\r\n            </select>\r\n          </div>\r\n\r\n          <div className=\"relative py-2\">\r\n            <div className=\"absolute inset-0 flex items-center\">\r\n              <div className=\"w-full border-t border-indigo-500/20\"></div>\r\n            </div>\r\n            <div className=\"relative flex justify-center text-xs uppercase\">\r\n              <span className=\"bg-slate-800 px-2 text-slate-500\">ou saisie manuelle</span>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"manual_name\" className=\"text-slate-300\">Nom complet</Label>\r\n            <Input\r\n              id=\"manual_name\"\r\n              value={manualName}\r\n              onChange={(e) => {\r\n                setManualName(e.target.value);\r\n                if (e.target.value) setPatientId('');\r\n              }}\r\n              placeholder=\"Jean Dupont\"\r\n              disabled={!!patientId}\r\n              className=\"bg-slate-800/50 border-indigo-500/30 text-cyan-100 disabled:opacity-50\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"manual_phone\" className=\"text-slate-300\">Téléphone</Label>\r\n            <Input\r\n              id=\"manual_phone\"\r\n              type=\"tel\"\r\n              value={manualPhone}\r\n              onChange={(e) => setManualPhone(e.target.value)}\r\n              placeholder=\"+33 6 12 34 56 78\"\r\n              disabled={!!patientId}\r\n              className=\"bg-slate-800/50 border-indigo-500/30 text-cyan-100 disabled:opacity-50\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"flex gap-2\">\r\n            <Button\r\n              type=\"button\"\r\n              size=\"sm\"\r\n              onClick={handleAdd}\r\n              disabled={!patientId && !manualName}\r\n              className=\"flex-1\"\r\n            >\r\n              Ajouter\r\n            </Button>\r\n            <Button\r\n              type=\"button\"\r\n              size=\"sm\"\r\n              variant=\"outline\"\r\n              onClick={resetForm}\r\n              className=\"flex-1\"\r\n            >\r\n              Annuler\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <Button\r\n          type=\"button\"\r\n          variant=\"outline\"\r\n          onClick={() => setIsAdding(true)}\r\n          className=\"w-full border-indigo-500/30 text-indigo-400 hover:bg-indigo-500/10\"\r\n        >\r\n          <Plus className=\"w-4 h-4 mr-2\" />\r\n          Ajouter une personne de confiance\r\n        </Button>\r\n      )}\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2192, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/elise/Documents/novalife-app/components/Characters/CharacterForm.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { base44 } from '@/api/base44Client';\r\nimport { useQuery } from '@tanstack/react-query';\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { X, Save, User, MapPin, Briefcase, Heart, Droplets, UserCheck, Paperclip } from 'lucide-react';\r\nimport AttachmentsManager from './AttachmentsManager';\r\nimport TrustedPersonsManager from './TrustedPersonsManager';\r\n\r\nconst bloodTypes = ['A+', 'A-', 'B+', 'B-', 'AB+', 'AB-', 'O+', 'O-'];\r\n\r\nexport default function CharacterForm({ character, onSubmit, onCancel, isLoading }) {\r\n  const { data: allCharacters = [] } = useQuery({\r\n    queryKey: ['characters'],\r\n    queryFn: () => base44.entities.Character.list(),\r\n  });\r\n\r\n  const [formData, setFormData] = useState({\r\n    first_name: '',\r\n    last_name: '',\r\n    birth_date: '',\r\n    nationality: '',\r\n    phone: '',\r\n    social_score: '',\r\n    profession: '',\r\n    address: '',\r\n    blood_type: '',\r\n    doctor: '',\r\n    medical_history: '',\r\n    trusted_persons: [],\r\n    avatar_url: '',\r\n    attachments: []\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (character) {\r\n      // Migration des anciennes données vers le nouveau format\r\n      let trustedPersons = character.trusted_persons || [];\r\n\r\n      // Si l'ancien format existe, le migrer\r\n      if (!trustedPersons.length) {\r\n        if (character.trusted_person_id) {\r\n          trustedPersons = [{ patient_id: character.trusted_person_id }];\r\n        } else if (character.trusted_person_name) {\r\n          trustedPersons = [{\r\n            name: character.trusted_person_name,\r\n            phone: character.trusted_person_phone || ''\r\n          }];\r\n        }\r\n      }\r\n\r\n      setFormData({\r\n        first_name: character.first_name || '',\r\n        last_name: character.last_name || '',\r\n        birth_date: character.birth_date || '',\r\n        nationality: character.nationality || '',\r\n        phone: character.phone || '',\r\n        social_score: character.social_score || '',\r\n        profession: character.profession || '',\r\n        address: character.address || '',\r\n        blood_type: character.blood_type || '',\r\n        doctor: character.doctor || '',\r\n        medical_history: character.medical_history || '',\r\n        trusted_persons: trustedPersons,\r\n        avatar_url: character.avatar_url || '',\r\n        attachments: character.attachments || []\r\n      });\r\n    }\r\n  }, [character]);\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    onSubmit(formData);\r\n  };\r\n\r\n  const handleChange = (field, value) => {\r\n    setFormData(prev => ({ ...prev, [field]: value }));\r\n  };\r\n\r\n  return (\r\n    <motion.div\r\n      initial={{ opacity: 0, scale: 0.95 }}\r\n      animate={{ opacity: 1, scale: 1 }}\r\n      exit={{ opacity: 0, scale: 0.95 }}\r\n      className=\"bg-slate-900/95 backdrop-blur-xl rounded-2xl shadow-2xl shadow-cyan-500/20 border border-cyan-500/30 overflow-hidden\"\r\n    >\r\n      <div className=\"absolute inset-0 bg-gradient-to-br from-cyan-500/5 via-purple-500/5 to-pink-500/5 pointer-events-none\" />\r\n      <div className=\"px-6 py-5 border-b border-cyan-500/20 bg-gradient-to-r from-cyan-500/10 to-purple-500/10 relative\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <h2 className=\"text-xl font-semibold text-cyan-100\">\r\n            {character ? 'Modifier le patient' : 'Nouveau patient'}\r\n          </h2>\r\n          <Button variant=\"ghost\" size=\"icon\" onClick={onCancel} className=\"text-cyan-400 hover:text-cyan-300 hover:bg-cyan-500/20\">\r\n            <X className=\"w-5 h-5\" />\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      <form onSubmit={handleSubmit} className=\"p-6 space-y-6 relative\">\r\n        {/* Identité */}\r\n        <div className=\"space-y-4\">\r\n          <div className=\"flex items-center gap-2 text-sm font-medium text-cyan-400 uppercase tracking-wider\">\r\n            <User className=\"w-4 h-4\" />\r\n            Identité\r\n          </div>\r\n          \r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"first_name\" className=\"text-slate-300\">Prénom *</Label>\r\n              <Input\r\n                id=\"first_name\"\r\n                value={formData.first_name}\r\n                onChange={(e) => handleChange('first_name', e.target.value)}\r\n                placeholder=\"Jean\"\r\n                className=\"h-11 bg-slate-800/50 border-cyan-500/30 text-cyan-100 placeholder:text-slate-500 focus:border-cyan-500 focus:ring-cyan-500/50\"\r\n                required\r\n              />\r\n            </div>\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"last_name\" className=\"text-slate-300\">Nom *</Label>\r\n              <Input\r\n                id=\"last_name\"\r\n                value={formData.last_name}\r\n                onChange={(e) => handleChange('last_name', e.target.value)}\r\n                placeholder=\"Dupont\"\r\n                className=\"h-11 bg-slate-800/50 border-cyan-500/30 text-cyan-100 placeholder:text-slate-500 focus:border-cyan-500 focus:ring-cyan-500/50\"\r\n                required\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"birth_date\" className=\"text-slate-300\">Date de naissance</Label>\r\n              <Input\r\n                id=\"birth_date\"\r\n                type=\"date\"\r\n                value={formData.birth_date}\r\n                onChange={(e) => handleChange('birth_date', e.target.value)}\r\n                className=\"h-11 bg-slate-800/50 border-cyan-500/30 text-cyan-100 placeholder:text-slate-500 focus:border-cyan-500 focus:ring-cyan-500/50\"\r\n              />\r\n            </div>\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"nationality\" className=\"text-slate-300\">Nationalité</Label>\r\n              <Input\r\n                id=\"nationality\"\r\n                value={formData.nationality}\r\n                onChange={(e) => handleChange('nationality', e.target.value)}\r\n                placeholder=\"Française\"\r\n                className=\"h-11 bg-slate-800/50 border-cyan-500/30 text-cyan-100 placeholder:text-slate-500 focus:border-cyan-500 focus:ring-cyan-500/50\"\r\n              />\r\n            </div>\r\n            </div>\r\n\r\n            <div className=\"space-y-2\">\r\n            <Label htmlFor=\"phone\" className=\"text-slate-300\">Téléphone</Label>\r\n            <Input\r\n              id=\"phone\"\r\n              type=\"tel\"\r\n              value={formData.phone}\r\n              onChange={(e) => handleChange('phone', e.target.value)}\r\n              placeholder=\"+33 6 12 34 56 78\"\r\n              className=\"h-11 bg-slate-800/50 border-cyan-500/30 text-cyan-100 placeholder:text-slate-500 focus:border-cyan-500 focus:ring-cyan-500/50\"\r\n            />\r\n            </div>\r\n\r\n            <div className=\"space-y-2\">\r\n            <Label htmlFor=\"social_score\" className=\"text-slate-300\">Score social</Label>\r\n            <Input\r\n              id=\"social_score\"\r\n              value={formData.social_score}\r\n              onChange={(e) => handleChange('social_score', e.target.value)}\r\n              placeholder=\"Score social\"\r\n              className=\"h-11 bg-slate-800/50 border-cyan-500/30 text-cyan-100 placeholder:text-slate-500 focus:border-cyan-500 focus:ring-cyan-500/50\"\r\n            />\r\n            </div>\r\n\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"avatar_url\" className=\"text-slate-300\">URL de l'avatar</Label>\r\n            <Input\r\n              id=\"avatar_url\"\r\n              value={formData.avatar_url}\r\n              onChange={(e) => handleChange('avatar_url', e.target.value)}\r\n              placeholder=\"https://...\"\r\n              className=\"h-11 bg-slate-800/50 border-cyan-500/30 text-cyan-100 placeholder:text-slate-500 focus:border-cyan-500 focus:ring-cyan-500/50\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Profession & Adresse */}\r\n        <div className=\"space-y-4\">\r\n          <div className=\"flex items-center gap-2 text-sm font-medium text-purple-400 uppercase tracking-wider\">\r\n            <Briefcase className=\"w-4 h-4\" />\r\n            Profession & Localisation\r\n          </div>\r\n          \r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"profession\" className=\"text-slate-300\">Métier</Label>\r\n            <Input\r\n              id=\"profession\"\r\n              value={formData.profession}\r\n              onChange={(e) => handleChange('profession', e.target.value)}\r\n              placeholder=\"Médecin, Avocat, Ingénieur...\"\r\n              className=\"h-11 bg-slate-800/50 border-purple-500/30 text-cyan-100 placeholder:text-slate-500 focus:border-purple-500 focus:ring-purple-500/50\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"address\" className=\"text-slate-300\">Adresse</Label>\r\n            <Input\r\n              id=\"address\"\r\n              value={formData.address}\r\n              onChange={(e) => handleChange('address', e.target.value)}\r\n              placeholder=\"123 Rue de la Paix, Paris\"\r\n              className=\"h-11 bg-slate-800/50 border-purple-500/30 text-cyan-100 placeholder:text-slate-500 focus:border-purple-500 focus:ring-purple-500/50\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Personnes de confiance */}\r\n        <div className=\"space-y-4\">\r\n          <div className=\"flex items-center gap-2 text-sm font-medium text-indigo-400 uppercase tracking-wider\">\r\n            <UserCheck className=\"w-4 h-4\" />\r\n            Personnes de confiance\r\n          </div>\r\n\r\n          <TrustedPersonsManager\r\n            trustedPersons={formData.trusted_persons}\r\n            onChange={(persons) => handleChange('trusted_persons', persons)}\r\n            allCharacters={allCharacters}\r\n            currentCharacterId={character?.id}\r\n          />\r\n        </div>\r\n\r\n        {/* Informations médicales */}\r\n        <div className=\"space-y-4\">\r\n          <div className=\"flex items-center gap-2 text-sm font-medium text-pink-400 uppercase tracking-wider\">\r\n            <Heart className=\"w-4 h-4\" />\r\n            Informations médicales\r\n          </div>\r\n          \r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"blood_type\" className=\"text-slate-300\">Groupe sanguin</Label>\r\n              <select \r\n                id=\"blood_type\"\r\n                value={formData.blood_type || ''}\r\n                onChange={(e) => handleChange('blood_type', e.target.value)}\r\n                className=\"h-11 w-full rounded-md bg-slate-800/50 border border-pink-500/30 text-cyan-100 px-3 focus:outline-none focus:border-pink-500 focus:ring-1 focus:ring-pink-500/50\"\r\n              >\r\n                <option value=\"\">Sélectionner...</option>\r\n                {bloodTypes.map(type => (\r\n                  <option key={type} value={type}>{type}</option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"doctor\" className=\"text-slate-300\">Médecin traitant</Label>\r\n              <Input\r\n                id=\"doctor\"\r\n                value={formData.doctor}\r\n                onChange={(e) => handleChange('doctor', e.target.value)}\r\n                placeholder=\"Dr. Martin\"\r\n                className=\"h-11 bg-slate-800/50 border-pink-500/30 text-cyan-100 placeholder:text-slate-500 focus:border-pink-500 focus:ring-pink-500/50\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"medical_history\" className=\"text-slate-300\">Antécédents médicaux</Label>\r\n            <Textarea\r\n              id=\"medical_history\"\r\n              value={formData.medical_history}\r\n              onChange={(e) => handleChange('medical_history', e.target.value)}\r\n              placeholder=\"Allergies, maladies chroniques, opérations...\"\r\n              rows={3}\r\n              className=\"resize-none bg-slate-800/50 border-pink-500/30 text-cyan-100 placeholder:text-slate-500 focus:border-pink-500 focus:ring-pink-500/50\"\r\n            />\r\n          </div>\r\n          </div>\r\n\r\n          {/* Pièces jointes */}\r\n          <div className=\"space-y-4\">\r\n          <div className=\"flex items-center gap-2 text-sm font-medium text-amber-400 uppercase tracking-wider\">\r\n            <Paperclip className=\"w-4 h-4\" />\r\n            Documents et liens\r\n          </div>\r\n\r\n          <AttachmentsManager\r\n            attachments={formData.attachments}\r\n            onChange={(attachments) => handleChange('attachments', attachments)}\r\n          />\r\n          </div>\r\n\r\n          <div className=\"flex items-center gap-3 pt-4 border-t border-cyan-500/20\">\r\n          <Button \r\n            type=\"button\" \r\n            variant=\"outline\" \r\n            onClick={onCancel}\r\n            className=\"flex-1 h-11 border-cyan-500/30 text-cyan-400 hover:bg-cyan-500/10 hover:text-cyan-300\"\r\n          >\r\n            Annuler\r\n          </Button>\r\n          <Button \r\n            type=\"submit\" \r\n            disabled={isLoading}\r\n            className=\"flex-1 h-11 bg-gradient-to-r from-cyan-600 to-purple-600 hover:from-cyan-500 hover:to-purple-500 shadow-lg shadow-cyan-500/30 hover:shadow-cyan-500/50 transition-all\"\r\n          >\r\n            <Save className=\"w-4 h-4 mr-2\" />\r\n            {isLoading ? 'Enregistrement...' : (character ? 'Mettre à jour' : 'Créer')}\r\n          </Button>\r\n        </div>\r\n      </form>\r\n    </motion.div>\r\n  );\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2979, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/elise/Documents/novalife-app/components/Characters/CharacterDetails.jsx"],"sourcesContent":["import React from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { \r\n  X, User, MapPin, Briefcase, Heart, Droplets, \r\n  Calendar, Globe, Stethoscope, FileText, Phone, UserCheck, Paperclip, ExternalLink, Image as ImageIcon, Link as LinkIcon \r\n} from 'lucide-react';\r\nimport { format } from 'date-fns';\r\nimport { fr } from 'date-fns/locale';\r\n\r\nconst bloodTypeColors = {\r\n  'A+': 'bg-rose-500/20 text-rose-400 shadow-rose-500/50',\r\n  'A-': 'bg-rose-500/20 text-rose-300 shadow-rose-500/50',\r\n  'B+': 'bg-cyan-500/20 text-cyan-400 shadow-cyan-500/50',\r\n  'B-': 'bg-cyan-500/20 text-cyan-300 shadow-cyan-500/50',\r\n  'AB+': 'bg-purple-500/20 text-purple-400 shadow-purple-500/50',\r\n  'AB-': 'bg-purple-500/20 text-purple-300 shadow-purple-500/50',\r\n  'O+': 'bg-amber-500/20 text-amber-400 shadow-amber-500/50',\r\n  'O-': 'bg-amber-500/20 text-amber-300 shadow-amber-500/50',\r\n};\r\n\r\nexport default function CharacterDetails({ character, onClose, trustedPersons = [], allCharacters = [], onViewTrustedPerson }) {\r\n  const initials = `${character.first_name?.[0] || ''}${character.last_name?.[0] || ''}`.toUpperCase();\r\n\r\n  const InfoRow = ({ icon: Icon, label, value }) => {\r\n    if (!value) return null;\r\n    return (\r\n      <div className=\"flex items-start gap-4 py-3\">\r\n        <div className=\"w-10 h-10 rounded-xl bg-cyan-500/10 border border-cyan-500/30 flex items-center justify-center flex-shrink-0\">\r\n          <Icon className=\"w-5 h-5 text-cyan-400\" />\r\n        </div>\r\n        <div>\r\n          <p className=\"text-xs font-medium text-cyan-400/70 uppercase tracking-wider\">{label}</p>\r\n          <p className=\"text-slate-300 mt-0.5\">{value}</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <motion.div\r\n      initial={{ opacity: 0, scale: 0.95 }}\r\n      animate={{ opacity: 1, scale: 1 }}\r\n      exit={{ opacity: 0, scale: 0.95 }}\r\n      className=\"bg-slate-900/95 backdrop-blur-xl rounded-2xl shadow-2xl shadow-cyan-500/20 border border-cyan-500/30 overflow-hidden max-h-[90vh] overflow-y-auto\"\r\n    >\r\n      <div className=\"absolute inset-0 bg-gradient-to-br from-cyan-500/5 via-purple-500/5 to-pink-500/5 pointer-events-none\" />\r\n      \r\n      {/* Header avec avatar */}\r\n      <div className=\"relative h-32 bg-gradient-to-br from-cyan-600 via-purple-600 to-pink-600\">\r\n        <div className=\"absolute inset-0 bg-gradient-to-t from-slate-900/50 to-transparent\" />\r\n        <Button \r\n          variant=\"ghost\" \r\n          size=\"icon\" \r\n          onClick={onClose}\r\n          className=\"absolute top-4 right-4 text-white/80 hover:text-white hover:bg-white/20 z-10\"\r\n        >\r\n          <X className=\"w-5 h-5\" />\r\n        </Button>\r\n        \r\n        <div className=\"absolute -bottom-12 left-6 z-10\">\r\n          {character.avatar_url ? (\r\n            <img \r\n              src={character.avatar_url} \r\n              alt={`${character.first_name} ${character.last_name}`}\r\n              className=\"w-24 h-24 rounded-2xl object-cover ring-4 ring-cyan-500/50 shadow-lg shadow-cyan-500/50\"\r\n            />\r\n          ) : (\r\n            <div className=\"w-24 h-24 rounded-2xl bg-gradient-to-br from-cyan-500/20 to-purple-500/20 flex items-center justify-center ring-4 ring-cyan-500/50 shadow-lg shadow-cyan-500/50 backdrop-blur-sm\">\r\n              <span className=\"text-2xl font-bold text-cyan-400\">{initials}</span>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Contenu */}\r\n      <div className=\"pt-16 px-6 pb-6 relative z-10\">\r\n        <div className=\"flex items-start justify-between\">\r\n          <div>\r\n            <h2 className=\"text-2xl font-bold text-cyan-100\">\r\n              {character.first_name} {character.last_name}\r\n            </h2>\r\n            {character.profession && (\r\n              <p className=\"text-slate-400 mt-1\">{character.profession}</p>\r\n            )}\r\n          </div>\r\n          {character.blood_type && (\r\n            <Badge className={`${bloodTypeColors[character.blood_type]} text-sm font-semibold px-3 py-1.5 shadow-lg`}>\r\n              <Droplets className=\"w-3.5 h-3.5 mr-1.5\" />\r\n              {character.blood_type}\r\n            </Badge>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"mt-8 space-y-1 divide-y divide-cyan-500/10\">\r\n          <InfoRow icon={Calendar} label=\"Date de naissance\" value={character.birth_date ? format(new Date(character.birth_date), 'dd MMMM yyyy', { locale: fr }) : null} />\r\n          <InfoRow icon={Globe} label=\"Nationalité\" value={character.nationality} />\r\n          <InfoRow icon={Phone} label=\"Téléphone\" value={character.phone} />\r\n          <InfoRow icon={Briefcase} label=\"Métier\" value={character.profession} />\r\n          <InfoRow icon={MapPin} label=\"Adresse\" value={character.address} />\r\n          <InfoRow icon={Stethoscope} label=\"Médecin traitant\" value={character.doctor ? `Dr. ${character.doctor}` : null} />\r\n\r\n          {trustedPersons.length > 0 && (\r\n            <div className=\"flex items-start gap-4 py-3\">\r\n              <div className=\"w-10 h-10 rounded-xl bg-indigo-500/10 border border-indigo-500/30 flex items-center justify-center flex-shrink-0\">\r\n                <UserCheck className=\"w-5 h-5 text-indigo-400\" />\r\n              </div>\r\n              <div className=\"flex-1\">\r\n                <p className=\"text-xs font-medium text-indigo-400/70 uppercase tracking-wider mb-2\">Personnes de confiance</p>\r\n                <div className=\"space-y-1.5\">\r\n                  {trustedPersons.map((person, index) => {\r\n                    if (person.patient_id) {\r\n                      const patient = allCharacters.find(c => c.id === person.patient_id);\r\n                      if (patient) {\r\n                        return (\r\n                          <button \r\n                            key={index}\r\n                            onClick={() => onViewTrustedPerson(patient)}\r\n                            className=\"text-slate-300 hover:text-indigo-400 transition-colors underline decoration-dotted block\"\r\n                          >\r\n                            {patient.first_name} {patient.last_name}\r\n                            {patient.phone && ` - ${patient.phone}`}\r\n                          </button>\r\n                        );\r\n                      }\r\n                    }\r\n                    return (\r\n                      <p key={index} className=\"text-slate-300\">\r\n                        {person.name}\r\n                        {person.phone && ` - ${person.phone}`}\r\n                      </p>\r\n                    );\r\n                  })}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n          </div>\r\n\r\n        {character.medical_history && (\r\n          <div className=\"mt-6 p-4 bg-pink-500/10 rounded-xl border border-pink-500/30 shadow-lg shadow-pink-500/10\">\r\n            <div className=\"flex items-center gap-2 text-pink-400 font-medium mb-2\">\r\n              <FileText className=\"w-4 h-4\" />\r\n              Antécédents médicaux\r\n            </div>\r\n            <p className=\"text-slate-300 text-sm leading-relaxed\">\r\n              {character.medical_history}\r\n            </p>\r\n          </div>\r\n        )}\r\n\r\n        {character.attachments && character.attachments.length > 0 && (\r\n          <div className=\"mt-6 p-4 bg-amber-500/10 rounded-xl border border-amber-500/30 shadow-lg shadow-amber-500/10\">\r\n            <div className=\"flex items-center gap-2 text-amber-400 font-medium mb-3\">\r\n              <Paperclip className=\"w-4 h-4\" />\r\n              Documents et liens ({character.attachments.length})\r\n            </div>\r\n            <div className=\"space-y-2\">\r\n              {character.attachments.map((attachment, index) => {\r\n                const getIcon = () => {\r\n                  switch (attachment.type) {\r\n                    case 'image': return <ImageIcon className=\"w-4 h-4\" />;\r\n                    case 'link': return <LinkIcon className=\"w-4 h-4\" />;\r\n                    default: return <FileText className=\"w-4 h-4\" />;\r\n                  }\r\n                };\r\n\r\n                return (\r\n                  <a\r\n                    key={index}\r\n                    href={attachment.url}\r\n                    target=\"_blank\"\r\n                    rel=\"noopener noreferrer\"\r\n                    className=\"flex items-center gap-3 p-2 rounded-lg bg-slate-800/50 hover:bg-slate-800 border border-amber-500/20 hover:border-amber-500/40 transition-all group\"\r\n                  >\r\n                    <div className=\"text-amber-400\">\r\n                      {getIcon()}\r\n                    </div>\r\n                    <span className=\"flex-1 text-sm text-slate-300 group-hover:text-slate-100 truncate\">\r\n                      {attachment.name}\r\n                    </span>\r\n                    <ExternalLink className=\"w-4 h-4 text-slate-400 group-hover:text-amber-400\" />\r\n                  </a>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n        )}\r\n        </div>\r\n        </motion.div>\r\n        );\r\n        }"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3511, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/elise/Documents/novalife-app/components/Characters.jsx"],"sourcesContent":["\"use client\";\r\nimport React, { useState } from 'react';\r\nimport { base44 } from '@/api/base44Client';\r\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { \r\n  Dialog, \r\n  DialogContent,\r\n  DialogTitle,\r\n  DialogDescription\r\n} from \"@/components/ui/dialog\";\r\nimport {\r\n  AlertDialog,\r\n  AlertDialogAction,\r\n  AlertDialogCancel,\r\n  AlertDialogContent,\r\n  AlertDialogDescription,\r\n  AlertDialogFooter,\r\n  AlertDialogHeader,\r\n  AlertDialogTitle,\r\n} from \"@/components/ui/alert-dialog\";\r\nimport { Plus, Search, Loader2, Users } from 'lucide-react';\r\n\r\nimport CharacterCard from '@/components/Characters/CharactersCard';\r\nimport CharacterForm from '@/components/Characters/CharacterForm';\r\nimport CharacterDetails from '@/components/Characters/CharacterDetails';\r\n\r\nexport default function Characters() {\r\n  const [showForm, setShowForm] = useState(false);\r\n  const [editingCharacter, setEditingCharacter] = useState(null);\r\n  const [viewingCharacter, setViewingCharacter] = useState(null);\r\n  const [deletingCharacter, setDeletingCharacter] = useState(null);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n\r\n  const queryClient = useQueryClient();\r\n\r\n  const { data: characters = [], isLoading } = useQuery({\r\n    queryKey: ['characters'],\r\n    queryFn: () => base44.entities.Character.list('-created_date'),\r\n  });\r\n\r\n  const getTrustedPersons = (character) => {\r\n    return character.trusted_persons || [];\r\n  };\r\n\r\n  const createMutation = useMutation({\r\n    mutationFn: (data) => base44.entities.Character.create(data),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['characters'] });\r\n      setShowForm(false);\r\n    },\r\n    onError: (error) => {\r\n      console.error('Erreur lors de la création:', error);\r\n    },\r\n  });\r\n\r\n  const updateMutation = useMutation({\r\n    mutationFn: ({ id, data }) => base44.entities.Character.update(id, data),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['characters'] });\r\n      setShowForm(false);\r\n      setEditingCharacter(null);\r\n    },\r\n    onError: (error) => {\r\n      console.error('Erreur lors de la mise à jour:', error);\r\n    },\r\n  });\r\n\r\n  const deleteMutation = useMutation({\r\n    mutationFn: (id) => base44.entities.Character.delete(id),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['characters'] });\r\n      setDeletingCharacter(null);\r\n    },\r\n    onError: (error) => {\r\n      console.error('Erreur lors de la suppression:', error);\r\n      setDeletingCharacter(null);\r\n    },\r\n  });\r\n\r\n  const handleSubmit = (data) => {\r\n    if (editingCharacter) {\r\n      updateMutation.mutate({ id: editingCharacter.id, data });\r\n    } else {\r\n      createMutation.mutate(data);\r\n    }\r\n  };\r\n\r\n  const handleEdit = (character) => {\r\n    setEditingCharacter(character);\r\n    setShowForm(true);\r\n  };\r\n\r\n  const handleCloseForm = () => {\r\n    setShowForm(false);\r\n    setEditingCharacter(null);\r\n  };\r\n\r\n  const filteredCharacters = characters.filter(char => {\r\n    const fullName = `${char.first_name} ${char.last_name}`.toLowerCase();\r\n    const query = searchQuery.toLowerCase();\r\n    return fullName.includes(query) || \r\n           char.profession?.toLowerCase().includes(query) ||\r\n           char.blood_type?.toLowerCase().includes(query) ||\r\n           char.phone?.toLowerCase().includes(query);\r\n  });\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950\">\r\n      {/* Animated background effect */}\r\n      <div className=\"fixed inset-0 overflow-hidden pointer-events-none\">\r\n        <div className=\"absolute top-0 left-1/4 w-96 h-96 bg-cyan-500/10 rounded-full blur-3xl animate-pulse\" />\r\n        <div className=\"absolute bottom-0 right-1/4 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl animate-pulse delay-700\" />\r\n        <div className=\"absolute top-1/2 left-1/2 w-96 h-96 bg-pink-500/10 rounded-full blur-3xl animate-pulse delay-1000\" />\r\n        <img \r\n          src=\"https://qtrypzzcjebvfcihiynt.supabase.co/storage/v1/object/public/base44-prod/public/6966dea0eae2ef138766d9ef/e2fc969cb_Atelis.png\" \r\n          alt=\"Atelis\"\r\n          className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] h-auto opacity-5\"\r\n        />\r\n      </div>\r\n\r\n      {/* Header */}\r\n      <header className=\"sticky top-0 z-40 bg-slate-900/80 backdrop-blur-xl border-b border-cyan-500/20\">\r\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n          <div className=\"flex items-center justify-between h-16\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <img \r\n                src=\"https://qtrypzzcjebvfcihiynt.supabase.co/storage/v1/object/public/base44-prod/public/6966dea0eae2ef138766d9ef/d73b7558b_Atelis.png\"\r\n                alt=\"Atelis\"\r\n                className=\"h-10 w-auto\"\r\n              />\r\n              <div>\r\n                <h1 className=\"text-xl font-bold text-cyan-100\">Patients</h1>\r\n                <p className=\"text-xs text-cyan-400/70\">{characters.length} patient{characters.length > 1 ? 's' : ''}</p>\r\n              </div>\r\n            </div>\r\n\r\n            <Button \r\n              onClick={() => setShowForm(true)}\r\n              className=\"bg-gradient-to-r from-cyan-600 to-purple-600 hover:from-cyan-500 hover:to-purple-500 shadow-lg shadow-cyan-500/50 hover:shadow-cyan-500/70 transition-all\"\r\n            >\r\n              <Plus className=\"w-4 h-4 mr-2\" />\r\n              Nouveau\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      {/* Search */}\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 relative z-10\">\r\n        <div className=\"relative max-w-md\">\r\n          <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-cyan-400\" />\r\n          <Input\r\n            placeholder=\"Rechercher par nom, métier, groupe sanguin, téléphone...\"\r\n            value={searchQuery}\r\n            onChange={(e) => setSearchQuery(e.target.value)}\r\n            className=\"pl-10 h-12 bg-slate-800/50 border-cyan-500/30 text-cyan-100 placeholder:text-slate-500 focus:border-cyan-500 focus:ring-cyan-500/50 shadow-lg shadow-cyan-500/10\"\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Content */}\r\n      <main className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-12 relative z-10\">\r\n        {isLoading ? (\r\n          <div className=\"flex items-center justify-center py-20\">\r\n            <Loader2 className=\"w-8 h-8 text-cyan-400 animate-spin\" />\r\n          </div>\r\n        ) : filteredCharacters.length === 0 ? (\r\n          <motion.div \r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            className=\"text-center py-20\"\r\n          >\r\n            <div className=\"w-20 h-20 mx-auto rounded-2xl bg-cyan-500/10 border border-cyan-500/30 flex items-center justify-center mb-4\">\r\n              <Users className=\"w-10 h-10 text-cyan-400\" />\r\n            </div>\r\n            <h3 className=\"text-lg font-semibold text-cyan-100 mb-1\">\r\n              {searchQuery ? 'Aucun résultat' : 'Aucun patient'}\r\n            </h3>\r\n            <p className=\"text-slate-400 mb-6\">\r\n              {searchQuery ? 'Essayez avec d\\'autres termes' : 'Commencez par créer votre premier patient'}\r\n            </p>\r\n            {!searchQuery && (\r\n              <Button \r\n                onClick={() => setShowForm(true)}\r\n                className=\"bg-gradient-to-r from-cyan-600 to-purple-600 shadow-lg shadow-cyan-500/30\"\r\n              >\r\n                <Plus className=\"w-4 h-4 mr-2\" />\r\n                Créer un patient\r\n              </Button>\r\n            )}\r\n          </motion.div>\r\n        ) : (\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n            <AnimatePresence>\r\n              {filteredCharacters.map((character) => (\r\n                <CharacterCard\r\n                  key={character.id}\r\n                  character={character}\r\n                  trustedPersons={getTrustedPersons(character)}\r\n                  allCharacters={characters}\r\n                  onView={setViewingCharacter}\r\n                  onEdit={handleEdit}\r\n                  onDelete={setDeletingCharacter}\r\n                />\r\n              ))}\r\n            </AnimatePresence>\r\n          </div>\r\n        )}\r\n      </main>\r\n\r\n      {/* Form Dialog */}\r\n      <Dialog open={showForm} onOpenChange={handleCloseForm}>\r\n        <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto p-0 gap-0 border-0 bg-transparent shadow-none\">\r\n          <DialogTitle className=\"sr-only\">\r\n            {editingCharacter ? 'Modifier le patient' : 'Nouveau patient'}\r\n          </DialogTitle>\r\n          <DialogDescription className=\"sr-only\">\r\n            Formulaire pour créer ou modifier un patient\r\n          </DialogDescription>\r\n          <CharacterForm\r\n            character={editingCharacter}\r\n            onSubmit={handleSubmit}\r\n            onCancel={handleCloseForm}\r\n            isLoading={createMutation.isPending || updateMutation.isPending}\r\n          />\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      {/* Details Dialog */}\r\n      <Dialog open={!!viewingCharacter} onOpenChange={() => setViewingCharacter(null)}>\r\n        <DialogContent className=\"max-w-lg p-0 gap-0 border-0 bg-transparent shadow-none\">\r\n          <DialogTitle className=\"sr-only\">Détails du patient</DialogTitle>\r\n          <DialogDescription className=\"sr-only\">\r\n            Informations détaillées sur le patient\r\n          </DialogDescription>\r\n          {viewingCharacter && (\r\n            <CharacterDetails\r\n              character={viewingCharacter}\r\n              trustedPersons={getTrustedPersons(viewingCharacter)}\r\n              allCharacters={characters}\r\n              onViewTrustedPerson={setViewingCharacter}\r\n              onClose={() => setViewingCharacter(null)}\r\n            />\r\n          )}\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      {/* Delete Confirmation */}\r\n      <AlertDialog open={!!deletingCharacter} onOpenChange={() => setDeletingCharacter(null)}>\r\n        <AlertDialogContent>\r\n          <AlertDialogHeader>\r\n            <AlertDialogTitle>Supprimer ce patient ?</AlertDialogTitle>\r\n            <AlertDialogDescription>\r\n              Cette action est irréversible. Le patient{' '}\r\n              <span className=\"font-semibold\">\r\n                {deletingCharacter?.first_name} {deletingCharacter?.last_name}\r\n              </span>{' '}\r\n              sera définitivement supprimé.\r\n            </AlertDialogDescription>\r\n          </AlertDialogHeader>\r\n          <AlertDialogFooter>\r\n            <AlertDialogCancel>Annuler</AlertDialogCancel>\r\n            <AlertDialogAction\r\n              onClick={() => {\r\n                if (deletingCharacter?.id) {\r\n                  deleteMutation.mutate(deletingCharacter.id);\r\n                }\r\n              }}\r\n              className=\"bg-rose-600 hover:bg-rose-700\"\r\n            >\r\n              Supprimer\r\n            </AlertDialogAction>\r\n          </AlertDialogFooter>\r\n        </AlertDialogContent>\r\n      </AlertDialog>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAMA;AAUA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AA3BA;;;;;;;;;;;;;;AA6Be,SAAS;IACtB,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IACzC,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,iNAAQ,EAAC;IACzD,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,iNAAQ,EAAC;IACzD,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,iNAAQ,EAAC;IAC3D,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAE/C,MAAM,cAAc,IAAA,wMAAc;IAElC,MAAM,EAAE,MAAM,aAAa,EAAE,EAAE,SAAS,EAAE,GAAG,IAAA,uLAAQ,EAAC;QACpD,UAAU;YAAC;SAAa;QACxB,SAAS,IAAM,6HAAM,CAAC,QAAQ,CAAC,SAAS,CAAC,IAAI,CAAC;IAChD;IAEA,MAAM,oBAAoB,CAAC;QACzB,OAAO,UAAU,eAAe,IAAI,EAAE;IACxC;IAEA,MAAM,iBAAiB,IAAA,6LAAW,EAAC;QACjC,YAAY,CAAC,OAAS,6HAAM,CAAC,QAAQ,CAAC,SAAS,CAAC,MAAM,CAAC;QACvD,WAAW;YACT,YAAY,iBAAiB,CAAC;gBAAE,UAAU;oBAAC;iBAAa;YAAC;YACzD,YAAY;QACd;QACA,SAAS,CAAC;YACR,QAAQ,KAAK,CAAC,+BAA+B;QAC/C;IACF;IAEA,MAAM,iBAAiB,IAAA,6LAAW,EAAC;QACjC,YAAY,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,GAAK,6HAAM,CAAC,QAAQ,CAAC,SAAS,CAAC,MAAM,CAAC,IAAI;QACnE,WAAW;YACT,YAAY,iBAAiB,CAAC;gBAAE,UAAU;oBAAC;iBAAa;YAAC;YACzD,YAAY;YACZ,oBAAoB;QACtB;QACA,SAAS,CAAC;YACR,QAAQ,KAAK,CAAC,kCAAkC;QAClD;IACF;IAEA,MAAM,iBAAiB,IAAA,6LAAW,EAAC;QACjC,YAAY,CAAC,KAAO,6HAAM,CAAC,QAAQ,CAAC,SAAS,CAAC,MAAM,CAAC;QACrD,WAAW;YACT,YAAY,iBAAiB,CAAC;gBAAE,UAAU;oBAAC;iBAAa;YAAC;YACzD,qBAAqB;QACvB;QACA,SAAS,CAAC;YACR,QAAQ,KAAK,CAAC,kCAAkC;YAChD,qBAAqB;QACvB;IACF;IAEA,MAAM,eAAe,CAAC;QACpB,IAAI,kBAAkB;YACpB,eAAe,MAAM,CAAC;gBAAE,IAAI,iBAAiB,EAAE;gBAAE;YAAK;QACxD,OAAO;YACL,eAAe,MAAM,CAAC;QACxB;IACF;IAEA,MAAM,aAAa,CAAC;QAClB,oBAAoB;QACpB,YAAY;IACd;IAEA,MAAM,kBAAkB;QACtB,YAAY;QACZ,oBAAoB;IACtB;IAEA,MAAM,qBAAqB,WAAW,MAAM,CAAC,CAAA;QAC3C,MAAM,WAAW,GAAG,KAAK,UAAU,CAAC,CAAC,EAAE,KAAK,SAAS,EAAE,CAAC,WAAW;QACnE,MAAM,QAAQ,YAAY,WAAW;QACrC,OAAO,SAAS,QAAQ,CAAC,UAClB,KAAK,UAAU,EAAE,cAAc,SAAS,UACxC,KAAK,UAAU,EAAE,cAAc,SAAS,UACxC,KAAK,KAAK,EAAE,cAAc,SAAS;IAC5C;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC;wBACC,KAAI;wBACJ,KAAI;wBACJ,WAAU;;;;;;;;;;;;0BAKd,8OAAC;gBAAO,WAAU;0BAChB,cAAA,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCACC,KAAI;wCACJ,KAAI;wCACJ,WAAU;;;;;;kDAEZ,8OAAC;;0DACC,8OAAC;gDAAG,WAAU;0DAAkC;;;;;;0DAChD,8OAAC;gDAAE,WAAU;;oDAA4B,WAAW,MAAM;oDAAC;oDAAS,WAAW,MAAM,GAAG,IAAI,MAAM;;;;;;;;;;;;;;;;;;;0CAItG,8OAAC,qIAAM;gCACL,SAAS,IAAM,YAAY;gCAC3B,WAAU;;kDAEV,8OAAC,0MAAI;wCAAC,WAAU;;;;;;oCAAiB;;;;;;;;;;;;;;;;;;;;;;;0BAQzC,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC,gNAAM;4BAAC,WAAU;;;;;;sCAClB,8OAAC,mIAAK;4BACJ,aAAY;4BACZ,OAAO;4BACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;4BAC9C,WAAU;;;;;;;;;;;;;;;;;0BAMhB,8OAAC;gBAAK,WAAU;0BACb,0BACC,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC,4NAAO;wBAAC,WAAU;;;;;;;;;;2BAEnB,mBAAmB,MAAM,KAAK,kBAChC,8OAAC,oMAAM,CAAC,GAAG;oBACT,SAAS;wBAAE,SAAS;oBAAE;oBACtB,SAAS;wBAAE,SAAS;oBAAE;oBACtB,WAAU;;sCAEV,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC,6MAAK;gCAAC,WAAU;;;;;;;;;;;sCAEnB,8OAAC;4BAAG,WAAU;sCACX,cAAc,mBAAmB;;;;;;sCAEpC,8OAAC;4BAAE,WAAU;sCACV,cAAc,kCAAkC;;;;;;wBAElD,CAAC,6BACA,8OAAC,qIAAM;4BACL,SAAS,IAAM,YAAY;4BAC3B,WAAU;;8CAEV,8OAAC,0MAAI;oCAAC,WAAU;;;;;;gCAAiB;;;;;;;;;;;;yCAMvC,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC,4MAAe;kCACb,mBAAmB,GAAG,CAAC,CAAC,0BACvB,8OAAC,sJAAa;gCAEZ,WAAW;gCACX,gBAAgB,kBAAkB;gCAClC,eAAe;gCACf,QAAQ;gCACR,QAAQ;gCACR,UAAU;+BANL,UAAU,EAAE;;;;;;;;;;;;;;;;;;;;0BAe7B,8OAAC,qIAAM;gBAAC,MAAM;gBAAU,cAAc;0BACpC,cAAA,8OAAC,4IAAa;oBAAC,WAAU;;sCACvB,8OAAC,0IAAW;4BAAC,WAAU;sCACpB,mBAAmB,wBAAwB;;;;;;sCAE9C,8OAAC,gJAAiB;4BAAC,WAAU;sCAAU;;;;;;sCAGvC,8OAAC,qJAAa;4BACZ,WAAW;4BACX,UAAU;4BACV,UAAU;4BACV,WAAW,eAAe,SAAS,IAAI,eAAe,SAAS;;;;;;;;;;;;;;;;;0BAMrE,8OAAC,qIAAM;gBAAC,MAAM,CAAC,CAAC;gBAAkB,cAAc,IAAM,oBAAoB;0BACxE,cAAA,8OAAC,4IAAa;oBAAC,WAAU;;sCACvB,8OAAC,0IAAW;4BAAC,WAAU;sCAAU;;;;;;sCACjC,8OAAC,gJAAiB;4BAAC,WAAU;sCAAU;;;;;;wBAGtC,kCACC,8OAAC,wJAAgB;4BACf,WAAW;4BACX,gBAAgB,kBAAkB;4BAClC,eAAe;4BACf,qBAAqB;4BACrB,SAAS,IAAM,oBAAoB;;;;;;;;;;;;;;;;;0BAO3C,8OAAC,mJAAW;gBAAC,MAAM,CAAC,CAAC;gBAAmB,cAAc,IAAM,qBAAqB;0BAC/E,cAAA,8OAAC,0JAAkB;;sCACjB,8OAAC,yJAAiB;;8CAChB,8OAAC,wJAAgB;8CAAC;;;;;;8CAClB,8OAAC,8JAAsB;;wCAAC;wCACoB;sDAC1C,8OAAC;4CAAK,WAAU;;gDACb,mBAAmB;gDAAW;gDAAE,mBAAmB;;;;;;;wCAC9C;wCAAI;;;;;;;;;;;;;sCAIhB,8OAAC,yJAAiB;;8CAChB,8OAAC,yJAAiB;8CAAC;;;;;;8CACnB,8OAAC,yJAAiB;oCAChB,SAAS;wCACP,IAAI,mBAAmB,IAAI;4CACzB,eAAe,MAAM,CAAC,kBAAkB,EAAE;wCAC5C;oCACF;oCACA,WAAU;8CACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQb"}}]
}