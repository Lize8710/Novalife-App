{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/elise/Documents/novalife-app/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\"\r\nimport { twMerge } from \"tailwind-merge\"\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs))\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,yKAAO,EAAC,IAAA,gJAAI,EAAC;AACtB"}},
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/elise/Documents/novalife-app/components/ui/button.jsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { Slot } from \"@radix-ui/react-slot\"\r\nimport { cva } from \"class-variance-authority\";\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default:\r\n          \"bg-primary text-primary-foreground shadow hover:bg-primary/90\",\r\n        destructive:\r\n          \"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90\",\r\n        outline:\r\n          \"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground\",\r\n        secondary:\r\n          \"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80\",\r\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\r\n        link: \"text-primary underline-offset-4 hover:underline\",\r\n      },\r\n      size: {\r\n        default: \"h-9 px-4 py-2\",\r\n        sm: \"h-8 rounded-md px-3 text-xs\",\r\n        lg: \"h-10 rounded-md px-8\",\r\n        icon: \"h-9 w-9\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nconst Button = React.forwardRef(({ className, variant, size, asChild = false, ...props }, ref) => {\r\n  const Comp = asChild ? Slot : \"button\"\r\n  return (\r\n    (<Comp\r\n      className={cn(buttonVariants({ variant, size, className }))}\r\n      ref={ref}\r\n      {...props} />)\r\n  );\r\n})\r\nButton.displayName = \"Button\"\r\n\r\nexport { Button, buttonVariants }\r\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,iBAAiB,IAAA,0KAAG,EACxB,ySACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,aACE;YACF,SACE;YACF,WACE;YACF,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,MAAM,uBAAS,2KAAgB,MAAC,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxF,MAAM,OAAO,UAAU,2KAAI,GAAG;IAC9B,qBACG,6LAAC;QACA,WAAW,IAAA,qHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAEf;;AACA,OAAO,WAAW,GAAG"}},
    {"offset": {"line": 89, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/elise/Documents/novalife-app/components/ui/input.jsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Input = React.forwardRef(({ className, type, ...props }, ref) => {\r\n  return (\r\n    (<input\r\n      type={type}\r\n      className={cn(\r\n        \"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\r\n        className\r\n      )}\r\n      ref={ref}\r\n      {...props} />)\r\n  );\r\n})\r\nInput.displayName = \"Input\"\r\n\r\nexport { Input }\r\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,2KAAgB,MAAC,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IAC7D,qBACG,6LAAC;QACA,MAAM;QACN,WAAW,IAAA,qHAAE,EACX,2WACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAEf;;AACA,MAAM,WAAW,GAAG"}},
    {"offset": {"line": 124, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/elise/Documents/novalife-app/components/ui/dialog.jsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\r\nimport { X } from \"lucide-react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Dialog = DialogPrimitive.Root\r\n\r\nconst DialogTrigger = DialogPrimitive.Trigger\r\n\r\nconst DialogPortal = DialogPrimitive.Portal\r\n\r\nconst DialogClose = DialogPrimitive.Close\r\n\r\nconst DialogOverlay = React.forwardRef(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Overlay\r\n    ref={ref}\r\n    className={cn(\r\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\r\n      className\r\n    )}\r\n    {...props} />\r\n))\r\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\r\n\r\nconst DialogContent = React.forwardRef(({ className, children, ...props }, ref) => (\r\n  <DialogPortal>\r\n    <DialogOverlay />\r\n    <DialogPrimitive.Content\r\n      ref={ref}\r\n      className={cn(\r\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\r\n        className\r\n      )}\r\n      {...props}>\r\n      {children}\r\n      <DialogPrimitive.Close\r\n        className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\r\n        <X className=\"h-4 w-4\" />\r\n        <span className=\"sr-only\">Close</span>\r\n      </DialogPrimitive.Close>\r\n    </DialogPrimitive.Content>\r\n  </DialogPortal>\r\n))\r\nDialogContent.displayName = DialogPrimitive.Content.displayName\r\n\r\nconst DialogHeader = ({\r\n  className,\r\n  ...props\r\n}) => (\r\n  <div\r\n    className={cn(\"flex flex-col space-y-1.5 text-center sm:text-left\", className)}\r\n    {...props} />\r\n)\r\nDialogHeader.displayName = \"DialogHeader\"\r\n\r\nconst DialogFooter = ({\r\n  className,\r\n  ...props\r\n}) => (\r\n  <div\r\n    className={cn(\"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\", className)}\r\n    {...props} />\r\n)\r\nDialogFooter.displayName = \"DialogFooter\"\r\n\r\nconst DialogTitle = React.forwardRef(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Title\r\n    ref={ref}\r\n    className={cn(\"text-lg font-semibold leading-none tracking-tight\", className)}\r\n    {...props} />\r\n))\r\nDialogTitle.displayName = DialogPrimitive.Title.displayName\r\n\r\nconst DialogDescription = React.forwardRef(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Description\r\n    ref={ref}\r\n    className={cn(\"text-sm text-muted-foreground\", className)}\r\n    {...props} />\r\n))\r\nDialogDescription.displayName = DialogPrimitive.Description.displayName\r\n\r\nexport {\r\n  Dialog,\r\n  DialogPortal,\r\n  DialogOverlay,\r\n  DialogTrigger,\r\n  DialogClose,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogFooter,\r\n  DialogTitle,\r\n  DialogDescription,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,SAAS,6KAAoB;AAEnC,MAAM,gBAAgB,gLAAuB;AAE7C,MAAM,eAAe,+KAAsB;AAE3C,MAAM,cAAc,8KAAqB;AAEzC,MAAM,8BAAgB,2KAAgB,CAAC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC/D,6LAAC,gLAAuB;QACtB,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,2JACA;QAED,GAAG,KAAK;;;;;;KAPP;AASN,cAAc,WAAW,GAAG,gLAAuB,CAAC,WAAW;AAE/D,MAAM,8BAAgB,2KAAgB,OAAC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACzE,6LAAC;;0BACC,6LAAC;;;;;0BACD,6LAAC,gLAAuB;gBACtB,KAAK;gBACL,WAAW,IAAA,qHAAE,EACX,+fACA;gBAED,GAAG,KAAK;;oBACR;kCACD,6LAAC,8KAAqB;wBACpB,WAAU;;0CACV,6LAAC,oMAAC;gCAAC,WAAU;;;;;;0CACb,6LAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;;AAKlC,cAAc,WAAW,GAAG,gLAAuB,CAAC,WAAW;AAE/D,MAAM,eAAe,CAAC,EACpB,SAAS,EACT,GAAG,OACJ,iBACC,6LAAC;QACC,WAAW,IAAA,qHAAE,EAAC,sDAAsD;QACnE,GAAG,KAAK;;;;;;MANP;AAQN,aAAa,WAAW,GAAG;AAE3B,MAAM,eAAe,CAAC,EACpB,SAAS,EACT,GAAG,OACJ,iBACC,6LAAC;QACC,WAAW,IAAA,qHAAE,EAAC,iEAAiE;QAC9E,GAAG,KAAK;;;;;;MANP;AAQN,aAAa,WAAW,GAAG;AAE3B,MAAM,4BAAc,2KAAgB,OAAC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC7D,6LAAC,8KAAqB;QACpB,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,qDAAqD;QAClE,GAAG,KAAK;;;;;;;AAEb,YAAY,WAAW,GAAG,8KAAqB,CAAC,WAAW;AAE3D,MAAM,kCAAoB,2KAAgB,OAAC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACnE,6LAAC,oLAA2B;QAC1B,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAEb,kBAAkB,WAAW,GAAG,oLAA2B,CAAC,WAAW"}},
    {"offset": {"line": 283, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/elise/Documents/novalife-app/components/ui/alert-dialog.jsx"],"sourcesContent":["import * as React from \"react\"\r\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\nimport { buttonVariants } from \"@/components/ui/button\"\r\n\r\nconst AlertDialog = AlertDialogPrimitive.Root\r\n\r\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\r\n\r\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\r\n\r\nconst AlertDialogOverlay = React.forwardRef(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Overlay\r\n    className={cn(\r\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n    ref={ref} />\r\n))\r\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\r\n\r\nconst AlertDialogContent = React.forwardRef(({ className, ...props }, ref) => (\r\n  <AlertDialogPortal>\r\n    <AlertDialogOverlay />\r\n    <AlertDialogPrimitive.Content\r\n      ref={ref}\r\n      className={cn(\r\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\r\n        className\r\n      )}\r\n      {...props} />\r\n  </AlertDialogPortal>\r\n))\r\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\r\n\r\nconst AlertDialogHeader = ({\r\n  className,\r\n  ...props\r\n}) => (\r\n  <div\r\n    className={cn(\"flex flex-col space-y-2 text-center sm:text-left\", className)}\r\n    {...props} />\r\n)\r\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\r\n\r\nconst AlertDialogFooter = ({\r\n  className,\r\n  ...props\r\n}) => (\r\n  <div\r\n    className={cn(\"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\", className)}\r\n    {...props} />\r\n)\r\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\r\n\r\nconst AlertDialogTitle = React.forwardRef(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Title ref={ref} className={cn(\"text-lg font-semibold\", className)} {...props} />\r\n))\r\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\r\n\r\nconst AlertDialogDescription = React.forwardRef(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Description\r\n    ref={ref}\r\n    className={cn(\"text-sm text-muted-foreground\", className)}\r\n    {...props} />\r\n))\r\nAlertDialogDescription.displayName =\r\n  AlertDialogPrimitive.Description.displayName\r\n\r\nconst AlertDialogAction = React.forwardRef(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Action ref={ref} className={cn(buttonVariants(), className)} {...props} />\r\n))\r\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\r\n\r\nconst AlertDialogCancel = React.forwardRef(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Cancel\r\n    ref={ref}\r\n    className={cn(buttonVariants({ variant: \"outline\" }), \"mt-2 sm:mt-0\", className)}\r\n    {...props} />\r\n))\r\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\r\n\r\nexport {\r\n  AlertDialog,\r\n  AlertDialogPortal,\r\n  AlertDialogOverlay,\r\n  AlertDialogTrigger,\r\n  AlertDialogContent,\r\n  AlertDialogHeader,\r\n  AlertDialogFooter,\r\n  AlertDialogTitle,\r\n  AlertDialogDescription,\r\n  AlertDialogAction,\r\n  AlertDialogCancel,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AAEA;AACA;;;;;;AAEA,MAAM,cAAc,sLAAyB;AAE7C,MAAM,qBAAqB,yLAA4B;AAEvD,MAAM,oBAAoB,wLAA2B;AAErD,MAAM,mCAAqB,2KAAgB,CAAC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACpE,6LAAC,yLAA4B;QAC3B,WAAW,IAAA,qHAAE,EACX,0JACA;QAED,GAAG,KAAK;QACT,KAAK;;;;;;KAPH;AASN,mBAAmB,WAAW,GAAG,yLAA4B,CAAC,WAAW;AAEzE,MAAM,mCAAqB,2KAAgB,OAAC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACpE,6LAAC;;0BACC,6LAAC;;;;;0BACD,6LAAC,yLAA4B;gBAC3B,KAAK;gBACL,WAAW,IAAA,qHAAE,EACX,+fACA;gBAED,GAAG,KAAK;;;;;;;;;;;;;AAGf,mBAAmB,WAAW,GAAG,yLAA4B,CAAC,WAAW;AAEzE,MAAM,oBAAoB,CAAC,EACzB,SAAS,EACT,GAAG,OACJ,iBACC,6LAAC;QACC,WAAW,IAAA,qHAAE,EAAC,oDAAoD;QACjE,GAAG,KAAK;;;;;;MANP;AAQN,kBAAkB,WAAW,GAAG;AAEhC,MAAM,oBAAoB,CAAC,EACzB,SAAS,EACT,GAAG,OACJ,iBACC,6LAAC;QACC,WAAW,IAAA,qHAAE,EAAC,iEAAiE;QAC9E,GAAG,KAAK;;;;;;MANP;AAQN,kBAAkB,WAAW,GAAG;AAEhC,MAAM,iCAAmB,2KAAgB,OAAC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAClE,6LAAC,uLAA0B;QAAC,KAAK;QAAK,WAAW,IAAA,qHAAE,EAAC,yBAAyB;QAAa,GAAG,KAAK;;;;;;;AAEpG,iBAAiB,WAAW,GAAG,uLAA0B,CAAC,WAAW;AAErE,MAAM,uCAAyB,2KAAgB,OAAC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxE,6LAAC,6LAAgC;QAC/B,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAEb,uBAAuB,WAAW,GAChC,6LAAgC,CAAC,WAAW;AAE9C,MAAM,kCAAoB,2KAAgB,OAAC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACnE,6LAAC,wLAA2B;QAAC,KAAK;QAAK,WAAW,IAAA,qHAAE,EAAC,IAAA,gJAAc,KAAI;QAAa,GAAG,KAAK;;;;;;;AAE9F,kBAAkB,WAAW,GAAG,wLAA2B,CAAC,WAAW;AAEvE,MAAM,kCAAoB,2KAAgB,QAAC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACnE,6LAAC,wLAA2B;QAC1B,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,IAAA,gJAAc,EAAC;YAAE,SAAS;QAAU,IAAI,gBAAgB;QACrE,GAAG,KAAK;;;;;;;AAEb,kBAAkB,WAAW,GAAG,wLAA2B,CAAC,WAAW"}},
    {"offset": {"line": 443, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/elise/Documents/novalife-app/components/ui/card.jsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Card = React.forwardRef(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"rounded-xl border bg-card text-card-foreground shadow\", className)}\r\n    {...props} />\r\n))\r\nCard.displayName = \"Card\"\r\n\r\nconst CardHeader = React.forwardRef(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\r\n    {...props} />\r\n))\r\nCardHeader.displayName = \"CardHeader\"\r\n\r\nconst CardTitle = React.forwardRef(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"font-semibold leading-none tracking-tight\", className)}\r\n    {...props} />\r\n))\r\nCardTitle.displayName = \"CardTitle\"\r\n\r\nconst CardDescription = React.forwardRef(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"text-sm text-muted-foreground\", className)}\r\n    {...props} />\r\n))\r\nCardDescription.displayName = \"CardDescription\"\r\n\r\nconst CardContent = React.forwardRef(({ className, ...props }, ref) => (\r\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\r\n))\r\nCardContent.displayName = \"CardContent\"\r\n\r\nconst CardFooter = React.forwardRef(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"flex items-center p-6 pt-0\", className)}\r\n    {...props} />\r\n))\r\nCardFooter.displayName = \"CardFooter\"\r\n\r\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,2KAAgB,MAAC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACtD,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,yDAAyD;QACtE,GAAG,KAAK;;;;;;;AAEb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,2KAAgB,OAAC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC5D,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAEb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,2KAAgB,OAAC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC3D,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,6CAA6C;QAC1D,GAAG,KAAK;;;;;;;AAEb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,2KAAgB,OAAC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACjE,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAEb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,2KAAgB,OAAC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC7D,6LAAC;QAAI,KAAK;QAAK,WAAW,IAAA,qHAAE,EAAC,YAAY;QAAa,GAAG,KAAK;;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,2KAAgB,QAAC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC5D,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;;AAEb,WAAW,WAAW,GAAG"}},
    {"offset": {"line": 550, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/elise/Documents/novalife-app/components/ui/badge.jsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { cva } from \"class-variance-authority\";\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst badgeVariants = cva(\r\n  \"inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default:\r\n          \"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80\",\r\n        secondary:\r\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\r\n        destructive:\r\n          \"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80\",\r\n        outline: \"text-foreground\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nfunction Badge({\r\n  className,\r\n  variant,\r\n  ...props\r\n}) {\r\n  return (<div className={cn(badgeVariants({ variant }), className)} {...props} />);\r\n}\r\n\r\nexport { Badge, badgeVariants }\r\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AAEA;;;;;AAEA,MAAM,gBAAgB,IAAA,0KAAG,EACvB,wKACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SAAS;QACX;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,SAAS,MAAM,EACb,SAAS,EACT,OAAO,EACP,GAAG,OACJ;IACC,qBAAQ,6LAAC;QAAI,WAAW,IAAA,qHAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QAAa,GAAG,KAAK;;;;;;AAC9E;KANS"}},
    {"offset": {"line": 600, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/elise/Documents/novalife-app/components/Characters/CharactersCard.jsx"],"sourcesContent":["import React from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { Card } from \"@/components/ui/card\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { User, MapPin, Briefcase, Heart, Eye, Pencil, Trash2, Phone, Calendar, UserCheck, Paperclip } from 'lucide-react';\r\nimport { format } from 'date-fns';\r\nimport { fr } from 'date-fns/locale';\r\n\r\nconst bloodTypeColors = {\r\n  'A+': 'bg-rose-500/20 text-rose-400 border-rose-500/50 shadow-rose-500/50',\r\n  'A-': 'bg-rose-500/20 text-rose-300 border-rose-500/50 shadow-rose-500/50',\r\n  'B+': 'bg-cyan-500/20 text-cyan-400 border-cyan-500/50 shadow-cyan-500/50',\r\n  'B-': 'bg-cyan-500/20 text-cyan-300 border-cyan-500/50 shadow-cyan-500/50',\r\n  'AB+': 'bg-purple-500/20 text-purple-400 border-purple-500/50 shadow-purple-500/50',\r\n  'AB-': 'bg-purple-500/20 text-purple-300 border-purple-500/50 shadow-purple-500/50',\r\n  'O+': 'bg-amber-500/20 text-amber-400 border-amber-500/50 shadow-amber-500/50',\r\n  'O-': 'bg-amber-500/20 text-amber-300 border-amber-500/50 shadow-amber-500/50',\r\n};\r\n\r\nexport default function CharacterCard({ character, onView, onEdit, onDelete, trustedPersons = [], allCharacters = [] }) {\r\n  const safeTrustedPersons = Array.isArray(trustedPersons) ? trustedPersons : [];\r\n  const initials = `${character.first_name?.[0] || ''}${character.last_name?.[0] || ''}`.toUpperCase();\r\n  \r\n  return (\r\n    <motion.div\r\n      initial={{ opacity: 0, y: 20 }}\r\n      animate={{ opacity: 1, y: 0 }}\r\n      exit={{ opacity: 0, y: -20 }}\r\n      whileHover={{ y: -4 }}\r\n      transition={{ duration: 0.2 }}\r\n    >\r\n      <Card className=\"group relative overflow-hidden bg-slate-900/40 backdrop-blur-sm border border-cyan-500/20 shadow-lg shadow-cyan-500/10 hover:shadow-2xl hover:shadow-cyan-500/30 transition-all duration-500\">\r\n        <div className=\"absolute inset-0 bg-gradient-to-br from-cyan-500/5 via-transparent to-purple-500/5\" />\r\n        <img \r\n          src=\"https://qtrypzzcjebvfcihiynt.supabase.co/storage/v1/object/public/base44-prod/public/6966dea0eae2ef138766d9ef/d73b7558b_Atelis.png\"\r\n          alt=\"\"\r\n          className=\"absolute right-2 bottom-2 w-20 h-auto opacity-5 group-hover:opacity-10 transition-opacity duration-300\"\r\n        />\r\n        <div className=\"absolute top-0 left-0 w-full h-[2px] bg-gradient-to-r from-cyan-500 via-purple-500 to-pink-500 opacity-0 group-hover:opacity-100 transition-opacity duration-300 shadow-lg shadow-cyan-500/50\" />\r\n        <div className=\"absolute -inset-1 bg-gradient-to-r from-cyan-500/20 via-purple-500/20 to-pink-500/20 rounded-xl blur-lg opacity-0 group-hover:opacity-100 transition-opacity duration-500\" />\r\n        \r\n        <div className=\"p-6 relative z-10\">\r\n          <div className=\"flex items-start gap-4\">\r\n            {character.avatar_url ? (\r\n              (() => {\r\n                let src = character.avatar_url;\r\n                if (src && src.length > 100 && !src.startsWith('data:image') && !src.startsWith('http') && !src.startsWith('/api')) {\r\n                  src = `data:image/png;base64,${src}`;\r\n                }\r\n                return <img \r\n                  src={src} \r\n                  alt={`${character.first_name} ${character.last_name}`}\r\n                  className=\"w-16 h-16 rounded-2xl object-cover ring-2 ring-cyan-500/50 shadow-lg shadow-cyan-500/50\"\r\n                />;\r\n              })()\r\n            ) : (\r\n              <div className=\"w-16 h-16 rounded-2xl bg-gradient-to-br from-cyan-500/20 to-purple-500/20 flex items-center justify-center ring-2 ring-cyan-500/50 shadow-lg shadow-cyan-500/50 backdrop-blur-sm\">\r\n                <span className=\"text-lg font-semibold text-cyan-400\">{initials}</span>\r\n              </div>\r\n            )}\r\n            \r\n            <div className=\"flex-1 min-w-0\">\r\n              <h3 className=\"text-lg font-semibold text-cyan-100 truncate group-hover:text-cyan-300 transition-colors\">\r\n                {character.first_name} {character.last_name}\r\n              </h3>\r\n              \r\n              <div className=\"flex items-center gap-2 mt-1 flex-wrap\">\r\n                {character.birth_date && (\r\n                  <span className=\"text-sm text-slate-400\">\r\n                    {format(new Date(character.birth_date), 'dd/MM/yyyy', { locale: fr })}\r\n                  </span>\r\n                )}\r\n                {character.nationality && (\r\n                  <>\r\n                    {character.birth_date && <span className=\"text-cyan-700\">•</span>}\r\n                    <span className=\"text-sm text-slate-400\">{character.nationality}</span>\r\n                  </>\r\n                )}\r\n                {character.social_score && (\r\n                  <>\r\n                    {(character.birth_date || character.nationality) && <span className=\"text-cyan-700\">•</span>}\r\n                    <span className=\"text-sm text-cyan-400\">Score: {character.social_score}</span>\r\n                  </>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            {character.blood_type && (\r\n              <Badge \r\n                variant=\"outline\" \r\n                className={`${bloodTypeColors[character.blood_type]} font-medium px-2.5 py-1 shadow-lg`}\r\n              >\r\n                {character.blood_type}\r\n              </Badge>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"mt-5 space-y-2.5\">\r\n            {character.profession && (\r\n              <div className=\"flex items-center gap-3 text-sm\">\r\n                <div className=\"w-8 h-8 rounded-lg bg-cyan-500/10 flex items-center justify-center border border-cyan-500/20\">\r\n                  <Briefcase className=\"w-4 h-4 text-cyan-400\" />\r\n                </div>\r\n                <span className=\"text-slate-300\">{character.profession}</span>\r\n              </div>\r\n            )}\r\n\r\n            {character.phone && (\r\n              <div className=\"flex items-center gap-3 text-sm\">\r\n                <div className=\"w-8 h-8 rounded-lg bg-cyan-500/10 flex items-center justify-center border border-cyan-500/20\">\r\n                  <Phone className=\"w-4 h-4 text-cyan-400\" />\r\n                </div>\r\n                <span className=\"text-slate-300\">{character.phone}</span>\r\n              </div>\r\n            )}\r\n\r\n            {character.address && (\r\n              <div className=\"flex items-center gap-3 text-sm\">\r\n                <div className=\"w-8 h-8 rounded-lg bg-purple-500/10 flex items-center justify-center border border-purple-500/20\">\r\n                  <MapPin className=\"w-4 h-4 text-purple-400\" />\r\n                </div>\r\n                <span className=\"text-slate-300 truncate\">{character.address}</span>\r\n              </div>\r\n            )}\r\n            \r\n            {character.doctor && (\r\n              <div className=\"flex items-center gap-3 text-sm\">\r\n                <div className=\"w-8 h-8 rounded-lg bg-pink-500/10 flex items-center justify-center border border-pink-500/20\">\r\n                  <Heart className=\"w-4 h-4 text-pink-400\" />\r\n                </div>\r\n                <span className=\"text-slate-300\">Dr. {character.doctor}</span>\r\n              </div>\r\n            )}\r\n\r\n            {safeTrustedPersons.length > 0 && (\r\n              <div className=\"space-y-1.5\">\r\n                <div className=\"flex items-center gap-2 text-xs text-indigo-400 font-medium\">\r\n                  <UserCheck className=\"w-3.5 h-3.5\" />\r\n                  Personne{safeTrustedPersons.length > 1 ? 's' : ''} de confiance\r\n                </div>\r\n                {safeTrustedPersons.map((person, index) => {\r\n                  let displayName = '';\r\n                  if (person.patient_id) {\r\n                    const patient = allCharacters.find(c => c._id === person.patient_id);\r\n                    if (patient) {\r\n                      displayName = `${patient.first_name} ${patient.last_name}`;\r\n                    }\r\n                  } else {\r\n                    displayName = person.name;\r\n                  }\r\n\r\n                  return displayName ? (\r\n                    <div key={index} className=\"flex items-center gap-2 text-sm ml-5\">\r\n                      <div className=\"w-1.5 h-1.5 rounded-full bg-indigo-400/50\" />\r\n                      <span className=\"text-slate-300\">{displayName}</span>\r\n                    </div>\r\n                  ) : null;\r\n                })}\r\n              </div>\r\n            )}\r\n\r\n            {/* Filter out trusted persons if they were wrongly stored as attachments */}\r\n            {character.attachments && Array.isArray(character.attachments) && character.attachments.filter(att => !att.name || !att.phone).length > 0 && (\r\n              <div className=\"flex items-center gap-3 text-sm\">\r\n                <div className=\"w-8 h-8 rounded-lg bg-amber-500/10 flex items-center justify-center border border-amber-500/20\">\r\n                  <Paperclip className=\"w-4 h-4 text-amber-400\" />\r\n                </div>\r\n                <span className=\"text-slate-300\">{\r\n                  character.attachments.filter(att => !att.name || !att.phone).length\r\n                } document{\r\n                  character.attachments.filter(att => !att.name || !att.phone).length > 1 ? 's' : ''\r\n                }</span>\r\n              </div>\r\n            )}\r\n            </div>\r\n\r\n          <div className=\"flex items-center gap-2 mt-5 pt-5 border-t border-cyan-500/20\">\r\n            <Button \r\n              variant=\"ghost\" \r\n              size=\"sm\" \r\n              className=\"flex-1 text-cyan-400 hover:text-cyan-300 hover:bg-cyan-500/10 border border-transparent hover:border-cyan-500/30\"\r\n              onClick={() => onView(character)}\r\n            >\r\n              <Eye className=\"w-4 h-4 mr-2\" />\r\n              Voir\r\n            </Button>\r\n            <Button \r\n              variant=\"ghost\" \r\n              size=\"sm\" \r\n              className=\"flex-1 text-purple-400 hover:text-purple-300 hover:bg-purple-500/10 border border-transparent hover:border-purple-500/30\"\r\n              onClick={() => onEdit(character)}\r\n            >\r\n              <Pencil className=\"w-4 h-4 mr-2\" />\r\n              Modifier\r\n            </Button>\r\n            <Button \r\n              variant=\"ghost\" \r\n              size=\"sm\" \r\n              className=\"text-pink-400 hover:text-pink-300 hover:bg-pink-500/10 border border-transparent hover:border-pink-500/30\"\r\n              onClick={() => onDelete(character)}\r\n            >\r\n              <Trash2 className=\"w-4 h-4\" />\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </Card>\r\n    </motion.div>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;;;;;;;;;;AAEA,MAAM,kBAAkB;IACtB,MAAM;IACN,MAAM;IACN,MAAM;IACN,MAAM;IACN,OAAO;IACP,OAAO;IACP,MAAM;IACN,MAAM;AACR;AAEe,SAAS,cAAc,EAAE,SAAS,EAAE,MAAM,EAAE,MAAM,EAAE,QAAQ,EAAE,iBAAiB,EAAE,EAAE,gBAAgB,EAAE,EAAE;IACpH,MAAM,qBAAqB,MAAM,OAAO,CAAC,kBAAkB,iBAAiB,EAAE;IAC9E,MAAM,WAAW,GAAG,UAAU,UAAU,EAAE,CAAC,EAAE,IAAI,KAAK,UAAU,SAAS,EAAE,CAAC,EAAE,IAAI,IAAI,CAAC,WAAW;IAElG,qBACE,6LAAC,uMAAM,CAAC,GAAG;QACT,SAAS;YAAE,SAAS;YAAG,GAAG;QAAG;QAC7B,SAAS;YAAE,SAAS;YAAG,GAAG;QAAE;QAC5B,MAAM;YAAE,SAAS;YAAG,GAAG,CAAC;QAAG;QAC3B,YAAY;YAAE,GAAG,CAAC;QAAE;QACpB,YAAY;YAAE,UAAU;QAAI;kBAE5B,cAAA,6LAAC,oIAAI;YAAC,WAAU;;8BACd,6LAAC;oBAAI,WAAU;;;;;;8BACf,6LAAC;oBACC,KAAI;oBACJ,KAAI;oBACJ,WAAU;;;;;;8BAEZ,6LAAC;oBAAI,WAAU;;;;;;8BACf,6LAAC;oBAAI,WAAU;;;;;;8BAEf,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAI,WAAU;;gCACZ,UAAU,UAAU,GACnB,CAAC;oCACC,IAAI,MAAM,UAAU,UAAU;oCAC9B,IAAI,OAAO,IAAI,MAAM,GAAG,OAAO,CAAC,IAAI,UAAU,CAAC,iBAAiB,CAAC,IAAI,UAAU,CAAC,WAAW,CAAC,IAAI,UAAU,CAAC,SAAS;wCAClH,MAAM,CAAC,sBAAsB,EAAE,KAAK;oCACtC;oCACA,qBAAO,6LAAC;wCACN,KAAK;wCACL,KAAK,GAAG,UAAU,UAAU,CAAC,CAAC,EAAE,UAAU,SAAS,EAAE;wCACrD,WAAU;;;;;;gCAEd,CAAC,oBAED,6LAAC;oCAAI,WAAU;8CACb,cAAA,6LAAC;wCAAK,WAAU;kDAAuC;;;;;;;;;;;8CAI3D,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAG,WAAU;;gDACX,UAAU,UAAU;gDAAC;gDAAE,UAAU,SAAS;;;;;;;sDAG7C,6LAAC;4CAAI,WAAU;;gDACZ,UAAU,UAAU,kBACnB,6LAAC;oDAAK,WAAU;8DACb,IAAA,kKAAM,EAAC,IAAI,KAAK,UAAU,UAAU,GAAG,cAAc;wDAAE,QAAQ,oJAAE;oDAAC;;;;;;gDAGtE,UAAU,WAAW,kBACpB;;wDACG,UAAU,UAAU,kBAAI,6LAAC;4DAAK,WAAU;sEAAgB;;;;;;sEACzD,6LAAC;4DAAK,WAAU;sEAA0B,UAAU,WAAW;;;;;;;;gDAGlE,UAAU,YAAY,kBACrB;;wDACG,CAAC,UAAU,UAAU,IAAI,UAAU,WAAW,mBAAK,6LAAC;4DAAK,WAAU;sEAAgB;;;;;;sEACpF,6LAAC;4DAAK,WAAU;;gEAAwB;gEAAQ,UAAU,YAAY;;;;;;;;;;;;;;;;;;;;;gCAM7E,UAAU,UAAU,kBACnB,6LAAC,sIAAK;oCACJ,SAAQ;oCACR,WAAW,GAAG,eAAe,CAAC,UAAU,UAAU,CAAC,CAAC,kCAAkC,CAAC;8CAEtF,UAAU,UAAU;;;;;;;;;;;;sCAK3B,6LAAC;4BAAI,WAAU;;gCACZ,UAAU,UAAU,kBACnB,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAI,WAAU;sDACb,cAAA,6LAAC,4NAAS;gDAAC,WAAU;;;;;;;;;;;sDAEvB,6LAAC;4CAAK,WAAU;sDAAkB,UAAU,UAAU;;;;;;;;;;;;gCAIzD,UAAU,KAAK,kBACd,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAI,WAAU;sDACb,cAAA,6LAAC,gNAAK;gDAAC,WAAU;;;;;;;;;;;sDAEnB,6LAAC;4CAAK,WAAU;sDAAkB,UAAU,KAAK;;;;;;;;;;;;gCAIpD,UAAU,OAAO,kBAChB,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAI,WAAU;sDACb,cAAA,6LAAC,uNAAM;gDAAC,WAAU;;;;;;;;;;;sDAEpB,6LAAC;4CAAK,WAAU;sDAA2B,UAAU,OAAO;;;;;;;;;;;;gCAI/D,UAAU,MAAM,kBACf,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAI,WAAU;sDACb,cAAA,6LAAC,gNAAK;gDAAC,WAAU;;;;;;;;;;;sDAEnB,6LAAC;4CAAK,WAAU;;gDAAiB;gDAAK,UAAU,MAAM;;;;;;;;;;;;;gCAIzD,mBAAmB,MAAM,GAAG,mBAC3B,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAI,WAAU;;8DACb,6LAAC,gOAAS;oDAAC,WAAU;;;;;;gDAAgB;gDAC5B,mBAAmB,MAAM,GAAG,IAAI,MAAM;gDAAG;;;;;;;wCAEnD,mBAAmB,GAAG,CAAC,CAAC,QAAQ;4CAC/B,IAAI,cAAc;4CAClB,IAAI,OAAO,UAAU,EAAE;gDACrB,MAAM,UAAU,cAAc,IAAI,CAAC,CAAA,IAAK,EAAE,GAAG,KAAK,OAAO,UAAU;gDACnE,IAAI,SAAS;oDACX,cAAc,GAAG,QAAQ,UAAU,CAAC,CAAC,EAAE,QAAQ,SAAS,EAAE;gDAC5D;4CACF,OAAO;gDACL,cAAc,OAAO,IAAI;4CAC3B;4CAEA,OAAO,4BACL,6LAAC;gDAAgB,WAAU;;kEACzB,6LAAC;wDAAI,WAAU;;;;;;kEACf,6LAAC;wDAAK,WAAU;kEAAkB;;;;;;;+CAF1B;;;;uDAIR;wCACN;;;;;;;gCAKH,UAAU,WAAW,IAAI,MAAM,OAAO,CAAC,UAAU,WAAW,KAAK,UAAU,WAAW,CAAC,MAAM,CAAC,CAAA,MAAO,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,KAAK,EAAE,MAAM,GAAG,mBACtI,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAI,WAAU;sDACb,cAAA,6LAAC,4NAAS;gDAAC,WAAU;;;;;;;;;;;sDAEvB,6LAAC;4CAAK,WAAU;;gDACd,UAAU,WAAW,CAAC,MAAM,CAAC,CAAA,MAAO,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,KAAK,EAAE,MAAM;gDACpE;gDACC,UAAU,WAAW,CAAC,MAAM,CAAC,CAAA,MAAO,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,KAAK,EAAE,MAAM,GAAG,IAAI,MAAM;;;;;;;;;;;;;;;;;;;sCAMxF,6LAAC;4BAAI,WAAU;;8CACb,6LAAC,wIAAM;oCACL,SAAQ;oCACR,MAAK;oCACL,WAAU;oCACV,SAAS,IAAM,OAAO;;sDAEtB,6LAAC,0MAAG;4CAAC,WAAU;;;;;;wCAAiB;;;;;;;8CAGlC,6LAAC,wIAAM;oCACL,SAAQ;oCACR,MAAK;oCACL,WAAU;oCACV,SAAS,IAAM,OAAO;;sDAEtB,6LAAC,mNAAM;4CAAC,WAAU;;;;;;wCAAiB;;;;;;;8CAGrC,6LAAC,wIAAM;oCACL,SAAQ;oCACR,MAAK;oCACL,WAAU;oCACV,SAAS,IAAM,SAAS;8CAExB,cAAA,6LAAC,uNAAM;wCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOhC;KA7LwB"}},
    {"offset": {"line": 1156, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/elise/Documents/novalife-app/lib/compressImage.js"],"sourcesContent":["// Compresse une image avant de la convertir en base64\r\nexport function compressImage(file, maxWidth = 300, maxHeight = 300, quality = 0.7) {\r\n  return new Promise((resolve, reject) => {\r\n    const img = new window.Image();\r\n    const reader = new window.FileReader();\r\n    reader.onload = (e) => {\r\n      img.src = e.target.result;\r\n    };\r\n    img.onload = () => {\r\n      const canvas = document.createElement('canvas');\r\n      let width = img.width;\r\n      let height = img.height;\r\n      if (width > maxWidth || height > maxHeight) {\r\n        if (width / height > maxWidth / maxHeight) {\r\n          height = Math.round((height * maxWidth) / width);\r\n          width = maxWidth;\r\n        } else {\r\n          width = Math.round((width * maxHeight) / height);\r\n          height = maxHeight;\r\n        }\r\n      }\r\n      canvas.width = width;\r\n      canvas.height = height;\r\n      const ctx = canvas.getContext('2d');\r\n      ctx.drawImage(img, 0, 0, width, height);\r\n      canvas.toBlob(\r\n        (blob) => {\r\n          const reader2 = new window.FileReader();\r\n          reader2.onloadend = () => {\r\n            resolve(reader2.result);\r\n          };\r\n          reader2.onerror = reject;\r\n          reader2.readAsDataURL(blob);\r\n        },\r\n        'image/jpeg',\r\n        quality\r\n      );\r\n    };\r\n    img.onerror = reject;\r\n    reader.onerror = reject;\r\n    reader.readAsDataURL(file);\r\n  });\r\n}\r\n"],"names":[],"mappings":"AAAA,sDAAsD;;;;;AAC/C,SAAS,cAAc,IAAI,EAAE,WAAW,GAAG,EAAE,YAAY,GAAG,EAAE,UAAU,GAAG;IAChF,OAAO,IAAI,QAAQ,CAAC,SAAS;QAC3B,MAAM,MAAM,IAAI,OAAO,KAAK;QAC5B,MAAM,SAAS,IAAI,OAAO,UAAU;QACpC,OAAO,MAAM,GAAG,CAAC;YACf,IAAI,GAAG,GAAG,EAAE,MAAM,CAAC,MAAM;QAC3B;QACA,IAAI,MAAM,GAAG;YACX,MAAM,SAAS,SAAS,aAAa,CAAC;YACtC,IAAI,QAAQ,IAAI,KAAK;YACrB,IAAI,SAAS,IAAI,MAAM;YACvB,IAAI,QAAQ,YAAY,SAAS,WAAW;gBAC1C,IAAI,QAAQ,SAAS,WAAW,WAAW;oBACzC,SAAS,KAAK,KAAK,CAAC,AAAC,SAAS,WAAY;oBAC1C,QAAQ;gBACV,OAAO;oBACL,QAAQ,KAAK,KAAK,CAAC,AAAC,QAAQ,YAAa;oBACzC,SAAS;gBACX;YACF;YACA,OAAO,KAAK,GAAG;YACf,OAAO,MAAM,GAAG;YAChB,MAAM,MAAM,OAAO,UAAU,CAAC;YAC9B,IAAI,SAAS,CAAC,KAAK,GAAG,GAAG,OAAO;YAChC,OAAO,MAAM,CACX,CAAC;gBACC,MAAM,UAAU,IAAI,OAAO,UAAU;gBACrC,QAAQ,SAAS,GAAG;oBAClB,QAAQ,QAAQ,MAAM;gBACxB;gBACA,QAAQ,OAAO,GAAG;gBAClB,QAAQ,aAAa,CAAC;YACxB,GACA,cACA;QAEJ;QACA,IAAI,OAAO,GAAG;QACd,OAAO,OAAO,GAAG;QACjB,OAAO,aAAa,CAAC;IACvB;AACF"}},
    {"offset": {"line": 1206, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/elise/Documents/novalife-app/lib/uploadAvatar.js"],"sourcesContent":["// Utilitaire pour uploader un fichier image vers l'API GridFS\r\nexport async function uploadAvatarToGridFS(file) {\r\n  const formData = new FormData();\r\n  formData.append('avatar', file);\r\n  const res = await fetch('/api/characters/upload-avatar', {\r\n    method: 'POST',\r\n    body: formData,\r\n  });\r\n  if (!res.ok) throw new Error('Erreur upload image');\r\n  return res.json(); // { fileId, fileUrl }\r\n}\r\n"],"names":[],"mappings":"AAAA,8DAA8D;;;;;AACvD,eAAe,qBAAqB,IAAI;IAC7C,MAAM,WAAW,IAAI;IACrB,SAAS,MAAM,CAAC,UAAU;IAC1B,MAAM,MAAM,MAAM,MAAM,iCAAiC;QACvD,QAAQ;QACR,MAAM;IACR;IACA,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM;IAC7B,OAAO,IAAI,IAAI,IAAI,sBAAsB;AAC3C"}},
    {"offset": {"line": 1228, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/elise/Documents/novalife-app/components/ui/label.jsx"],"sourcesContent":["import * as React from \"react\"\r\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\r\nimport { cva } from \"class-variance-authority\";\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst labelVariants = cva(\r\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\r\n)\r\n\r\nconst Label = React.forwardRef(({ className, ...props }, ref) => (\r\n  <LabelPrimitive.Root ref={ref} className={cn(labelVariants(), className)} {...props} />\r\n))\r\nLabel.displayName = LabelPrimitive.Root.displayName\r\n\r\nexport { Label }\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,gBAAgB,IAAA,0KAAG,EACvB;AAGF,MAAM,sBAAQ,2KAAgB,MAAC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACvD,6LAAC,4KAAmB;QAAC,KAAK;QAAK,WAAW,IAAA,qHAAE,EAAC,iBAAiB;QAAa,GAAG,KAAK;;;;;;;AAErF,MAAM,WAAW,GAAG,4KAAmB,CAAC,WAAW"}},
    {"offset": {"line": 1265, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/elise/Documents/novalife-app/components/ui/textarea.jsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Textarea = React.forwardRef(({ className, ...props }, ref) => {\r\n  return (\r\n    (<textarea\r\n      className={cn(\r\n        \"flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\r\n        className\r\n      )}\r\n      ref={ref}\r\n      {...props} />)\r\n  );\r\n})\r\nTextarea.displayName = \"Textarea\"\r\n\r\nexport { Textarea }\r\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAEA,MAAM,yBAAW,2KAAgB,MAAC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IAC1D,qBACG,6LAAC;QACA,WAAW,IAAA,qHAAE,EACX,6QACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAEf;;AACA,SAAS,WAAW,GAAG"}},
    {"offset": {"line": 1299, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/elise/Documents/novalife-app/components/ui/select.jsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\r\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Select = SelectPrimitive.Root\r\n\r\nconst SelectGroup = SelectPrimitive.Group\r\n\r\nconst SelectValue = SelectPrimitive.Value\r\n\r\nconst SelectTrigger = React.forwardRef(({ className, children, ...props }, ref) => (\r\n  <SelectPrimitive.Trigger\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\r\n      className\r\n    )}\r\n    {...props}>\r\n    {children}\r\n    <SelectPrimitive.Icon asChild>\r\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\r\n    </SelectPrimitive.Icon>\r\n  </SelectPrimitive.Trigger>\r\n))\r\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\r\n\r\nconst SelectScrollUpButton = React.forwardRef(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.ScrollUpButton\r\n    ref={ref}\r\n    className={cn(\"flex cursor-default items-center justify-center py-1\", className)}\r\n    {...props}>\r\n    <ChevronUp className=\"h-4 w-4\" />\r\n  </SelectPrimitive.ScrollUpButton>\r\n))\r\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\r\n\r\nconst SelectScrollDownButton = React.forwardRef(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.ScrollDownButton\r\n    ref={ref}\r\n    className={cn(\"flex cursor-default items-center justify-center py-1\", className)}\r\n    {...props}>\r\n    <ChevronDown className=\"h-4 w-4\" />\r\n  </SelectPrimitive.ScrollDownButton>\r\n))\r\nSelectScrollDownButton.displayName =\r\n  SelectPrimitive.ScrollDownButton.displayName\r\n\r\nconst SelectContent = React.forwardRef(({ className, children, position = \"popper\", ...props }, ref) => (\r\n  <SelectPrimitive.Portal>\r\n    <SelectPrimitive.Content\r\n      ref={ref}\r\n      className={cn(\r\n        \"relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\r\n        position === \"popper\" &&\r\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\r\n        className\r\n      )}\r\n      position={position}\r\n      {...props}>\r\n      <SelectScrollUpButton />\r\n      <SelectPrimitive.Viewport\r\n        className={cn(\"p-1\", position === \"popper\" &&\r\n          \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\")}>\r\n        {children}\r\n      </SelectPrimitive.Viewport>\r\n      <SelectScrollDownButton />\r\n    </SelectPrimitive.Content>\r\n  </SelectPrimitive.Portal>\r\n))\r\nSelectContent.displayName = SelectPrimitive.Content.displayName\r\n\r\nconst SelectLabel = React.forwardRef(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.Label\r\n    ref={ref}\r\n    className={cn(\"px-2 py-1.5 text-sm font-semibold\", className)}\r\n    {...props} />\r\n))\r\nSelectLabel.displayName = SelectPrimitive.Label.displayName\r\n\r\nconst SelectItem = React.forwardRef(({ className, children, ...props }, ref) => (\r\n  <SelectPrimitive.Item\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\r\n      className\r\n    )}\r\n    {...props}>\r\n    <span className=\"absolute right-2 flex h-3.5 w-3.5 items-center justify-center\">\r\n      <SelectPrimitive.ItemIndicator>\r\n        <Check className=\"h-4 w-4\" />\r\n      </SelectPrimitive.ItemIndicator>\r\n    </span>\r\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\r\n  </SelectPrimitive.Item>\r\n))\r\nSelectItem.displayName = SelectPrimitive.Item.displayName\r\n\r\nconst SelectSeparator = React.forwardRef(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.Separator\r\n    ref={ref}\r\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\r\n    {...props} />\r\n))\r\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\r\n\r\nexport {\r\n  Select,\r\n  SelectGroup,\r\n  SelectValue,\r\n  SelectTrigger,\r\n  SelectContent,\r\n  SelectLabel,\r\n  SelectItem,\r\n  SelectSeparator,\r\n  SelectScrollUpButton,\r\n  SelectScrollDownButton,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AAAA;AAAA;AAEA;AANA;;;;;;AAQA,MAAM,SAAS,6KAAoB;AAEnC,MAAM,cAAc,8KAAqB;AAEzC,MAAM,cAAc,8KAAqB;AAEzC,MAAM,8BAAgB,2KAAgB,MAAC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACzE,6LAAC,gLAAuB;QACtB,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,kUACA;QAED,GAAG,KAAK;;YACR;0BACD,6LAAC,6KAAoB;gBAAC,OAAO;0BAC3B,cAAA,6LAAC,sOAAW;oBAAC,WAAU;;;;;;;;;;;;;;;;;;AAI7B,cAAc,WAAW,GAAG,gLAAuB,CAAC,WAAW;AAE/D,MAAM,qCAAuB,2KAAgB,CAAC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACtE,6LAAC,uLAA8B;QAC7B,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,wDAAwD;QACrE,GAAG,KAAK;kBACT,cAAA,6LAAC,gOAAS;YAAC,WAAU;;;;;;;;;;;MALnB;AAQN,qBAAqB,WAAW,GAAG,uLAA8B,CAAC,WAAW;AAE7E,MAAM,uCAAyB,2KAAgB,CAAC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxE,6LAAC,yLAAgC;QAC/B,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,wDAAwD;QACrE,GAAG,KAAK;kBACT,cAAA,6LAAC,sOAAW;YAAC,WAAU;;;;;;;;;;;MALrB;AAQN,uBAAuB,WAAW,GAChC,yLAAgC,CAAC,WAAW;AAE9C,MAAM,8BAAgB,2KAAgB,OAAC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,WAAW,QAAQ,EAAE,GAAG,OAAO,EAAE,oBAC9F,6LAAC,+KAAsB;kBACrB,cAAA,6LAAC,gLAAuB;YACtB,KAAK;YACL,WAAW,IAAA,qHAAE,EACX,ucACA,aAAa,YACX,mIACF;YAEF,UAAU;YACT,GAAG,KAAK;;8BACT,6LAAC;;;;;8BACD,6LAAC,iLAAwB;oBACvB,WAAW,IAAA,qHAAE,EAAC,OAAO,aAAa,YAChC;8BACD;;;;;;8BAEH,6LAAC;;;;;;;;;;;;;;;;;AAIP,cAAc,WAAW,GAAG,gLAAuB,CAAC,WAAW;AAE/D,MAAM,4BAAc,2KAAgB,OAAC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC7D,6LAAC,8KAAqB;QACpB,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,qCAAqC;QAClD,GAAG,KAAK;;;;;;;AAEb,YAAY,WAAW,GAAG,8KAAqB,CAAC,WAAW;AAE3D,MAAM,2BAAa,2KAAgB,OAAC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACtE,6LAAC,6KAAoB;QACnB,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,6NACA;QAED,GAAG,KAAK;;0BACT,6LAAC;gBAAK,WAAU;0BACd,cAAA,6LAAC,sLAA6B;8BAC5B,cAAA,6LAAC,gNAAK;wBAAC,WAAU;;;;;;;;;;;;;;;;0BAGrB,6LAAC,iLAAwB;0BAAE;;;;;;;;;;;;;AAG/B,WAAW,WAAW,GAAG,6KAAoB,CAAC,WAAW;AAEzD,MAAM,gCAAkB,2KAAgB,QAAC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACjE,6LAAC,kLAAyB;QACxB,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,4BAA4B;QACzC,GAAG,KAAK;;;;;;;AAEb,gBAAgB,WAAW,GAAG,kLAAyB,CAAC,WAAW"}},
    {"offset": {"line": 1522, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/elise/Documents/novalife-app/api/base44Client.ts"],"sourcesContent":["// Base44 Client Configuration\r\n// This client uses localStorage for demo purposes\r\n\r\ninterface Character {\r\n  id: string;\r\n  first_name: string;\r\n  last_name: string;\r\n  birth_date?: string;\r\n  nationality?: string;\r\n  phone?: string;\r\n  social_score?: string;\r\n  profession?: string;\r\n  address?: string;\r\n  blood_type?: string;\r\n  doctor?: string;\r\n  medical_history?: string;\r\n  trusted_persons?: any[];\r\n  avatar_url?: string;\r\n  attachments?: any[];\r\n  created_date?: string;\r\n  updated_date?: string;\r\n}\r\n\r\n// Helper to get localStorage data (safe for SSR)\r\nconst getStorageData = (key: string): any[] => {\r\n  if (typeof window === 'undefined') return [];\r\n  try {\r\n    const data = localStorage.getItem(key);\r\n    return data ? JSON.parse(data) : [];\r\n  } catch {\r\n    return [];\r\n  }\r\n};\r\n\r\n// Helper to save localStorage data\r\nconst saveStorageData = (key: string, data: any[]): void => {\r\n  if (typeof window === 'undefined') return;\r\n  try {\r\n    localStorage.setItem(key, JSON.stringify(data));\r\n  } catch (error) {\r\n    console.error('Error saving to localStorage:', error);\r\n  }\r\n};\r\n\r\nconst STORAGE_KEY = 'characters_db';\r\n\r\n// Character entity methods\r\nconst characterMethods = {\r\n  list: async (sortBy: string = '-created_date') => {\r\n    const characters = getStorageData(STORAGE_KEY);\r\n    \r\n    // Sort by created_date descending by default\r\n    if (sortBy === '-created_date') {\r\n      return characters.sort((a, b) => \r\n        new Date(b.created_date || 0).getTime() - new Date(a.created_date || 0).getTime()\r\n      );\r\n    }\r\n    return characters;\r\n  },\r\n  \r\n  get: async (id: string) => {\r\n    const characters = getStorageData(STORAGE_KEY);\r\n    return characters.find(c => c.id === id) || null;\r\n  },\r\n  \r\n  create: async (data: any) => {\r\n    const characters = getStorageData(STORAGE_KEY);\r\n    const id = Date.now().toString();\r\n    const newCharacter: Character = {\r\n      ...data,\r\n      id,\r\n      created_date: new Date().toISOString(),\r\n      updated_date: new Date().toISOString(),\r\n    };\r\n    characters.push(newCharacter);\r\n    saveStorageData(STORAGE_KEY, characters);\r\n    return newCharacter;\r\n  },\r\n  \r\n  update: async (id: string, data: any) => {\r\n    const characters = getStorageData(STORAGE_KEY);\r\n    const index = characters.findIndex(c => c.id === id);\r\n    if (index !== -1) {\r\n      characters[index] = {\r\n        ...characters[index],\r\n        ...data,\r\n        id,\r\n        updated_date: new Date().toISOString(),\r\n      };\r\n      saveStorageData(STORAGE_KEY, characters);\r\n      return characters[index];\r\n    }\r\n    return null;\r\n  },\r\n  \r\n  delete: async (id: string) => {\r\n    const characters = getStorageData(STORAGE_KEY);\r\n    const filtered = characters.filter(c => c.id !== id);\r\n    saveStorageData(STORAGE_KEY, filtered);\r\n    return { success: true };\r\n  },\r\n};\r\n\r\n// Integration methods\r\nconst integrationMethods = {\r\n  Core: {\r\n    UploadFile: async (data: { file: File }) => {\r\n      // Create a blob URL for the file\r\n      const file_url = URL.createObjectURL(data.file);\r\n      return {\r\n        file_url,\r\n        file_name: data.file.name,\r\n        file_size: data.file.size,\r\n      };\r\n    },\r\n  },\r\n};\r\n\r\n// Export base44 client\r\nexport const base44 = {\r\n  entities: {\r\n    Character: characterMethods,\r\n  },\r\n  integrations: integrationMethods,\r\n};\r\n"],"names":[],"mappings":"AAAA,8BAA8B;AAC9B,kDAAkD;;;;;AAsBlD,iDAAiD;AACjD,MAAM,iBAAiB,CAAC;IACtB;;IACA,IAAI;QACF,MAAM,OAAO,aAAa,OAAO,CAAC;QAClC,OAAO,OAAO,KAAK,KAAK,CAAC,QAAQ,EAAE;IACrC,EAAE,OAAM;QACN,OAAO,EAAE;IACX;AACF;AAEA,mCAAmC;AACnC,MAAM,kBAAkB,CAAC,KAAa;IACpC;;IACA,IAAI;QACF,aAAa,OAAO,CAAC,KAAK,KAAK,SAAS,CAAC;IAC3C,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,iCAAiC;IACjD;AACF;AAEA,MAAM,cAAc;AAEpB,2BAA2B;AAC3B,MAAM,mBAAmB;IACvB,MAAM,OAAO,SAAiB,eAAe;QAC3C,MAAM,aAAa,eAAe;QAElC,6CAA6C;QAC7C,IAAI,WAAW,iBAAiB;YAC9B,OAAO,WAAW,IAAI,CAAC,CAAC,GAAG,IACzB,IAAI,KAAK,EAAE,YAAY,IAAI,GAAG,OAAO,KAAK,IAAI,KAAK,EAAE,YAAY,IAAI,GAAG,OAAO;QAEnF;QACA,OAAO;IACT;IAEA,KAAK,OAAO;QACV,MAAM,aAAa,eAAe;QAClC,OAAO,WAAW,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,OAAO;IAC9C;IAEA,QAAQ,OAAO;QACb,MAAM,aAAa,eAAe;QAClC,MAAM,KAAK,KAAK,GAAG,GAAG,QAAQ;QAC9B,MAAM,eAA0B;YAC9B,GAAG,IAAI;YACP;YACA,cAAc,IAAI,OAAO,WAAW;YACpC,cAAc,IAAI,OAAO,WAAW;QACtC;QACA,WAAW,IAAI,CAAC;QAChB,gBAAgB,aAAa;QAC7B,OAAO;IACT;IAEA,QAAQ,OAAO,IAAY;QACzB,MAAM,aAAa,eAAe;QAClC,MAAM,QAAQ,WAAW,SAAS,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;QACjD,IAAI,UAAU,CAAC,GAAG;YAChB,UAAU,CAAC,MAAM,GAAG;gBAClB,GAAG,UAAU,CAAC,MAAM;gBACpB,GAAG,IAAI;gBACP;gBACA,cAAc,IAAI,OAAO,WAAW;YACtC;YACA,gBAAgB,aAAa;YAC7B,OAAO,UAAU,CAAC,MAAM;QAC1B;QACA,OAAO;IACT;IAEA,QAAQ,OAAO;QACb,MAAM,aAAa,eAAe;QAClC,MAAM,WAAW,WAAW,MAAM,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;QACjD,gBAAgB,aAAa;QAC7B,OAAO;YAAE,SAAS;QAAK;IACzB;AACF;AAEA,sBAAsB;AACtB,MAAM,qBAAqB;IACzB,MAAM;QACJ,YAAY,OAAO;YACjB,iCAAiC;YACjC,MAAM,WAAW,IAAI,eAAe,CAAC,KAAK,IAAI;YAC9C,OAAO;gBACL;gBACA,WAAW,KAAK,IAAI,CAAC,IAAI;gBACzB,WAAW,KAAK,IAAI,CAAC,IAAI;YAC3B;QACF;IACF;AACF;AAGO,MAAM,SAAS;IACpB,UAAU;QACR,WAAW;IACb;IACA,cAAc;AAChB"}},
    {"offset": {"line": 1628, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/elise/Documents/novalife-app/components/Characters/AttachmentsManager.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { base44 } from '@/api/base44Client';\r\nimport { FileText, Image as ImageIcon, Link as LinkIcon, Upload, X, Loader2, ExternalLink } from 'lucide-react';\r\n\r\nexport default function AttachmentsManager({ attachments = [], onChange }) {\r\n  // Always ensure attachments is an array\r\n  const safeAttachments = Array.isArray(attachments) ? attachments : [];\r\n  const [isAdding, setIsAdding] = useState(false);\r\n  const [addType, setAddType] = useState('document');\r\n  const [linkName, setLinkName] = useState('');\r\n  const [linkUrl, setLinkUrl] = useState('');\r\n  const [uploading, setUploading] = useState(false);\r\n\r\n  const handleFileUpload = async (e, type) => {\r\n    const file = e.target.files?.[0];\r\n    if (!file) return;\r\n\r\n    setUploading(true);\r\n    try {\r\n      const { file_url } = await base44.integrations.Core.UploadFile({ file });\r\n      \r\n      const newAttachment = {\r\n        type,\r\n        name: file.name,\r\n        url: file_url,\r\n        added_date: new Date().toISOString()\r\n      };\r\n\r\n      onChange([...attachments, newAttachment]);\r\n      setIsAdding(false);\r\n    } catch (error) {\r\n      console.error('Upload error:', error);\r\n    } finally {\r\n      setUploading(false);\r\n    }\r\n  };\r\n\r\n  const handleAddLink = () => {\r\n    if (!linkName || !linkUrl) return;\r\n\r\n    const newAttachment = {\r\n      type: 'link',\r\n      name: linkName,\r\n      url: linkUrl,\r\n      added_date: new Date().toISOString()\r\n    };\r\n\r\n    onChange([...attachments, newAttachment]);\r\n    setLinkName('');\r\n    setLinkUrl('');\r\n    setIsAdding(false);\r\n  };\r\n\r\n  const handleRemove = (index) => {\r\n    onChange(attachments.filter((_, i) => i !== index));\r\n  };\r\n\r\n  const getIcon = (type) => {\r\n    switch (type) {\r\n      case 'image': return <ImageIcon className=\"w-4 h-4\" />;\r\n      case 'link': return <LinkIcon className=\"w-4 h-4\" />;\r\n      default: return <FileText className=\"w-4 h-4\" />;\r\n    }\r\n  };\r\n\r\n  const getColor = (type) => {\r\n    switch (type) {\r\n      case 'image': return 'bg-purple-500/10 border-purple-500/30 text-purple-400';\r\n      case 'link': return 'bg-blue-500/10 border-blue-500/30 text-blue-400';\r\n      default: return 'bg-cyan-500/10 border-cyan-500/30 text-cyan-400';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-3\">\r\n      {/* Liste des pièces jointes */}\r\n      {safeAttachments.length > 0 && (\r\n        <div className=\"space-y-2\">\r\n          {safeAttachments.map((attachment, index) => (\r\n            <div\r\n              key={index}\r\n              className={`flex items-center gap-3 p-3 rounded-lg border ${getColor(attachment.type)}`}\r\n            >\r\n              <div className=\"flex-shrink-0\">\r\n                {getIcon(attachment.type)}\r\n              </div>\r\n              <div className=\"flex-1 min-w-0\">\r\n                <p className=\"text-sm font-medium text-slate-200 truncate\">{attachment.name}</p>\r\n              </div>\r\n              <a\r\n                href={attachment.url}\r\n                target=\"_blank\"\r\n                rel=\"noopener noreferrer\"\r\n                className=\"flex-shrink-0 text-slate-400 hover:text-slate-200\"\r\n              >\r\n                <ExternalLink className=\"w-4 h-4\" />\r\n              </a>\r\n              <button\r\n                onClick={() => handleRemove(index)}\r\n                className=\"flex-shrink-0 text-slate-400 hover:text-red-400\"\r\n              >\r\n                <X className=\"w-4 h-4\" />\r\n              </button>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      {/* Formulaire d'ajout */}\r\n      {isAdding ? (\r\n        <div className=\"p-4 bg-slate-800/50 rounded-lg border border-cyan-500/30 space-y-3\">\r\n          <div className=\"flex gap-2\">\r\n            <Button\r\n              type=\"button\"\r\n              size=\"sm\"\r\n              variant={addType === 'document' ? 'default' : 'outline'}\r\n              onClick={() => setAddType('document')}\r\n              className=\"flex-1\"\r\n            >\r\n              <FileText className=\"w-4 h-4 mr-2\" />\r\n              Document\r\n            </Button>\r\n            <Button\r\n              type=\"button\"\r\n              size=\"sm\"\r\n              variant={addType === 'image' ? 'default' : 'outline'}\r\n              onClick={() => setAddType('image')}\r\n              className=\"flex-1\"\r\n            >\r\n              <ImageIcon className=\"w-4 h-4 mr-2\" />\r\n              Image\r\n            </Button>\r\n            <Button\r\n              type=\"button\"\r\n              size=\"sm\"\r\n              variant={addType === 'link' ? 'default' : 'outline'}\r\n              onClick={() => setAddType('link')}\r\n              className=\"flex-1\"\r\n            >\r\n              <LinkIcon className=\"w-4 h-4 mr-2\" />\r\n              Lien\r\n            </Button>\r\n          </div>\r\n\r\n          {addType === 'link' ? (\r\n            <div className=\"space-y-2\">\r\n              <div>\r\n                <Label htmlFor=\"link_name\" className=\"text-slate-300\">Nom du lien</Label>\r\n                <Input\r\n                  id=\"link_name\"\r\n                  value={linkName}\r\n                  onChange={(e) => setLinkName(e.target.value)}\r\n                  placeholder=\"Mon document\"\r\n                  className=\"bg-slate-800/50 border-cyan-500/30 text-cyan-100\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label htmlFor=\"link_url\" className=\"text-slate-300\">URL</Label>\r\n                <Input\r\n                  id=\"link_url\"\r\n                  value={linkUrl}\r\n                  onChange={(e) => setLinkUrl(e.target.value)}\r\n                  placeholder=\"https://...\"\r\n                  className=\"bg-slate-800/50 border-cyan-500/30 text-cyan-100\"\r\n                />\r\n              </div>\r\n              <div className=\"flex gap-2\">\r\n                <Button\r\n                  type=\"button\"\r\n                  size=\"sm\"\r\n                  onClick={handleAddLink}\r\n                  disabled={!linkName || !linkUrl}\r\n                  className=\"flex-1\"\r\n                >\r\n                  Ajouter\r\n                </Button>\r\n                <Button\r\n                  type=\"button\"\r\n                  size=\"sm\"\r\n                  variant=\"outline\"\r\n                  onClick={() => {\r\n                    setIsAdding(false);\r\n                    setLinkName('');\r\n                    setLinkUrl('');\r\n                  }}\r\n                  className=\"flex-1\"\r\n                >\r\n                  Annuler\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"space-y-2\">\r\n              <Label className=\"text-slate-300\">\r\n                {uploading ? 'Upload en cours...' : `Sélectionner ${addType === 'image' ? 'une image' : 'un document'}`}\r\n              </Label>\r\n              <div className=\"flex gap-2\">\r\n                <Input\r\n                  type=\"file\"\r\n                  accept={addType === 'image' ? 'image/*' : '*'}\r\n                  onChange={(e) => handleFileUpload(e, addType)}\r\n                  disabled={uploading}\r\n                  className=\"bg-slate-800/50 border-cyan-500/30 text-cyan-100\"\r\n                />\r\n                <Button\r\n                  type=\"button\"\r\n                  size=\"sm\"\r\n                  variant=\"outline\"\r\n                  onClick={() => setIsAdding(false)}\r\n                  disabled={uploading}\r\n                >\r\n                  Annuler\r\n                </Button>\r\n              </div>\r\n              {uploading && (\r\n                <div className=\"flex items-center gap-2 text-sm text-cyan-400\">\r\n                  <Loader2 className=\"w-4 h-4 animate-spin\" />\r\n                  Upload en cours...\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n      ) : (\r\n        <Button\r\n          type=\"button\"\r\n          variant=\"outline\"\r\n          onClick={() => setIsAdding(true)}\r\n          className=\"w-full border-cyan-500/30 text-cyan-400 hover:bg-cyan-500/10\"\r\n        >\r\n          <Upload className=\"w-4 h-4 mr-2\" />\r\n          Ajouter un fichier ou un lien\r\n        </Button>\r\n      )}\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2103, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/elise/Documents/novalife-app/components/Characters/TrustedPersonsManager.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { UserCheck, X, Plus } from 'lucide-react';\r\n\r\nexport default function TrustedPersonsManager({ trustedPersons = [], onChange, allCharacters = [], currentCharacterId }) {\r\n  // Always ensure trustedPersons is an array\r\n  const safeTrustedPersons = Array.isArray(trustedPersons) ? trustedPersons : [];\r\n  // Suppression de la pagination, retour à l'affichage complet\r\n  const [isAdding, setIsAdding] = useState(false);\r\n  const [patientId, setPatientId] = useState('');\r\n  const [manualName, setManualName] = useState('');\r\n  const [manualPhone, setManualPhone] = useState('');\r\n  const handleAdd = () => {\r\n    if (patientId) {\r\n      onChange([...trustedPersons, { patient_id: patientId }]);\r\n    } else if (manualName) {\r\n      onChange([...trustedPersons, { name: manualName, phone: manualPhone }]);\r\n    }\r\n    resetForm();\r\n  };\r\n\r\n  const resetForm = () => {\r\n    setIsAdding(false);\r\n    setPatientId('');\r\n    setManualName('');\r\n    setManualPhone('');\r\n  };\r\n\r\n  const handleRemove = (index) => {\r\n    onChange(trustedPersons.filter((_, i) => i !== index));\r\n  };\r\n\r\n  const getPersonDisplay = (person) => {\r\n    if (person.patient_id) {\r\n      const patient = allCharacters.find(c => c.id === person.patient_id);\r\n      if (patient) {\r\n        return `${patient.first_name} ${patient.last_name}${patient.phone ? ` - ${patient.phone}` : ''}`;\r\n      }\r\n      return 'Patient non trouvé';\r\n    }\r\n    return `${person.name}${person.phone ? ` - ${person.phone}` : ''}`;\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-3\">\r\n      {safeTrustedPersons.length > 0 && (\r\n        <div className=\"space-y-2\">\r\n          {safeTrustedPersons.map((person, index) => (\r\n            <div\r\n              key={index}\r\n              className=\"flex items-center gap-3 p-3 rounded-lg bg-indigo-500/10 border border-indigo-500/30\"\r\n            >\r\n              <UserCheck className=\"w-4 h-4 text-indigo-400 flex-shrink-0\" />\r\n              <span className=\"flex-1 text-sm text-slate-300\">{getPersonDisplay(person)}</span>\r\n              <button\r\n                onClick={() => handleRemove(index)}\r\n                className=\"text-slate-400 hover:text-red-400 flex-shrink-0\"\r\n              >\r\n                <X className=\"w-4 h-4\" />\r\n              </button>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      {isAdding ? (\r\n        <div className=\"p-4 bg-slate-800/50 rounded-lg border border-indigo-500/30 space-y-3\">\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"trusted_patient_id\" className=\"text-slate-300\">Patient existant</Label>\r\n            <select \r\n              id=\"trusted_patient_id\"\r\n              value={patientId}\r\n              onChange={(e) => {\r\n                setPatientId(e.target.value);\r\n                if (e.target.value) {\r\n                  setManualName('');\r\n                  setManualPhone('');\r\n                }\r\n              }}\r\n              className=\"h-11 w-full rounded-md bg-slate-800/50 border border-indigo-500/30 text-cyan-100 px-3 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500/50\"\r\n            >\r\n              <option value=\"\">Aucun</option>\r\n              {allCharacters\r\n                .filter(c => c.id !== currentCharacterId)\r\n                .map(c => (\r\n                  <option key={c.id} value={c.id}>\r\n                    {c.first_name} {c.last_name} {c.phone ? `- ${c.phone}` : ''}\r\n                  </option>\r\n                ))}\r\n            </select>\r\n          </div>\r\n\r\n          <div className=\"relative py-2\">\r\n            <div className=\"absolute inset-0 flex items-center\">\r\n              <div className=\"w-full border-t border-indigo-500/20\"></div>\r\n            </div>\r\n            <div className=\"relative flex justify-center text-xs uppercase\">\r\n              <span className=\"bg-slate-800 px-2 text-slate-500\">ou saisie manuelle</span>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"manual_name\" className=\"text-slate-300\">Nom complet</Label>\r\n            <Input\r\n              id=\"manual_name\"\r\n              value={manualName}\r\n              onChange={(e) => {\r\n                setManualName(e.target.value);\r\n                if (e.target.value) setPatientId('');\r\n              }}\r\n              placeholder=\"Jean Dupont\"\r\n              disabled={!!patientId}\r\n              className=\"bg-slate-800/50 border-indigo-500/30 text-cyan-100 disabled:opacity-50\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"manual_phone\" className=\"text-slate-300\">Téléphone</Label>\r\n            <Input\r\n              id=\"manual_phone\"\r\n              type=\"tel\"\r\n              value={manualPhone}\r\n              onChange={(e) => setManualPhone(e.target.value)}\r\n              placeholder=\"+33 6 12 34 56 78\"\r\n              disabled={!!patientId}\r\n              className=\"bg-slate-800/50 border-indigo-500/30 text-cyan-100 disabled:opacity-50\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"flex gap-2\">\r\n            <Button\r\n              type=\"button\"\r\n              size=\"sm\"\r\n              onClick={handleAdd}\r\n              disabled={!patientId && !manualName}\r\n              className=\"flex-1\"\r\n            >\r\n              Ajouter\r\n            </Button>\r\n            <Button\r\n              type=\"button\"\r\n              size=\"sm\"\r\n              variant=\"outline\"\r\n              onClick={resetForm}\r\n              className=\"flex-1\"\r\n            >\r\n              Annuler\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <Button\r\n          type=\"button\"\r\n          variant=\"outline\"\r\n          onClick={() => setIsAdding(true)}\r\n          className=\"w-full border-indigo-500/30 text-indigo-400 hover:bg-indigo-500/10\"\r\n        >\r\n          <Plus className=\"w-4 h-4 mr-2\" />\r\n          Ajouter une personne de confiance\r\n        </Button>\r\n      )}\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2457, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/elise/Documents/novalife-app/components/Characters/CharacterForm.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { compressImage } from '../../lib/compressImage';\r\nimport { uploadAvatarToGridFS } from '../../lib/uploadAvatar';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\n// Utilisation de l'API route pour récupérer les personnages\r\nconst api = {\r\n  list: async () => {\r\n    const res = await fetch('/api/characters');\r\n    if (!res.ok) throw new Error('Erreur lors du chargement des personnages');\r\n    return res.json();\r\n  },\r\n};\r\nimport { useQuery } from '@tanstack/react-query';\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { X, Save, User, MapPin, Briefcase, Heart, Droplets, UserCheck, Paperclip } from 'lucide-react';\r\nimport AttachmentsManager from './AttachmentsManager';\r\nimport TrustedPersonsManager from './TrustedPersonsManager';\r\n\r\nconst bloodTypes = ['A+', 'A-', 'B+', 'B-', 'AB+', 'AB-', 'O+', 'O-'];\r\n\r\nexport default function CharacterForm({ character, onSubmit, onCancel, isLoading }) {\r\n  const { data: allCharacters = [] } = useQuery({\r\n    queryKey: ['characters'],\r\n    queryFn: () => api.list(),\r\n  });\r\n\r\n  const [formData, setFormData] = useState({\r\n    first_name: '',\r\n    last_name: '',\r\n    birth_date: '',\r\n    nationality: '',\r\n    phone: '',\r\n    social_score: '',\r\n    profession: '',\r\n    address: '',\r\n    blood_type: '',\r\n    doctor: '',\r\n    medical_history: '',\r\n    trusted_persons: [],\r\n    avatar_url: '', // base64 ou url\r\n    attachments: []\r\n  });\r\n\r\n  const [avatarPreview, setAvatarPreview] = useState('');\r\n  const [avatarUploading, setAvatarUploading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (character) {\r\n      // Migration des anciennes données vers le nouveau format\r\n\r\n      // Always ensure trustedPersons is an array (parse if string)\r\n      let trustedPersons = character.trusted_persons;\r\n      if (typeof trustedPersons === 'string') {\r\n        try {\r\n          trustedPersons = JSON.parse(trustedPersons);\r\n        } catch {\r\n          trustedPersons = [];\r\n        }\r\n      }\r\n      if (!Array.isArray(trustedPersons)) trustedPersons = [];\r\n\r\n      // Si l'ancien format existe, le migrer\r\n      if (!trustedPersons.length) {\r\n        if (character.trusted_person_id) {\r\n          trustedPersons = [{ patient_id: character.trusted_person_id }];\r\n        } else if (character.trusted_person_name) {\r\n          trustedPersons = [{\r\n            name: character.trusted_person_name,\r\n            phone: character.trusted_person_phone || ''\r\n          }];\r\n        }\r\n      }\r\n\r\n      setFormData({\r\n        first_name: character.first_name || '',\r\n        last_name: character.last_name || '',\r\n        birth_date: character.birth_date || '',\r\n        nationality: character.nationality || '',\r\n        phone: character.phone || '',\r\n        social_score: character.social_score || '',\r\n        profession: character.profession || '',\r\n        address: character.address || '',\r\n        blood_type: character.blood_type || '',\r\n        doctor: character.doctor || '',\r\n        medical_history: character.medical_history || '',\r\n        trusted_persons: trustedPersons,\r\n        avatar_url: character.avatar_url || '',\r\n        attachments: character.attachments || []\r\n      });\r\n      setAvatarPreview(character.avatar_url || '');\r\n    }\r\n  }, [character]);\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (avatarUploading) {\r\n      alert(\"Merci de patienter, l'upload de la photo est en cours.\");\r\n      return;\r\n    }\r\n    onSubmit(formData);\r\n  };\r\n\r\n  const handleChange = (field, value) => {\r\n    setFormData(prev => ({ ...prev, [field]: value }));\r\n    if (field === 'avatar_url') {\r\n      setAvatarPreview(value);\r\n    }\r\n  };\r\n\r\n  // Upload image sur GridFS\r\n  // Compression avant stockage base64\r\n  const handleAvatarUpload = async (e) => {\r\n    const file = e.target.files[0];\r\n    if (file) {\r\n      try {\r\n        const compressedBase64 = await compressImage(file, 300, 300, 0.7);\r\n        setFormData(prev => ({ ...prev, avatar_url: compressedBase64 }));\r\n        setAvatarPreview(compressedBase64);\r\n      } catch (err) {\r\n        alert(\"Erreur lors de la compression de l'image\");\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <motion.div\r\n      initial={{ opacity: 0, scale: 0.95 }}\r\n      animate={{ opacity: 1, scale: 1 }}\r\n      exit={{ opacity: 0, scale: 0.95 }}\r\n      className=\"bg-slate-900/95 backdrop-blur-xl rounded-2xl shadow-2xl shadow-cyan-500/20 border border-cyan-500/30 overflow-hidden\"\r\n    >\r\n      <div className=\"absolute inset-0 bg-gradient-to-br from-cyan-500/5 via-purple-500/5 to-pink-500/5 pointer-events-none\" />\r\n      <div className=\"px-6 py-5 border-b border-cyan-500/20 bg-gradient-to-r from-cyan-500/10 to-purple-500/10 relative\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <h2 className=\"text-xl font-semibold text-cyan-100\">\r\n            {character ? 'Modifier le patient' : 'Nouveau patient'}\r\n          </h2>\r\n          <Button variant=\"ghost\" size=\"icon\" onClick={onCancel} className=\"text-cyan-400 hover:text-cyan-300 hover:bg-cyan-500/20\">\r\n            <X className=\"w-5 h-5\" />\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      <form onSubmit={handleSubmit} className=\"p-6 space-y-6 relative\">\r\n        {/* Identité */}\r\n        <div className=\"space-y-4\">\r\n          <div className=\"flex items-center gap-2 text-sm font-medium text-cyan-400 uppercase tracking-wider\">\r\n            <User className=\"w-4 h-4\" />\r\n            Identité\r\n          </div>\r\n          \r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"first_name\" className=\"text-slate-300\">Prénom *</Label>\r\n              <Input\r\n                id=\"first_name\"\r\n                value={formData.first_name}\r\n                onChange={(e) => handleChange('first_name', e.target.value)}\r\n                placeholder=\"Jean\"\r\n                className=\"h-11 bg-slate-800/50 border-cyan-500/30 text-cyan-100 placeholder:text-slate-500 focus:border-cyan-500 focus:ring-cyan-500/50\"\r\n                required\r\n              />\r\n            </div>\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"last_name\" className=\"text-slate-300\">Nom *</Label>\r\n              <Input\r\n                id=\"last_name\"\r\n                value={formData.last_name}\r\n                onChange={(e) => handleChange('last_name', e.target.value)}\r\n                placeholder=\"Dupont\"\r\n                className=\"h-11 bg-slate-800/50 border-cyan-500/30 text-cyan-100 placeholder:text-slate-500 focus:border-cyan-500 focus:ring-cyan-500/50\"\r\n                required\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"birth_date\" className=\"text-slate-300\">Date de naissance</Label>\r\n              <Input\r\n                id=\"birth_date\"\r\n                type=\"date\"\r\n                value={formData.birth_date}\r\n                onChange={(e) => handleChange('birth_date', e.target.value)}\r\n                className=\"h-11 bg-slate-800/50 border-cyan-500/30 text-cyan-100 placeholder:text-slate-500 focus:border-cyan-500 focus:ring-cyan-500/50\"\r\n              />\r\n            </div>\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"nationality\" className=\"text-slate-300\">Nationalité</Label>\r\n              <Input\r\n                id=\"nationality\"\r\n                value={formData.nationality}\r\n                onChange={(e) => handleChange('nationality', e.target.value)}\r\n                placeholder=\"Française\"\r\n                className=\"h-11 bg-slate-800/50 border-cyan-500/30 text-cyan-100 placeholder:text-slate-500 focus:border-cyan-500 focus:ring-cyan-500/50\"\r\n              />\r\n            </div>\r\n            </div>\r\n\r\n            <div className=\"space-y-2\">\r\n            <Label htmlFor=\"phone\" className=\"text-slate-300\">Téléphone</Label>\r\n            <Input\r\n              id=\"phone\"\r\n              type=\"tel\"\r\n              value={formData.phone}\r\n              onChange={(e) => handleChange('phone', e.target.value)}\r\n              placeholder=\"+33 6 12 34 56 78\"\r\n              className=\"h-11 bg-slate-800/50 border-cyan-500/30 text-cyan-100 placeholder:text-slate-500 focus:border-cyan-500 focus:ring-cyan-500/50\"\r\n            />\r\n            </div>\r\n\r\n            <div className=\"space-y-2\">\r\n            <Label htmlFor=\"social_score\" className=\"text-slate-300\">Score social</Label>\r\n            <Input\r\n              id=\"social_score\"\r\n              value={formData.social_score}\r\n              onChange={(e) => handleChange('social_score', e.target.value)}\r\n              placeholder=\"Score social\"\r\n              className=\"h-11 bg-slate-800/50 border-cyan-500/30 text-cyan-100 placeholder:text-slate-500 focus:border-cyan-500 focus:ring-cyan-500/50\"\r\n            />\r\n            </div>\r\n\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"avatar_upload\" className=\"text-slate-300\">Photo du patient</Label>\r\n            <input\r\n              id=\"avatar_upload\"\r\n              type=\"file\"\r\n              accept=\"image/*\"\r\n              onChange={handleAvatarUpload}\r\n              className=\"block w-full text-sm text-slate-300 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-cyan-50 file:text-cyan-700 hover:file:bg-cyan-100\"\r\n            />\r\n            {avatarPreview && (\r\n              <img\r\n                src={avatarPreview}\r\n                alt=\"Aperçu avatar\"\r\n                className=\"mt-2 rounded-lg shadow-md max-h-32 border border-cyan-500/30\"\r\n              />\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Profession & Adresse */}\r\n        <div className=\"space-y-4\">\r\n          <div className=\"flex items-center gap-2 text-sm font-medium text-purple-400 uppercase tracking-wider\">\r\n            <Briefcase className=\"w-4 h-4\" />\r\n            Profession & Localisation\r\n          </div>\r\n          \r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"profession\" className=\"text-slate-300\">Métier</Label>\r\n            <Input\r\n              id=\"profession\"\r\n              value={formData.profession}\r\n              onChange={(e) => handleChange('profession', e.target.value)}\r\n              placeholder=\"Médecin, Avocat, Ingénieur...\"\r\n              className=\"h-11 bg-slate-800/50 border-purple-500/30 text-cyan-100 placeholder:text-slate-500 focus:border-purple-500 focus:ring-purple-500/50\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"address\" className=\"text-slate-300\">Adresse</Label>\r\n            <Input\r\n              id=\"address\"\r\n              value={formData.address}\r\n              onChange={(e) => handleChange('address', e.target.value)}\r\n              placeholder=\"123 Rue de la Paix, Paris\"\r\n              className=\"h-11 bg-slate-800/50 border-purple-500/30 text-cyan-100 placeholder:text-slate-500 focus:border-purple-500 focus:ring-purple-500/50\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Personnes de confiance */}\r\n        <div className=\"space-y-4\">\r\n          <div className=\"flex items-center gap-2 text-sm font-medium text-indigo-400 uppercase tracking-wider\">\r\n            <UserCheck className=\"w-4 h-4\" />\r\n            Personnes de confiance\r\n          </div>\r\n\r\n          <TrustedPersonsManager\r\n            trustedPersons={formData.trusted_persons}\r\n            onChange={(persons) => handleChange('trusted_persons', persons)}\r\n            allCharacters={allCharacters}\r\n            currentCharacterId={character?.id}\r\n          />\r\n        </div>\r\n\r\n        {/* Informations médicales */}\r\n        <div className=\"space-y-4\">\r\n          <div className=\"flex items-center gap-2 text-sm font-medium text-pink-400 uppercase tracking-wider\">\r\n            <Heart className=\"w-4 h-4\" />\r\n            Informations médicales\r\n          </div>\r\n          \r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"blood_type\" className=\"text-slate-300\">Groupe sanguin</Label>\r\n              <select \r\n                id=\"blood_type\"\r\n                value={formData.blood_type || ''}\r\n                onChange={(e) => handleChange('blood_type', e.target.value)}\r\n                className=\"h-11 w-full rounded-md bg-slate-800/50 border border-pink-500/30 text-cyan-100 px-3 focus:outline-none focus:border-pink-500 focus:ring-1 focus:ring-pink-500/50\"\r\n              >\r\n                <option value=\"\">Sélectionner...</option>\r\n                {bloodTypes.map(type => (\r\n                  <option key={type} value={type}>{type}</option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"doctor\" className=\"text-slate-300\">Médecin traitant</Label>\r\n              <Input\r\n                id=\"doctor\"\r\n                value={formData.doctor}\r\n                onChange={(e) => handleChange('doctor', e.target.value)}\r\n                placeholder=\"Dr. Martin\"\r\n                className=\"h-11 bg-slate-800/50 border-pink-500/30 text-cyan-100 placeholder:text-slate-500 focus:border-pink-500 focus:ring-pink-500/50\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"medical_history\" className=\"text-slate-300\">Antécédents médicaux</Label>\r\n            <Textarea\r\n              id=\"medical_history\"\r\n              value={formData.medical_history}\r\n              onChange={(e) => handleChange('medical_history', e.target.value)}\r\n              placeholder=\"Allergies, maladies chroniques, opérations...\"\r\n              rows={3}\r\n              className=\"resize-none bg-slate-800/50 border-pink-500/30 text-cyan-100 placeholder:text-slate-500 focus:border-pink-500 focus:ring-pink-500/50\"\r\n            />\r\n          </div>\r\n          </div>\r\n\r\n          {/* Pièces jointes */}\r\n          <div className=\"space-y-4\">\r\n          <div className=\"flex items-center gap-2 text-sm font-medium text-amber-400 uppercase tracking-wider\">\r\n            <Paperclip className=\"w-4 h-4\" />\r\n            Documents et liens\r\n          </div>\r\n\r\n          <AttachmentsManager\r\n            attachments={formData.attachments}\r\n            onChange={(attachments) => handleChange('attachments', attachments)}\r\n          />\r\n          </div>\r\n\r\n          <div className=\"flex items-center gap-3 pt-4 border-t border-cyan-500/20\">\r\n          <Button \r\n            type=\"button\" \r\n            variant=\"outline\" \r\n            onClick={onCancel}\r\n            className=\"flex-1 h-11 border-cyan-500/30 text-cyan-400 hover:bg-cyan-500/10 hover:text-cyan-300\"\r\n          >\r\n            Annuler\r\n          </Button>\r\n          <Button \r\n            type=\"submit\" \r\n            disabled={isLoading}\r\n            className=\"flex-1 h-11 bg-gradient-to-r from-cyan-600 to-purple-600 hover:from-cyan-500 hover:to-purple-500 shadow-lg shadow-cyan-500/30 hover:shadow-cyan-500/50 transition-all\"\r\n          >\r\n            <Save className=\"w-4 h-4 mr-2\" />\r\n            {isLoading ? 'Enregistrement...' : (character ? 'Mettre à jour' : 'Créer')}\r\n          </Button>\r\n        </div>\r\n      </form>\r\n    </motion.div>\r\n  );\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3316, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/elise/Documents/novalife-app/components/Characters/CharacterDetails.jsx"],"sourcesContent":["import React from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { \r\n  X, User, MapPin, Briefcase, Heart, Droplets, \r\n  Calendar, Globe, Stethoscope, FileText, Phone, UserCheck, Paperclip, ExternalLink, Image as ImageIcon, Link as LinkIcon \r\n} from 'lucide-react';\r\nimport { format } from 'date-fns';\r\nimport { fr } from 'date-fns/locale';\r\n\r\nconst bloodTypeColors = {\r\n  'A+': 'bg-rose-500/20 text-rose-400 shadow-rose-500/50',\r\n  'A-': 'bg-rose-500/20 text-rose-300 shadow-rose-500/50',\r\n  'B+': 'bg-cyan-500/20 text-cyan-400 shadow-cyan-500/50',\r\n  'B-': 'bg-cyan-500/20 text-cyan-300 shadow-cyan-500/50',\r\n  'AB+': 'bg-purple-500/20 text-purple-400 shadow-purple-500/50',\r\n  'AB-': 'bg-purple-500/20 text-purple-300 shadow-purple-500/50',\r\n  'O+': 'bg-amber-500/20 text-amber-400 shadow-amber-500/50',\r\n  'O-': 'bg-amber-500/20 text-amber-300 shadow-amber-500/50',\r\n};\r\n\r\nexport default function CharacterDetails({ character, onClose, trustedPersons = [], allCharacters = [], onViewTrustedPerson }) {\r\n  // Always ensure trustedPersons is an array\r\n  const safeTrustedPersons = Array.isArray(trustedPersons) ? trustedPersons : [];\r\n    const [showModal, setShowModal] = React.useState(false);\r\n  const initials = `${character.first_name?.[0] || ''}${character.last_name?.[0] || ''}`.toUpperCase();\r\n\r\n  const InfoRow = ({ icon: Icon, label, value }) => {\r\n    if (!value) return null;\r\n    return (\r\n      <div className=\"flex items-start gap-4 py-3\">\r\n        <div className=\"w-10 h-10 rounded-xl bg-cyan-500/10 border border-cyan-500/30 flex items-center justify-center flex-shrink-0\">\r\n          <Icon className=\"w-5 h-5 text-cyan-400\" />\r\n        </div>\r\n        <div>\r\n          <p className=\"text-xs font-medium text-cyan-400/70 uppercase tracking-wider\">{label}</p>\r\n          <p className=\"text-slate-300 mt-0.5\">{value}</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <motion.div\r\n      initial={{ opacity: 0, scale: 0.95 }}\r\n      animate={{ opacity: 1, scale: 1 }}\r\n      exit={{ opacity: 0, scale: 0.95 }}\r\n      className=\"bg-slate-900/95 backdrop-blur-xl rounded-2xl shadow-2xl shadow-cyan-500/20 border border-cyan-500/30 overflow-hidden max-h-[90vh] overflow-y-auto\"\r\n    >\r\n      <div className=\"absolute inset-0 bg-gradient-to-br from-cyan-500/5 via-purple-500/5 to-pink-500/5 pointer-events-none\" />\r\n      \r\n      {/* Header compact avec photo et nom, style \"fiche annotée\" */}\r\n      {/* Header avec bande gif en fond, photo à cheval, infos à gauche, sang à droite, comme la capture */}\r\n      <div className=\"relative w-full\" style={{minHeight:'6.5rem'}}>\r\n        {/* Bande gif en fond du header */}\r\n        <div className=\"absolute inset-0 h-24 w-full overflow-hidden rounded-t-2xl\">\r\n          <img src=\"/logo gif.gif\" alt=\"Fond gif\" className=\"w-full h-full object-cover opacity-90\" />\r\n        </div>\r\n        {/* Header flex */}\r\n        <div className=\"relative flex flex-row items-end gap-6 px-6 pt-6 pb-4 z-10\">\r\n          {/* Photo à cheval sur le header */}\r\n          <div style={{position:'relative', top:'1rem'}}>\r\n            {character.avatar_url ? (\r\n              (() => {\r\n                let src = character.avatar_url;\r\n                if (src && src.length > 100 && !src.startsWith('data:image') && !src.startsWith('http') && !src.startsWith('/api')) {\r\n                  src = `data:image/png;base64,${src}`;\r\n                }\r\n                return <img \r\n                  src={src} \r\n                  alt={`${character.first_name} ${character.last_name}`}\r\n                  className=\"w-24 h-24 rounded-2xl object-cover ring-4 ring-cyan-400/80 shadow-xl shadow-cyan-500/40 cursor-pointer bg-slate-900 border-4 border-slate-900\"\r\n                  style={{opacity:1, background:'#0f172a'}}\r\n                  onClick={() => setShowModal(true)}\r\n                  title=\"Agrandir la photo\"\r\n                />;\r\n              })()\r\n            ) : (\r\n              <div className=\"w-24 h-24 rounded-2xl bg-gradient-to-br from-cyan-500/20 to-purple-500/20 flex items-center justify-center ring-4 ring-cyan-400/80 shadow-xl shadow-cyan-500/40 border-4 border-slate-900 backdrop-blur-sm\" style={{background:'#0f172a'}}>\r\n                <span className=\"text-3xl font-bold text-cyan-400\">{initials}</span>\r\n              </div>\r\n            )}\r\n          </div>\r\n          {/* (Nom, prénom, métier supprimés du header comme demandé) */}\r\n          {/* (Groupe sanguin retiré du header comme demandé) */}\r\n          <div className=\"flex-1\"></div>\r\n          {/* Bouton fermeture en overlay */}\r\n          <Button \r\n            variant=\"ghost\" \r\n            size=\"icon\" \r\n            onClick={onClose}\r\n            className=\"absolute top-4 right-4 text-white/80 hover:text-white hover:bg-white/20 z-20\"\r\n          >\r\n            <X className=\"w-5 h-5\" />\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Contenu principal : nom/prénom/métier à gauche, groupe sanguin à droite, sur la même ligne */}\r\n      <div className=\"pt-6 px-6 pb-6 relative z-10\">\r\n        <div className=\"flex flex-row items-center justify-between mb-2\">\r\n          <div className=\"flex flex-col justify-center\">\r\n            <h2 className=\"text-2xl font-semibold text-cyan-100 mb-1 whitespace-nowrap\">{character.first_name} {character.last_name}</h2>\r\n            {character.profession && (\r\n              <p className=\"text-slate-400 mt-1\">{character.profession}</p>\r\n            )}\r\n          </div>\r\n          {character.blood_type && (\r\n            <Badge className={`${bloodTypeColors[character.blood_type]} text-sm font-semibold px-3 py-1.5 shadow-lg`}>\r\n              <Droplets className=\"w-3.5 h-3.5 mr-1.5\" />\r\n              {character.blood_type}\r\n            </Badge>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"mt-8 space-y-1 divide-y divide-cyan-500/10\">\r\n          <InfoRow icon={Calendar} label=\"Date de naissance\" value={character.birth_date ? format(new Date(character.birth_date), 'dd MMMM yyyy', { locale: fr }) : null} />\r\n          <InfoRow icon={Globe} label=\"Nationalité\" value={character.nationality} />\r\n          <InfoRow icon={Phone} label=\"Téléphone\" value={character.phone} />\r\n          <InfoRow icon={Briefcase} label=\"Métier\" value={character.profession} />\r\n          <InfoRow icon={MapPin} label=\"Adresse\" value={character.address} />\r\n          <InfoRow icon={Stethoscope} label=\"Médecin traitant\" value={character.doctor ? `Dr. ${character.doctor}` : null} />\r\n\r\n          {safeTrustedPersons.length > 0 && (\r\n            <div className=\"flex items-start gap-4 py-3\">\r\n              <div className=\"w-10 h-10 rounded-xl bg-indigo-500/10 border border-indigo-500/30 flex items-center justify-center flex-shrink-0\">\r\n                <UserCheck className=\"w-5 h-5 text-indigo-400\" />\r\n              </div>\r\n              <div className=\"flex-1\">\r\n                <p className=\"text-xs font-medium text-indigo-400/70 uppercase tracking-wider mb-2\">Personnes de confiance</p>\r\n                <div className=\"space-y-1.5\">\r\n                  {safeTrustedPersons.map((person, index) => {\r\n                    if (person.patient_id) {\r\n                      const patient = allCharacters.find(c => c._id === person.patient_id);\r\n                      if (patient) {\r\n                        return (\r\n                          <button \r\n                            key={index}\r\n                            onClick={() => onViewTrustedPerson(patient)}\r\n                            className=\"text-slate-300 hover:text-indigo-400 transition-colors underline decoration-dotted block\"\r\n                          >\r\n                            {patient.first_name} {patient.last_name}\r\n                            {patient.phone && ` - ${patient.phone}`}\r\n                          </button>\r\n                        );\r\n                      }\r\n                    }\r\n                    return (\r\n                      <p key={index} className=\"text-slate-300\">\r\n                        {person.name}\r\n                        {person.phone && ` - ${person.phone}`}\r\n                      </p>\r\n                    );\r\n                  })}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {character.medical_history && (\r\n          <div className=\"mt-6 p-4 bg-pink-500/10 rounded-xl border border-pink-500/30 shadow-lg shadow-pink-500/10\">\r\n            <div className=\"flex items-center gap-2 text-pink-400 font-medium mb-2\">\r\n              <FileText className=\"w-4 h-4\" />\r\n              Antécédents médicaux\r\n            </div>\r\n            <p className=\"text-slate-300 text-sm leading-relaxed\">\r\n              {character.medical_history}\r\n            </p>\r\n          </div>\r\n        )}\r\n\r\n        {Array.isArray(character.attachments) && character.attachments.length > 0 && (\r\n          <div className=\"mt-6 p-4 bg-amber-500/10 rounded-xl border border-amber-500/30 shadow-lg shadow-amber-500/10\">\r\n            <div className=\"flex items-center gap-2 text-amber-400 font-medium mb-3\">\r\n              <Paperclip className=\"w-4 h-4\" />\r\n              Documents et liens ({character.attachments.length})\r\n            </div>\r\n            <div className=\"space-y-2\">\r\n              {character.attachments.map((attachment, index) => {\r\n                const getIcon = () => {\r\n                  switch (attachment.type) {\r\n                    case 'image': return <ImageIcon className=\"w-4 h-4\" />;\r\n                    case 'link': return <LinkIcon className=\"w-4 h-4\" />;\r\n                    default: return <FileText className=\"w-4 h-4\" />;\r\n                  }\r\n                };\r\n\r\n                return (\r\n                  <a\r\n                    key={index}\r\n                    href={attachment.url}\r\n                    target=\"_blank\"\r\n                    rel=\"noopener noreferrer\"\r\n                    className=\"flex items-center gap-3 p-2 rounded-lg bg-slate-800/50 hover:bg-slate-800 border border-amber-500/20 hover:border-amber-500/40 transition-all group\"\r\n                  >\r\n                    <div className=\"text-amber-400\">\r\n                      {getIcon()}\r\n                    </div>\r\n                    <span className=\"flex-1 text-sm text-slate-300 group-hover:text-slate-100 truncate\">\r\n                      {attachment.name}\r\n                    </span>\r\n                    <ExternalLink className=\"w-4 h-4 text-slate-400 group-hover:text-amber-400\" />\r\n                  </a>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n        )}\r\n        </div>\r\n        </motion.div>\r\n        );\r\n        }"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3907, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/elise/Documents/novalife-app/components/Characters.jsx"],"sourcesContent":["\"use client\";\r\nimport React, { useState } from 'react';\r\n\r\n// Fonctions pour appeler les API routes Next.js côté client\r\nconst api = {\r\n  list: async () => {\r\n    const res = await fetch('/api/characters');\r\n    if (!res.ok) throw new Error('Erreur lors du chargement des personnages');\r\n    return res.json();\r\n  },\r\n  create: async (data) => {\r\n    const res = await fetch('/api/characters', { method: 'POST', body: JSON.stringify(data), headers: { 'Content-Type': 'application/json' } });\r\n    if (!res.ok) throw new Error('Erreur lors de la création');\r\n    return res.json();\r\n  },\r\n  update: async (_id, data) => {\r\n    const res = await fetch('/api/characters/update', {\r\n      method: 'PUT',\r\n      body: JSON.stringify({ _id, ...data }),\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n    if (!res.ok) throw new Error('Erreur lors de la mise à jour');\r\n    return res.json();\r\n  },\r\n  delete: async (_id) => {\r\n    const res = await fetch('/api/characters/delete', {\r\n      method: 'DELETE',\r\n      body: JSON.stringify({ _id }),\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n    if (!res.ok) throw new Error('Erreur lors de la suppression');\r\n    return res.json();\r\n  },\r\n};\r\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { \r\n  Dialog, \r\n  DialogContent,\r\n  DialogTitle,\r\n  DialogDescription\r\n} from \"@/components/ui/dialog\";\r\nimport {\r\n  AlertDialog,\r\n  AlertDialogAction,\r\n  AlertDialogCancel,\r\n  AlertDialogContent,\r\n  AlertDialogDescription,\r\n  AlertDialogFooter,\r\n  AlertDialogHeader,\r\n  AlertDialogTitle,\r\n} from \"@/components/ui/alert-dialog\";\r\nimport { Plus, Search, Loader2, Users } from 'lucide-react';\r\n\r\n\r\nimport CharacterCard from '@/components/Characters/CharactersCard';\r\nimport CharacterForm from '@/components/Characters/CharacterForm';\r\nimport CharacterDetails from '@/components/Characters/CharacterDetails';\r\n\r\nexport default function Characters() {\r\n  // Suppression de la pagination côté serveur\r\n  const [showForm, setShowForm] = useState(false);\r\n  const [editingCharacter, setEditingCharacter] = useState(null);\r\n  const [viewingCharacter, setViewingCharacter] = useState(null);\r\n  const [deletingCharacter, setDeletingCharacter] = useState(null);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n\r\n  const queryClient = useQueryClient();\r\n\r\n  const { data: characters = [], isLoading } = useQuery({\r\n    queryKey: ['characters'],\r\n    queryFn: () => api.list(),\r\n    // Pas de cache prolongé, configuration par défaut\r\n    refetchOnWindowFocus: false,\r\n    refetchOnReconnect: false,\r\n  });\r\n\r\n  const getTrustedPersons = (character) => {\r\n    return character.trusted_persons || [];\r\n  };\r\n\r\n  const createMutation = useMutation({\r\n    mutationFn: (data) => api.create(data),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['characters'] });\r\n      setShowForm(false);\r\n    },\r\n    onError: (error) => {\r\n      console.error('Erreur lors de la création:', error);\r\n    },\r\n  });\r\n\r\n  const updateMutation = useMutation({\r\n    mutationFn: ({ _id, data }) => api.update(_id, data),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['characters'] });\r\n      setShowForm(false);\r\n      setEditingCharacter(null);\r\n    },\r\n    onError: (error) => {\r\n      console.error('Erreur lors de la mise à jour:', error);\r\n    },\r\n  });\r\n\r\n  const deleteMutation = useMutation({\r\n    mutationFn: (_id) => api.delete(_id),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['characters'] });\r\n      setDeletingCharacter(null);\r\n    },\r\n    onError: (error) => {\r\n      console.error('Erreur lors de la suppression:', error);\r\n      setDeletingCharacter(null);\r\n    },\r\n  });\r\n\r\n  const handleSubmit = (data) => {\r\n    if (editingCharacter) {\r\n      updateMutation.mutate({ _id: editingCharacter._id, data });\r\n    } else {\r\n      createMutation.mutate(data);\r\n    }\r\n  };\r\n\r\n  const handleEdit = (character) => {\r\n    setEditingCharacter(character);\r\n    setShowForm(true);\r\n  };\r\n\r\n  const handleCloseForm = () => {\r\n    setShowForm(false);\r\n    setEditingCharacter(null);\r\n  };\r\n\r\n  const filteredCharacters = characters.filter(char => {\r\n    const fullName = `${char.first_name} ${char.last_name}`.toLowerCase();\r\n    const query = searchQuery.toLowerCase();\r\n    return fullName.includes(query) ||\r\n      char.profession?.toLowerCase().includes(query) ||\r\n      char.blood_type?.toLowerCase().includes(query) ||\r\n      char.phone?.toLowerCase().includes(query);\r\n  });\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950\">\r\n      {/* Animated background effect */}\r\n      <div className=\"fixed inset-0 overflow-hidden pointer-events-none\">\r\n        <div className=\"absolute top-0 left-1/4 w-96 h-96 bg-cyan-500/10 rounded-full blur-3xl animate-pulse\" />\r\n        <div className=\"absolute bottom-0 right-1/4 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl animate-pulse delay-700\" />\r\n        <div className=\"absolute top-1/2 left-1/2 w-96 h-96 bg-pink-500/10 rounded-full blur-3xl animate-pulse delay-1000\" />\r\n        <img \r\n          src=\"https://qtrypzzcjebvfcihiynt.supabase.co/storage/v1/object/public/base44-prod/public/6966dea0eae2ef138766d9ef/e2fc969cb_Atelis.png\" \r\n          alt=\"Atelis\"\r\n          className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] h-auto opacity-5\"\r\n        />\r\n      </div>\r\n\r\n      {/* Header */}\r\n      <header className=\"sticky top-0 z-40 bg-slate-900/80 backdrop-blur-xl border-b border-cyan-500/20\">\r\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n          <div className=\"flex items-center justify-between h-16\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <img \r\n                src=\"https://qtrypzzcjebvfcihiynt.supabase.co/storage/v1/object/public/base44-prod/public/6966dea0eae2ef138766d9ef/d73b7558b_Atelis.png\"\r\n                alt=\"Atelis\"\r\n                className=\"h-10 w-auto\"\r\n              />\r\n              <div>\r\n                <h1 className=\"text-xl font-bold text-cyan-100\">Patients</h1>\r\n                <p className=\"text-xs text-cyan-400/70\">{characters.length} patient{characters.length > 1 ? 's' : ''}</p>\r\n              </div>\r\n            </div>\r\n\r\n            <Button \r\n              onClick={() => setShowForm(true)}\r\n              className=\"bg-gradient-to-r from-cyan-600 to-purple-600 hover:from-cyan-500 hover:to-purple-500 shadow-lg shadow-cyan-500/50 hover:shadow-cyan-500/70 transition-all\"\r\n            >\r\n              <Plus className=\"w-4 h-4 mr-2\" />\r\n              Nouveau\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      {/* Search */}\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 relative z-10\">\r\n        <div className=\"relative max-w-md\">\r\n          <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-cyan-400\" />\r\n          <Input\r\n            placeholder=\"Rechercher par nom, métier, groupe sanguin, téléphone...\"\r\n            value={searchQuery}\r\n            onChange={(e) => setSearchQuery(e.target.value)}\r\n            className=\"pl-10 h-12 bg-slate-800/50 border-cyan-500/30 text-cyan-100 placeholder:text-slate-500 focus:border-cyan-500 focus:ring-cyan-500/50 shadow-lg shadow-cyan-500/10\"\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Content */}\r\n      <main className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-12 relative z-10\">\r\n        {isLoading ? (\r\n          <div className=\"flex items-center justify-center py-20\">\r\n            <Loader2 className=\"w-8 h-8 text-cyan-400 animate-spin\" />\r\n          </div>\r\n        ) : filteredCharacters.length === 0 ? (\r\n          <motion.div \r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            className=\"text-center py-20\"\r\n          >\r\n            <div className=\"w-20 h-20 mx-auto rounded-2xl bg-cyan-500/10 border border-cyan-500/30 flex items-center justify-center mb-4\">\r\n              <Users className=\"w-10 h-10 text-cyan-400\" />\r\n            </div>\r\n            <h3 className=\"text-lg font-semibold text-cyan-100 mb-1\">\r\n              {searchQuery ? 'Aucun résultat' : 'Aucun patient'}\r\n            </h3>\r\n            <p className=\"text-slate-400 mb-6\">\r\n              {searchQuery ? 'Essayez avec d\\'autres termes' : 'Commencez par créer votre premier patient'}\r\n            </p>\r\n            {!searchQuery && (\r\n              <Button \r\n                onClick={() => setShowForm(true)}\r\n                className=\"bg-gradient-to-r from-cyan-600 to-purple-600 shadow-lg shadow-cyan-500/30\"\r\n              >\r\n                <Plus className=\"w-4 h-4 mr-2\" />\r\n                Créer un patient\r\n              </Button>\r\n            )}\r\n          </motion.div>\r\n        ) : (\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n              <AnimatePresence>\r\n                {filteredCharacters.map((character) => (\r\n                  <CharacterCard\r\n                    key={character._id || character.id}\r\n                    character={character}\r\n                    trustedPersons={getTrustedPersons(character)}\r\n                    allCharacters={characters}\r\n                    onView={setViewingCharacter}\r\n                    onEdit={handleEdit}\r\n                    onDelete={setDeletingCharacter}\r\n                  />\r\n                ))}\r\n              </AnimatePresence>\r\n            </div>\r\n        )}\r\n      </main>\r\n\r\n      {/* Form Dialog */}\r\n      <Dialog open={showForm} onOpenChange={handleCloseForm}>\r\n        <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto p-0 gap-0 border-0 bg-transparent shadow-none\">\r\n          <DialogTitle className=\"sr-only\">\r\n            {editingCharacter ? 'Modifier le patient' : 'Nouveau patient'}\r\n          </DialogTitle>\r\n          <DialogDescription className=\"sr-only\">\r\n            Formulaire pour créer ou modifier un patient\r\n          </DialogDescription>\r\n          <CharacterForm\r\n            character={editingCharacter}\r\n            onSubmit={handleSubmit}\r\n            onCancel={handleCloseForm}\r\n            isLoading={createMutation.isPending || updateMutation.isPending}\r\n          />\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      {/* Details Dialog */}\r\n      <Dialog open={!!viewingCharacter} onOpenChange={() => setViewingCharacter(null)}>\r\n        <DialogContent className=\"max-w-lg p-0 gap-0 border-0 bg-transparent shadow-none\">\r\n          <DialogTitle className=\"sr-only\">Détails du patient</DialogTitle>\r\n          <DialogDescription className=\"sr-only\">\r\n            Informations détaillées sur le patient\r\n          </DialogDescription>\r\n          {viewingCharacter && (\r\n            <CharacterDetails\r\n              character={viewingCharacter}\r\n              trustedPersons={getTrustedPersons(viewingCharacter)}\r\n              allCharacters={characters}\r\n              onViewTrustedPerson={setViewingCharacter}\r\n              onClose={() => setViewingCharacter(null)}\r\n            />\r\n          )}\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      {/* Delete Confirmation */}\r\n      <AlertDialog open={!!deletingCharacter} onOpenChange={() => setDeletingCharacter(null)}>\r\n        <AlertDialogContent>\r\n          <AlertDialogHeader>\r\n            <AlertDialogTitle>Supprimer ce patient ?</AlertDialogTitle>\r\n            <AlertDialogDescription>\r\n              Cette action est irréversible. Le patient{' '}\r\n              <span className=\"font-semibold\">\r\n                {deletingCharacter?.first_name} {deletingCharacter?.last_name}\r\n              </span>{' '}\r\n              sera définitivement supprimé.\r\n            </AlertDialogDescription>\r\n          </AlertDialogHeader>\r\n          <AlertDialogFooter>\r\n            <AlertDialogCancel>Annuler</AlertDialogCancel>\r\n            <AlertDialogAction\r\n              onClick={() => {\r\n                if (deletingCharacter?._id) {\r\n                  deleteMutation.mutate(deletingCharacter._id);\r\n                }\r\n              }}\r\n              className=\"bg-rose-600 hover:bg-rose-700\"\r\n            >\r\n              Supprimer\r\n            </AlertDialogAction>\r\n          </AlertDialogFooter>\r\n        </AlertDialogContent>\r\n      </AlertDialog>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4562, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/elise/Documents/novalife-app/app/page.tsx"],"sourcesContent":["\"use client\";\n\n\"use client\";\nimport { useEffect } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport Characters from \"@/components/Characters\";\n\nexport default function Home() {\n  const router = useRouter();\n  useEffect(() => {\n    if (typeof window !== \"undefined\") {\n      const isAuth = localStorage.getItem(\"novalife_auth\");\n      if (!isAuth) {\n        router.replace(\"/login\");\n      }\n    }\n  }, [router]);\n  return <Characters />;\n}\n"],"names":[],"mappings":";;;;;AAGA;AACA;AACA;;;AALA;AAEA;;;;AAKe,SAAS;;IACtB,MAAM,SAAS,IAAA,kJAAS;IACxB,IAAA,0KAAS;0BAAC;YACR,wCAAmC;gBACjC,MAAM,SAAS,aAAa,OAAO,CAAC;gBACpC,IAAI,CAAC,QAAQ;oBACX,OAAO,OAAO,CAAC;gBACjB;YACF;QACF;yBAAG;QAAC;KAAO;IACX,qBAAO,6LAAC,uIAAU;;;;;AACpB;GAXwB;;QACP,kJAAS;;;KADF"}}]
}